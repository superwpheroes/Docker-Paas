"use strict";function _typeof(obj){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function __guard__(value,transform){return void 0!==value&&null!==value?transform(value):void 0}function __guardMethod__(obj,methodName,transform){return void 0!==obj&&null!==obj&&"function"==typeof obj[methodName]?transform(obj,methodName):void 0}var Emitter=function(){function Emitter(){_classCallCheck(this,Emitter)}return _createClass(Emitter,[{key:"on",value:function(event,fn){return this._callbacks=this._callbacks||{},this._callbacks[event]||(this._callbacks[event]=[]),this._callbacks[event].push(fn),this}},{key:"emit",value:function(event){this._callbacks=this._callbacks||{};var callbacks=this._callbacks[event];if(callbacks){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=callbacks[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.apply(this,args)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return this}},{key:"off",value:function(event,fn){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1===arguments.length)return delete this._callbacks[event],this;for(var i=0;i<callbacks.length;i++){if(callbacks[i]===fn){callbacks.splice(i,1);break}}return this}}]),Emitter}(),Dropzone=function(_Emitter){function Dropzone(el,options){var _this;_classCallCheck(this,Dropzone),_this=_possibleConstructorReturn(this,_getPrototypeOf(Dropzone).call(this));var fallback,left;if(_this.element=el,_this.version=Dropzone.version,_this.defaultOptions.previewTemplate=_this.defaultOptions.previewTemplate.replace(/\n*/g,""),_this.clickableElements=[],_this.listeners=[],_this.files=[],"string"==typeof _this.element&&(_this.element=document.querySelector(_this.element)),!_this.element||null==_this.element.nodeType)throw new Error("Invalid dropzone element.");if(_this.element.dropzone)throw new Error("Dropzone already attached.");Dropzone.instances.push(_assertThisInitialized(_this)),_this.element.dropzone=_assertThisInitialized(_this);var elementOptions=null!=(left=Dropzone.optionsForElement(_this.element))?left:{};if(_this.options=Dropzone.extend({},_this.defaultOptions,elementOptions,null!=options?options:{}),_this.options.forceFallback||!Dropzone.isBrowserSupported())return _possibleConstructorReturn(_this,_this.options.fallback.call(_assertThisInitialized(_this)));if(null==_this.options.url&&(_this.options.url=_this.element.getAttribute("action")),!_this.options.url)throw new Error("No URL provided.");if(_this.options.acceptedFiles&&_this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(_this.options.uploadMultiple&&_this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return _this.options.acceptedMimeTypes&&(_this.options.acceptedFiles=_this.options.acceptedMimeTypes,delete _this.options.acceptedMimeTypes),null!=_this.options.renameFilename&&(_this.options.renameFile=function(file){return _this.options.renameFilename.call(_assertThisInitialized(_this),file.name,file)}),_this.options.method=_this.options.method.toUpperCase(),(fallback=_this.getExistingFallback())&&fallback.parentNode&&fallback.parentNode.removeChild(fallback),!1!==_this.options.previewsContainer&&(_this.options.previewsContainer?_this.previewsContainer=Dropzone.getElement(_this.options.previewsContainer,"previewsContainer"):_this.previewsContainer=_this.element),_this.options.clickable&&(!0===_this.options.clickable?_this.clickableElements=[_this.element]:_this.clickableElements=Dropzone.getElements(_this.options.clickable,"clickable")),_this.init(),_this}return _inherits(Dropzone,_Emitter),_createClass(Dropzone,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(files,xhr,chunk){if(chunk)return{dzuuid:chunk.file.upload.uuid,dzchunkindex:chunk.index,dztotalfilesize:chunk.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:chunk.file.upload.totalChunkCount,dzchunkbyteoffset:chunk.index*this.options.chunkSize}},accept:function(file,done){return done()},chunksUploaded:function(file,done){done()},fallback:function(){var messageElement;this.element.className="".concat(this.element.className," dz-browser-not-supported");var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=this.element.getElementsByTagName("div")[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var child=_step2.value;if(/(^| )dz-message($| )/.test(child.className)){messageElement=child,child.className="dz-message";break}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}messageElement||(messageElement=Dropzone.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(messageElement));var span=messageElement.getElementsByTagName("span")[0];return span&&(null!=span.textContent?span.textContent=this.options.dictFallbackMessage:null!=span.innerText&&(span.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(file,width,height,resizeMethod){var info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height},srcRatio=file.width/file.height;null==width&&null==height?(width=info.srcWidth,height=info.srcHeight):null==width?width=height*srcRatio:null==height&&(height=width/srcRatio),width=Math.min(width,info.srcWidth),height=Math.min(height,info.srcHeight);var trgRatio=width/height;if(info.srcWidth>width||info.srcHeight>height)if("crop"===resizeMethod)srcRatio>trgRatio?(info.srcHeight=file.height,info.srcWidth=info.srcHeight*trgRatio):(info.srcWidth=file.width,info.srcHeight=info.srcWidth/trgRatio);else{if("contain"!==resizeMethod)throw new Error("Unknown resizeMethod '".concat(resizeMethod,"'"));srcRatio>trgRatio?height=width/srcRatio:width=height*srcRatio}return info.srcX=(file.width-info.srcWidth)/2,info.srcY=(file.height-info.srcHeight)/2,info.trgWidth=width,info.trgHeight=height,info},transformFile:function(file,done){return(this.options.resizeWidth||this.options.resizeHeight)&&file.type.match(/image.*/)?this.resizeImage(file,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,done):done(file)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){var _this2=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),file.previewTemplate=file.previewElement,this.previewsContainer.appendChild(file.previewElement);var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=file.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var node=_step3.value;node.textContent=file.name}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{_iteratorNormalCompletion3||null==_iterator3.return||_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=file.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0)node=_step4.value,node.innerHTML=this.filesize(file.size)}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{_iteratorNormalCompletion4||null==_iterator4.return||_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}this.options.addRemoveLinks&&(file._removeLink=Dropzone.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),file.previewElement.appendChild(file._removeLink));var removeFileEvent=function(e){return e.preventDefault(),e.stopPropagation(),file.status===Dropzone.UPLOADING?Dropzone.confirm(_this2.options.dictCancelUploadConfirmation,function(){return _this2.removeFile(file)}):_this2.options.dictRemoveFileConfirmation?Dropzone.confirm(_this2.options.dictRemoveFileConfirmation,function(){return _this2.removeFile(file)}):_this2.removeFile(file)},_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=file.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){_step5.value.addEventListener("click",removeFileEvent)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{_iteratorNormalCompletion5||null==_iterator5.return||_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},removedfile:function(file){return null!=file.previewElement&&null!=file.previewElement.parentNode&&file.previewElement.parentNode.removeChild(file.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){if(file.previewElement){file.previewElement.classList.remove("dz-file-preview");var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=file.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var thumbnailElement=_step6.value;thumbnailElement.alt=file.name,thumbnailElement.src=dataUrl}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{_iteratorNormalCompletion6||null==_iterator6.return||_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}return setTimeout(function(){return file.previewElement.classList.add("dz-image-preview")},1)}},error:function(file,message){if(file.previewElement){file.previewElement.classList.add("dz-error"),"String"!=typeof message&&message.error&&(message=message.error);var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=file.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){_step7.value.textContent=message}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{_iteratorNormalCompletion7||null==_iterator7.return||_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}},errormultiple:function(){},processing:function(file){if(file.previewElement&&(file.previewElement.classList.add("dz-processing"),file._removeLink))return file._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(file,progress,bytesSent){if(file.previewElement){var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=file.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var node=_step8.value;"PROGRESS"===node.nodeName?node.value=progress:node.style.width="".concat(progress,"%")}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{_iteratorNormalCompletion8||null==_iterator8.return||_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(file){if(file.previewElement)return file.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(file){return this.emit("error",file,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(file){if(file._removeLink&&(file._removeLink.innerHTML=this.options.dictRemoveFile),file.previewElement)return file.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(target){for(var _len2=arguments.length,objects=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)objects[_key2-1]=arguments[_key2];for(var _i=0,_objects=objects;_i<_objects.length;_i++){var object=_objects[_i];for(var key in object){var val=object[key];target[key]=val}}return target}}]),_createClass(Dropzone,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(file){return file.accepted}).map(function(file){return file})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(file){return!file.accepted}).map(function(file){return file})}},{key:"getFilesWithStatus",value:function(status){return this.files.filter(function(file){return file.status===status}).map(function(file){return file})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(Dropzone.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(Dropzone.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(Dropzone.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(file){return file.status===Dropzone.UPLOADING||file.status===Dropzone.QUEUED}).map(function(file){return file})}},{key:"init",value:function(){var _this3=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){!function setupHiddenFileInput(){return _this3.hiddenFileInput&&_this3.hiddenFileInput.parentNode.removeChild(_this3.hiddenFileInput),_this3.hiddenFileInput=document.createElement("input"),_this3.hiddenFileInput.setAttribute("type","file"),(null===_this3.options.maxFiles||_this3.options.maxFiles>1)&&_this3.hiddenFileInput.setAttribute("multiple","multiple"),_this3.hiddenFileInput.className="dz-hidden-input",null!==_this3.options.acceptedFiles&&_this3.hiddenFileInput.setAttribute("accept",_this3.options.acceptedFiles),null!==_this3.options.capture&&_this3.hiddenFileInput.setAttribute("capture",_this3.options.capture),_this3.hiddenFileInput.style.visibility="hidden",_this3.hiddenFileInput.style.position="absolute",_this3.hiddenFileInput.style.top="0",_this3.hiddenFileInput.style.left="0",_this3.hiddenFileInput.style.height="0",_this3.hiddenFileInput.style.width="0",Dropzone.getElement(_this3.options.hiddenInputContainer,"hiddenInputContainer").appendChild(_this3.hiddenFileInput),_this3.hiddenFileInput.addEventListener("change",function(){var files=_this3.hiddenFileInput.files;if(files.length){var _iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _step9,_iterator9=files[Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var file=_step9.value;_this3.addFile(file)}}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{_iteratorNormalCompletion9||null==_iterator9.return||_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}}return _this3.emit("addedfiles",files),setupHiddenFileInput()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;var _iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _step10,_iterator10=this.events[Symbol.iterator]();!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0){var eventName=_step10.value;this.on(eventName,this.options[eventName])}}catch(err){_didIteratorError10=!0,_iteratorError10=err}finally{try{_iteratorNormalCompletion10||null==_iterator10.return||_iterator10.return()}finally{if(_didIteratorError10)throw _iteratorError10}}this.on("uploadprogress",function(){return _this3.updateTotalUploadProgress()}),this.on("removedfile",function(){return _this3.updateTotalUploadProgress()}),this.on("canceled",function(file){return _this3.emit("complete",file)}),this.on("complete",function(file){if(0===_this3.getAddedFiles().length&&0===_this3.getUploadingFiles().length&&0===_this3.getQueuedFiles().length)return setTimeout(function(){return _this3.emit("queuecomplete")},0)});var containsFiles=function(e){return e.dataTransfer.types&&e.dataTransfer.types.some(function(type){return"Files"==type})},noPropagation=function(e){if(containsFiles(e))return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(e){return _this3.emit("dragstart",e)},dragenter:function(e){return noPropagation(e),_this3.emit("dragenter",e)},dragover:function(e){var efct;try{efct=e.dataTransfer.effectAllowed}catch(error){}return e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy",noPropagation(e),_this3.emit("dragover",e)},dragleave:function(e){return _this3.emit("dragleave",e)},drop:function(e){return noPropagation(e),_this3.drop(e)},dragend:function(e){return _this3.emit("dragend",e)}}}],this.clickableElements.forEach(function(clickableElement){return _this3.listeners.push({element:clickableElement,events:{click:function(evt){return(clickableElement!==_this3.element||evt.target===_this3.element||Dropzone.elementInside(evt.target,_this3.element.querySelector(".dz-message")))&&_this3.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var totalUploadProgress,totalBytesSent=0,totalBytes=0;if(this.getActiveFiles().length){var _iteratorNormalCompletion11=!0,_didIteratorError11=!1,_iteratorError11=void 0;try{for(var _step11,_iterator11=this.getActiveFiles()[Symbol.iterator]();!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=!0){var file=_step11.value;totalBytesSent+=file.upload.bytesSent,totalBytes+=file.upload.total}}catch(err){_didIteratorError11=!0,_iteratorError11=err}finally{try{_iteratorNormalCompletion11||null==_iterator11.return||_iterator11.return()}finally{if(_didIteratorError11)throw _iteratorError11}}totalUploadProgress=100*totalBytesSent/totalBytes}else totalUploadProgress=100;return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)}},{key:"_getParamName",value:function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(n,"]"):"")}},{key:"_renameFile",value:function(file){return"function"!=typeof this.options.renameFile?file.name:this.options.renameFile(file)}},{key:"getFallbackForm",value:function(){var existingFallback,form;if(existingFallback=this.getExistingFallback())return existingFallback;var fieldsString='<div class="dz-fallback">';this.options.dictFallbackText&&(fieldsString+="<p>".concat(this.options.dictFallbackText,"</p>")),fieldsString+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var fields=Dropzone.createElement(fieldsString);return"FORM"!==this.element.tagName?(form=Dropzone.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>')),form.appendChild(fields)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=form?form:fields}},{key:"getExistingFallback",value:function(){for(var _i2=0,_arr=["div","form"];_i2<_arr.length;_i2++){var fallback,tagName=_arr[_i2];if(fallback=function(elements){var _iteratorNormalCompletion12=!0,_didIteratorError12=!1,_iteratorError12=void 0;try{for(var _step12,_iterator12=elements[Symbol.iterator]();!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=!0){var el=_step12.value;if(/(^| )fallback($| )/.test(el.className))return el}}catch(err){_didIteratorError12=!0,_iteratorError12=err}finally{try{_iteratorNormalCompletion12||null==_iterator12.return||_iterator12.return()}finally{if(_didIteratorError12)throw _iteratorError12}}}(this.element.getElementsByTagName(tagName)))return fallback}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.addEventListener(event,listener,!1))}return result}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.removeEventListener(event,listener,!1))}return result}()})}},{key:"disable",value:function(){var _this4=this;return this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(file){return _this4.cancelUpload(file)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(size){var selectedSize=0,selectedUnit="b";if(size>0){for(var units=["tb","gb","mb","kb","b"],i=0;i<units.length;i++){var unit=units[i];if(size>=Math.pow(this.options.filesizeBase,4-i)/10){selectedSize=size/Math.pow(this.options.filesizeBase,4-i),selectedUnit=unit;break}}selectedSize=Math.round(10*selectedSize)/10}return"<strong>".concat(selectedSize,"</strong> ").concat(this.options.dictFileSizeUnits[selectedUnit])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var files=[],i=0;i<e.dataTransfer.files.length;i++)files[i]=e.dataTransfer.files[i];if(files.length){var items=e.dataTransfer.items;items&&items.length&&null!=items[0].webkitGetAsEntry?this._addFilesFromItems(items):this.handleFiles(files)}this.emit("addedfiles",files)}}},{key:"paste",value:function(e){if(null!=__guard__(null!=e?e.clipboardData:void 0,function(x){return x.items})){this.emit("paste",e);var items=e.clipboardData.items;return items.length?this._addFilesFromItems(items):void 0}}},{key:"handleFiles",value:function(files){var _iteratorNormalCompletion13=!0,_didIteratorError13=!1,_iteratorError13=void 0;try{for(var _step13,_iterator13=files[Symbol.iterator]();!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=!0){var file=_step13.value;this.addFile(file)}}catch(err){_didIteratorError13=!0,_iteratorError13=err}finally{try{_iteratorNormalCompletion13||null==_iterator13.return||_iterator13.return()}finally{if(_didIteratorError13)throw _iteratorError13}}}},{key:"_addFilesFromItems",value:function(items){var _this5=this;return function(){var result=[],_iteratorNormalCompletion14=!0,_didIteratorError14=!1,_iteratorError14=void 0;try{for(var _step14,_iterator14=items[Symbol.iterator]();!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=!0){var entry,item=_step14.value;null!=item.webkitGetAsEntry&&(entry=item.webkitGetAsEntry())?entry.isFile?result.push(_this5.addFile(item.getAsFile())):entry.isDirectory?result.push(_this5._addFilesFromDirectory(entry,entry.name)):result.push(void 0):null!=item.getAsFile&&(null==item.kind||"file"===item.kind)?result.push(_this5.addFile(item.getAsFile())):result.push(void 0)}}catch(err){_didIteratorError14=!0,_iteratorError14=err}finally{try{
_iteratorNormalCompletion14||null==_iterator14.return||_iterator14.return()}finally{if(_didIteratorError14)throw _iteratorError14}}return result}()}},{key:"_addFilesFromDirectory",value:function(directory,path){var _this6=this,dirReader=directory.createReader(),errorHandler=function(error){return __guardMethod__(console,"log",function(o){return o.log(error)})};return function readEntries(){return dirReader.readEntries(function(entries){if(entries.length>0){var _iteratorNormalCompletion15=!0,_didIteratorError15=!1,_iteratorError15=void 0;try{for(var _step15,_iterator15=entries[Symbol.iterator]();!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=!0){var entry=_step15.value;entry.isFile?entry.file(function(file){if(!_this6.options.ignoreHiddenFiles||"."!==file.name.substring(0,1))return file.fullPath="".concat(path,"/").concat(file.name),_this6.addFile(file)}):entry.isDirectory&&_this6._addFilesFromDirectory(entry,"".concat(path,"/").concat(entry.name))}}catch(err){_didIteratorError15=!0,_iteratorError15=err}finally{try{_iteratorNormalCompletion15||null==_iterator15.return||_iterator15.return()}finally{if(_didIteratorError15)throw _iteratorError15}}readEntries()}return null},errorHandler)}()}},{key:"accept",value:function(file,done){this.options.maxFilesize&&file.size>1024*this.options.maxFilesize*1024?done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Dropzone.isValidFile(file,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",file)):this.options.accept.call(this,file,done):done(this.options.dictInvalidFileType)}},{key:"addFile",value:function(file){var _this7=this;file.upload={uuid:Dropzone.uuidv4(),progress:0,total:file.size,bytesSent:0,filename:this._renameFile(file)},this.files.push(file),file.status=Dropzone.ADDED,this.emit("addedfile",file),this._enqueueThumbnail(file),this.accept(file,function(error){error?(file.accepted=!1,_this7._errorProcessing([file],error)):(file.accepted=!0,_this7.options.autoQueue&&_this7.enqueueFile(file)),_this7._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(files){var _iteratorNormalCompletion16=!0,_didIteratorError16=!1,_iteratorError16=void 0;try{for(var _step16,_iterator16=files[Symbol.iterator]();!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=!0){var file=_step16.value;this.enqueueFile(file)}}catch(err){_didIteratorError16=!0,_iteratorError16=err}finally{try{_iteratorNormalCompletion16||null==_iterator16.return||_iterator16.return()}finally{if(_didIteratorError16)throw _iteratorError16}}return null}},{key:"enqueueFile",value:function(file){var _this8=this;if(file.status!==Dropzone.ADDED||!0!==file.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(file.status=Dropzone.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return _this8.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(file){var _this9=this;if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(file),setTimeout(function(){return _this9._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var _this10=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var file=this._thumbnailQueue.shift();return this.createThumbnail(file,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(dataUrl){return _this10.emit("thumbnail",file,dataUrl),_this10._processingThumbnail=!1,_this10._processThumbnailQueue()})}}},{key:"removeFile",value:function(file){if(file.status===Dropzone.UPLOADING&&this.cancelUpload(file),this.files=without(this.files,file),this.emit("removedfile",file),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(cancelIfNecessary){null==cancelIfNecessary&&(cancelIfNecessary=!1);var _iteratorNormalCompletion17=!0,_didIteratorError17=!1,_iteratorError17=void 0;try{for(var _step17,_iterator17=this.files.slice()[Symbol.iterator]();!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=!0){var file=_step17.value;(file.status!==Dropzone.UPLOADING||cancelIfNecessary)&&this.removeFile(file)}}catch(err){_didIteratorError17=!0,_iteratorError17=err}finally{try{_iteratorNormalCompletion17||null==_iterator17.return||_iterator17.return()}finally{if(_didIteratorError17)throw _iteratorError17}}return null}},{key:"resizeImage",value:function(file,width,height,resizeMethod,callback){var _this11=this;return this.createThumbnail(file,width,height,resizeMethod,!0,function(dataUrl,canvas){if(null==canvas)return callback(file);var resizeMimeType=_this11.options.resizeMimeType;null==resizeMimeType&&(resizeMimeType=file.type);var resizedDataURL=canvas.toDataURL(resizeMimeType,_this11.options.resizeQuality);return"image/jpeg"!==resizeMimeType&&"image/jpg"!==resizeMimeType||(resizedDataURL=ExifRestore.restore(file.dataURL,resizedDataURL)),callback(Dropzone.dataURItoBlob(resizedDataURL))})}},{key:"createThumbnail",value:function(file,width,height,resizeMethod,fixOrientation,callback){var _this12=this,fileReader=new FileReader;fileReader.onload=function(){if(file.dataURL=fileReader.result,"image/svg+xml"===file.type)return void(null!=callback&&callback(fileReader.result));_this12.createThumbnailFromUrl(file,width,height,resizeMethod,fixOrientation,callback)},fileReader.readAsDataURL(file)}},{key:"displayExistingFile",value:function(mockFile,imageUrl,callback,crossOrigin){var _this13=this,resizeThumbnail=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",mockFile),this.emit("complete",mockFile),resizeThumbnail){var onDone=function(thumbnail){_this13.emit("thumbnail",mockFile,thumbnail),callback&&callback()};mockFile.dataURL=imageUrl,this.createThumbnailFromUrl(mockFile,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,onDone,crossOrigin)}else this.emit("thumbnail",mockFile,imageUrl),callback&&callback()}},{key:"createThumbnailFromUrl",value:function(file,width,height,resizeMethod,fixOrientation,callback,crossOrigin){var _this14=this,img=document.createElement("img");return crossOrigin&&(img.crossOrigin=crossOrigin),img.onload=function(){var loadExif=function(callback){return callback(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&fixOrientation&&(loadExif=function(callback){return EXIF.getData(img,function(){return callback(EXIF.getTag(this,"Orientation"))})}),loadExif(function(orientation){file.width=img.width,file.height=img.height;var resizeInfo=_this14.options.resize.call(_this14,file,width,height,resizeMethod),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");switch(canvas.width=resizeInfo.trgWidth,canvas.height=resizeInfo.trgHeight,orientation>4&&(canvas.width=resizeInfo.trgHeight,canvas.height=resizeInfo.trgWidth),orientation){case 2:ctx.translate(canvas.width,0),ctx.scale(-1,1);break;case 3:ctx.translate(canvas.width,canvas.height),ctx.rotate(Math.PI);break;case 4:ctx.translate(0,canvas.height),ctx.scale(1,-1);break;case 5:ctx.rotate(.5*Math.PI),ctx.scale(1,-1);break;case 6:ctx.rotate(.5*Math.PI),ctx.translate(0,-canvas.width);break;case 7:ctx.rotate(.5*Math.PI),ctx.translate(canvas.height,-canvas.width),ctx.scale(-1,1);break;case 8:ctx.rotate(-.5*Math.PI),ctx.translate(-canvas.height,0)}drawImageIOSFix(ctx,img,null!=resizeInfo.srcX?resizeInfo.srcX:0,null!=resizeInfo.srcY?resizeInfo.srcY:0,resizeInfo.srcWidth,resizeInfo.srcHeight,null!=resizeInfo.trgX?resizeInfo.trgX:0,null!=resizeInfo.trgY?resizeInfo.trgY:0,resizeInfo.trgWidth,resizeInfo.trgHeight);var thumbnail=canvas.toDataURL("image/png");if(null!=callback)return callback(thumbnail,canvas)})},null!=callback&&(img.onerror=callback),img.src=file.dataURL}},{key:"processQueue",value:function(){var parallelUploads=this.options.parallelUploads,processingLength=this.getUploadingFiles().length,i=processingLength;if(!(processingLength>=parallelUploads)){var queuedFiles=this.getQueuedFiles();if(queuedFiles.length>0){if(this.options.uploadMultiple)return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));for(;i<parallelUploads;){if(!queuedFiles.length)return;this.processFile(queuedFiles.shift()),i++}}}}},{key:"processFile",value:function(file){return this.processFiles([file])}},{key:"processFiles",value:function(files){var _iteratorNormalCompletion18=!0,_didIteratorError18=!1,_iteratorError18=void 0;try{for(var _step18,_iterator18=files[Symbol.iterator]();!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=!0){var file=_step18.value;file.processing=!0,file.status=Dropzone.UPLOADING,this.emit("processing",file)}}catch(err){_didIteratorError18=!0,_iteratorError18=err}finally{try{_iteratorNormalCompletion18||null==_iterator18.return||_iterator18.return()}finally{if(_didIteratorError18)throw _iteratorError18}}return this.options.uploadMultiple&&this.emit("processingmultiple",files),this.uploadFiles(files)}},{key:"_getFilesWithXhr",value:function(xhr){return this.files.filter(function(file){return file.xhr===xhr}).map(function(file){return file})}},{key:"cancelUpload",value:function(file){if(file.status===Dropzone.UPLOADING){var groupedFiles=this._getFilesWithXhr(file.xhr),_iteratorNormalCompletion19=!0,_didIteratorError19=!1,_iteratorError19=void 0;try{for(var _step19,_iterator19=groupedFiles[Symbol.iterator]();!(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done);_iteratorNormalCompletion19=!0){_step19.value.status=Dropzone.CANCELED}}catch(err){_didIteratorError19=!0,_iteratorError19=err}finally{try{_iteratorNormalCompletion19||null==_iterator19.return||_iterator19.return()}finally{if(_didIteratorError19)throw _iteratorError19}}void 0!==file.xhr&&file.xhr.abort();var _iteratorNormalCompletion20=!0,_didIteratorError20=!1,_iteratorError20=void 0;try{for(var _step20,_iterator20=groupedFiles[Symbol.iterator]();!(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done);_iteratorNormalCompletion20=!0){var _groupedFile=_step20.value;this.emit("canceled",_groupedFile)}}catch(err){_didIteratorError20=!0,_iteratorError20=err}finally{try{_iteratorNormalCompletion20||null==_iterator20.return||_iterator20.return()}finally{if(_didIteratorError20)throw _iteratorError20}}this.options.uploadMultiple&&this.emit("canceledmultiple",groupedFiles)}else file.status!==Dropzone.ADDED&&file.status!==Dropzone.QUEUED||(file.status=Dropzone.CANCELED,this.emit("canceled",file),this.options.uploadMultiple&&this.emit("canceledmultiple",[file]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(option){if("function"==typeof option){for(var _len3=arguments.length,args=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];return option.apply(this,args)}return option}},{key:"uploadFile",value:function(file){return this.uploadFiles([file])}},{key:"uploadFiles",value:function(files){var _this15=this;this._transformFiles(files,function(transformedFiles){if(_this15.options.chunking){var transformedFile=transformedFiles[0];files[0].upload.chunked=_this15.options.chunking&&(_this15.options.forceChunking||transformedFile.size>_this15.options.chunkSize),files[0].upload.totalChunkCount=Math.ceil(transformedFile.size/_this15.options.chunkSize)}if(files[0].upload.chunked){var file=files[0],_transformedFile=transformedFiles[0],startedChunkCount=0;file.upload.chunks=[];var handleNextChunk=function(){for(var chunkIndex=0;void 0!==file.upload.chunks[chunkIndex];)chunkIndex++;if(!(chunkIndex>=file.upload.totalChunkCount)){startedChunkCount++;var start=chunkIndex*_this15.options.chunkSize,end=Math.min(start+_this15.options.chunkSize,file.size),dataBlock={name:_this15._getParamName(0),data:_transformedFile.webkitSlice?_transformedFile.webkitSlice(start,end):_transformedFile.slice(start,end),filename:file.upload.filename,chunkIndex:chunkIndex};file.upload.chunks[chunkIndex]={file:file,index:chunkIndex,dataBlock:dataBlock,status:Dropzone.UPLOADING,progress:0,retries:0},_this15._uploadData(files,[dataBlock])}};if(file.upload.finishedChunkUpload=function(chunk){var allFinished=!0;chunk.status=Dropzone.SUCCESS,chunk.dataBlock=null,chunk.xhr=null;for(var i=0;i<file.upload.totalChunkCount;i++){if(void 0===file.upload.chunks[i])return handleNextChunk();file.upload.chunks[i].status!==Dropzone.SUCCESS&&(allFinished=!1)}allFinished&&_this15.options.chunksUploaded(file,function(){_this15._finished(files,"",null)})},_this15.options.parallelChunkUploads)for(var i=0;i<file.upload.totalChunkCount;i++)handleNextChunk();else handleNextChunk()}else{for(var dataBlocks=[],_i3=0;_i3<files.length;_i3++)dataBlocks[_i3]={name:_this15._getParamName(_i3),data:transformedFiles[_i3],filename:files[_i3].upload.filename};_this15._uploadData(files,dataBlocks)}})}},{key:"_getChunk",value:function(file,xhr){for(var i=0;i<file.upload.totalChunkCount;i++)if(void 0!==file.upload.chunks[i]&&file.upload.chunks[i].xhr===xhr)return file.upload.chunks[i]}},{key:"_uploadData",value:function(files,dataBlocks){var _this16=this,xhr=new XMLHttpRequest,_iteratorNormalCompletion21=!0,_didIteratorError21=!1,_iteratorError21=void 0;try{for(var _step21,_iterator21=files[Symbol.iterator]();!(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done);_iteratorNormalCompletion21=!0){_step21.value.xhr=xhr}}catch(err){_didIteratorError21=!0,_iteratorError21=err}finally{try{_iteratorNormalCompletion21||null==_iterator21.return||_iterator21.return()}finally{if(_didIteratorError21)throw _iteratorError21}}files[0].upload.chunked&&(files[0].upload.chunks[dataBlocks[0].chunkIndex].xhr=xhr);var method=this.resolveOption(this.options.method,files),url=this.resolveOption(this.options.url,files);xhr.open(method,url,!0),xhr.timeout=this.resolveOption(this.options.timeout,files),xhr.withCredentials=!!this.options.withCredentials,xhr.onload=function(e){_this16._finishedUploading(files,xhr,e)},xhr.ontimeout=function(){_this16._handleUploadError(files,xhr,"Request timedout after ".concat(_this16.options.timeout," seconds"))},xhr.onerror=function(){_this16._handleUploadError(files,xhr)},(null!=xhr.upload?xhr.upload:xhr).onprogress=function(e){return _this16._updateFilesUploadProgress(files,xhr,e)};var headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&Dropzone.extend(headers,this.options.headers);for(var headerName in headers){var headerValue=headers[headerName];headerValue&&xhr.setRequestHeader(headerName,headerValue)}var formData=new FormData;if(this.options.params){var additionalParams=this.options.params;"function"==typeof additionalParams&&(additionalParams=additionalParams.call(this,files,xhr,files[0].upload.chunked?this._getChunk(files[0],xhr):null));for(var key in additionalParams){var value=additionalParams[key];formData.append(key,value)}}var _iteratorNormalCompletion22=!0,_didIteratorError22=!1,_iteratorError22=void 0;try{for(var _step22,_iterator22=files[Symbol.iterator]();!(_iteratorNormalCompletion22=(_step22=_iterator22.next()).done);_iteratorNormalCompletion22=!0){var _file=_step22.value;this.emit("sending",_file,xhr,formData)}}catch(err){_didIteratorError22=!0,_iteratorError22=err}finally{try{_iteratorNormalCompletion22||null==_iterator22.return||_iterator22.return()}finally{if(_didIteratorError22)throw _iteratorError22}}this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr,formData),this._addFormElementData(formData);for(var i=0;i<dataBlocks.length;i++){var dataBlock=dataBlocks[i];formData.append(dataBlock.name,dataBlock.data,dataBlock.filename)}this.submitRequest(xhr,formData,files)}},{key:"_transformFiles",value:function(files,done){for(var _this17=this,transformedFiles=[],doneCounter=0,i=0;i<files.length;i++)!function(i){_this17.options.transformFile.call(_this17,files[i],function(transformedFile){transformedFiles[i]=transformedFile,++doneCounter===files.length&&done(transformedFiles)})}(i)}},{key:"_addFormElementData",value:function(formData){if("FORM"===this.element.tagName){var _iteratorNormalCompletion23=!0,_didIteratorError23=!1,_iteratorError23=void 0;try{for(var _step23,_iterator23=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(_iteratorNormalCompletion23=(_step23=_iterator23.next()).done);_iteratorNormalCompletion23=!0){var input=_step23.value,inputName=input.getAttribute("name"),inputType=input.getAttribute("type");if(inputType&&(inputType=inputType.toLowerCase()),void 0!==inputName&&null!==inputName)if("SELECT"===input.tagName&&input.hasAttribute("multiple")){var _iteratorNormalCompletion24=!0,_didIteratorError24=!1,_iteratorError24=void 0;try{for(var _step24,_iterator24=input.options[Symbol.iterator]();!(_iteratorNormalCompletion24=(_step24=_iterator24.next()).done);_iteratorNormalCompletion24=!0){var option=_step24.value;option.selected&&formData.append(inputName,option.value)}}catch(err){_didIteratorError24=!0,_iteratorError24=err}finally{try{_iteratorNormalCompletion24||null==_iterator24.return||_iterator24.return()}finally{if(_didIteratorError24)throw _iteratorError24}}}else(!inputType||"checkbox"!==inputType&&"radio"!==inputType||input.checked)&&formData.append(inputName,input.value)}}catch(err){_didIteratorError23=!0,_iteratorError23=err}finally{try{_iteratorNormalCompletion23||null==_iterator23.return||_iterator23.return()}finally{if(_didIteratorError23)throw _iteratorError23}}}}},{key:"_updateFilesUploadProgress",value:function(files,xhr,e){var progress;if(void 0!==e){if(progress=100*e.loaded/e.total,files[0].upload.chunked){var file=files[0],chunk=this._getChunk(file,xhr);chunk.progress=progress,chunk.total=e.total,chunk.bytesSent=e.loaded;file.upload.progress=0,file.upload.total=0,file.upload.bytesSent=0;for(var i=0;i<file.upload.totalChunkCount;i++)void 0!==file.upload.chunks[i]&&void 0!==file.upload.chunks[i].progress&&(file.upload.progress+=file.upload.chunks[i].progress,file.upload.total+=file.upload.chunks[i].total,file.upload.bytesSent+=file.upload.chunks[i].bytesSent);file.upload.progress=file.upload.progress/file.upload.totalChunkCount}else{var _iteratorNormalCompletion25=!0,_didIteratorError25=!1,_iteratorError25=void 0;try{for(var _step25,_iterator25=files[Symbol.iterator]();!(_iteratorNormalCompletion25=(_step25=_iterator25.next()).done);_iteratorNormalCompletion25=!0){var _file2=_step25.value;_file2.upload.progress=progress,_file2.upload.total=e.total,_file2.upload.bytesSent=e.loaded}}catch(err){_didIteratorError25=!0,_iteratorError25=err}finally{try{_iteratorNormalCompletion25||null==_iterator25.return||_iterator25.return()}finally{if(_didIteratorError25)throw _iteratorError25}}}var _iteratorNormalCompletion26=!0,_didIteratorError26=!1,_iteratorError26=void 0;try{for(var _step26,_iterator26=files[Symbol.iterator]();!(_iteratorNormalCompletion26=(_step26=_iterator26.next()).done);_iteratorNormalCompletion26=!0){var _file3=_step26.value;this.emit("uploadprogress",_file3,_file3.upload.progress,_file3.upload.bytesSent)}}catch(err){_didIteratorError26=!0,_iteratorError26=err}finally{try{_iteratorNormalCompletion26||null==_iterator26.return||_iterator26.return()}finally{if(_didIteratorError26)throw _iteratorError26}}}else{var allFilesFinished=!0;progress=100;var _iteratorNormalCompletion27=!0,_didIteratorError27=!1,_iteratorError27=void 0;try{for(var _step27,_iterator27=files[Symbol.iterator]();!(_iteratorNormalCompletion27=(_step27=_iterator27.next()).done);_iteratorNormalCompletion27=!0){var _file4=_step27.value;100===_file4.upload.progress&&_file4.upload.bytesSent===_file4.upload.total||(allFilesFinished=!1),_file4.upload.progress=progress,_file4.upload.bytesSent=_file4.upload.total}}catch(err){_didIteratorError27=!0,_iteratorError27=err}finally{try{_iteratorNormalCompletion27||null==_iterator27.return||_iterator27.return()}finally{if(_didIteratorError27)throw _iteratorError27}}if(allFilesFinished)return;var _iteratorNormalCompletion28=!0,_didIteratorError28=!1,_iteratorError28=void 0;try{for(var _step28,_iterator28=files[Symbol.iterator]();!(_iteratorNormalCompletion28=(_step28=_iterator28.next()).done);_iteratorNormalCompletion28=!0){var _file5=_step28.value;this.emit("uploadprogress",_file5,progress,_file5.upload.bytesSent)}}catch(err){_didIteratorError28=!0,_iteratorError28=err}finally{try{_iteratorNormalCompletion28||null==_iterator28.return||_iterator28.return()}finally{if(_didIteratorError28)throw _iteratorError28}}}}},{key:"_finishedUploading",value:function(files,xhr,e){var response;if(files[0].status!==Dropzone.CANCELED&&4===xhr.readyState){if("arraybuffer"!==xhr.responseType&&"blob"!==xhr.responseType&&(response=xhr.responseText,xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")))try{response=JSON.parse(response)}catch(error){e=error,response="Invalid JSON response from server."}this._updateFilesUploadProgress(files),200<=xhr.status&&xhr.status<300?files[0].upload.chunked?files[0].upload.finishedChunkUpload(this._getChunk(files[0],xhr)):this._finished(files,response,e):this._handleUploadError(files,xhr,response)}}},{key:"_handleUploadError",value:function(files,xhr,response){if(files[0].status!==Dropzone.CANCELED){if(files[0].upload.chunked&&this.options.retryChunks){var chunk=this._getChunk(files[0],xhr);if(chunk.retries++<this.options.retryChunksLimit)return void this._uploadData(files,[chunk.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(files,response||this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr)}}},{key:"submitRequest",value:function(xhr,formData,files){xhr.send(formData)}},{key:"_finished",value:function(files,responseText,e){var _iteratorNormalCompletion29=!0,_didIteratorError29=!1,_iteratorError29=void 0;try{for(var _step29,_iterator29=files[Symbol.iterator]();!(_iteratorNormalCompletion29=(_step29=_iterator29.next()).done);_iteratorNormalCompletion29=!0){var file=_step29.value;file.status=Dropzone.SUCCESS,this.emit("success",file,responseText,e),this.emit("complete",file)}}catch(err){_didIteratorError29=!0,_iteratorError29=err}finally{try{_iteratorNormalCompletion29||null==_iterator29.return||_iterator29.return()}finally{if(_didIteratorError29)throw _iteratorError29}}if(this.options.uploadMultiple&&(this.emit("successmultiple",files,responseText,e),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(files,message,xhr){var _iteratorNormalCompletion30=!0,_didIteratorError30=!1,_iteratorError30=void 0;try{for(var _step30,_iterator30=files[Symbol.iterator]();!(_iteratorNormalCompletion30=(_step30=_iterator30.next()).done);_iteratorNormalCompletion30=!0){var file=_step30.value;file.status=Dropzone.ERROR,this.emit("error",file,message,xhr),this.emit("complete",file)}}catch(err){_didIteratorError30=!0,_iteratorError30=err}finally{try{_iteratorNormalCompletion30||null==_iterator30.return||_iterator30.return()}finally{if(_didIteratorError30)throw _iteratorError30}}if(this.options.uploadMultiple&&(this.emit("errormultiple",files,message,xhr),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}}]),Dropzone}(Emitter);Dropzone.initClass(),Dropzone.version="5.7.0",Dropzone.options={},Dropzone.optionsForElement=function(element){return element.getAttribute("id")?Dropzone.options[camelize(element.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(element){if("string"==typeof element&&(element=document.querySelector(element)),null==(null!=element?element.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return element.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var dropzones;if(document.querySelectorAll)dropzones=document.querySelectorAll(".dropzone");else{dropzones=[];var checkElements=function(elements){return function(){var result=[],_iteratorNormalCompletion31=!0,_didIteratorError31=!1,_iteratorError31=void 0;try{for(var _step31,_iterator31=elements[Symbol.iterator]();!(_iteratorNormalCompletion31=(_step31=_iterator31.next()).done);_iteratorNormalCompletion31=!0){var el=_step31.value;/(^| )dropzone($| )/.test(el.className)?result.push(dropzones.push(el)):result.push(void 0)}}catch(err){_didIteratorError31=!0,_iteratorError31=err}finally{try{_iteratorNormalCompletion31||null==_iterator31.return||_iterator31.return()}finally{if(_didIteratorError31)throw _iteratorError31}}return result}()};checkElements(document.getElementsByTagName("div")),checkElements(document.getElementsByTagName("form"))}return function(){var result=[],_iteratorNormalCompletion32=!0,_didIteratorError32=!1,_iteratorError32=void 0;try{for(var _step32,_iterator32=dropzones[Symbol.iterator]();!(_iteratorNormalCompletion32=(_step32=_iterator32.next()).done);_iteratorNormalCompletion32=!0){var dropzone=_step32.value;!1!==Dropzone.optionsForElement(dropzone)?result.push(new Dropzone(dropzone)):result.push(void 0)}}catch(err){_didIteratorError32=!0,_iteratorError32=err}finally{try{_iteratorNormalCompletion32||null==_iterator32.return||_iterator32.return()}finally{if(_didIteratorError32)throw _iteratorError32}}return result}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var capableBrowser=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){var _iteratorNormalCompletion33=!0,_didIteratorError33=!1,_iteratorError33=void 0;try{for(var _step33,_iterator33=Dropzone.blacklistedBrowsers[Symbol.iterator]();!(_iteratorNormalCompletion33=(_step33=_iterator33.next()).done);_iteratorNormalCompletion33=!0){var regex=_step33.value;regex.test(navigator.userAgent)&&(capableBrowser=!1)}}catch(err){_didIteratorError33=!0,_iteratorError33=err}finally{try{_iteratorNormalCompletion33||null==_iterator33.return||_iterator33.return()}finally{if(_didIteratorError33)throw _iteratorError33}}}else capableBrowser=!1;else capableBrowser=!1;return capableBrowser},Dropzone.dataURItoBlob=function(dataURI){for(var byteString=atob(dataURI.split(",")[1]),mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],ab=new ArrayBuffer(byteString.length),ia=new Uint8Array(ab),i=0,end=byteString.length,asc=0<=end;asc?i<=end:i>=end;asc?i++:i--)ia[i]=byteString.charCodeAt(i);return new Blob([ab],{type:mimeString})};var without=function(list,rejectedItem){return list.filter(function(item){return item!==rejectedItem}).map(function(item){return item})},camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase()})};Dropzone.createElement=function(string){var div=document.createElement("div");return div.innerHTML=string,div.childNodes[0]},Dropzone.elementInside=function(element,container){if(element===container)return!0;for(;element=element.parentNode;)if(element===container)return!0;return!1},Dropzone.getElement=function(el,name){var element;if("string"==typeof el?element=document.querySelector(el):null!=el.nodeType&&(element=el),null==element)throw new Error("Invalid `".concat(name,"` option provided. Please provide a CSS selector or a plain HTML element."));return element},Dropzone.getElements=function(els,name){var el,elements;if(els instanceof Array){elements=[];try{var _iteratorNormalCompletion34=!0,_didIteratorError34=!1,_iteratorError34=void 0;try{for(var _step34,_iterator34=els[Symbol.iterator]();!(_iteratorNormalCompletion34=(_step34=_iterator34.next()).done);_iteratorNormalCompletion34=!0)el=_step34.value,elements.push(this.getElement(el,name))}catch(err){_didIteratorError34=!0,_iteratorError34=err}finally{try{_iteratorNormalCompletion34||null==_iterator34.return||_iterator34.return()}finally{if(_didIteratorError34)throw _iteratorError34}}}catch(e){elements=null}}else if("string"==typeof els){elements=[];var _iteratorNormalCompletion35=!0,_didIteratorError35=!1,_iteratorError35=void 0;try{for(var _step35,_iterator35=document.querySelectorAll(els)[Symbol.iterator]();!(_iteratorNormalCompletion35=(_step35=_iterator35.next()).done);_iteratorNormalCompletion35=!0)el=_step35.value,elements.push(el)}catch(err){_didIteratorError35=!0,_iteratorError35=err}finally{try{_iteratorNormalCompletion35||null==_iterator35.return||_iterator35.return()}finally{if(_didIteratorError35)throw _iteratorError35}}}else null!=els.nodeType&&(elements=[els]);if(null==elements||!elements.length)throw new Error("Invalid `".concat(name,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return elements},Dropzone.confirm=function(question,accepted,rejected){return window.confirm(question)?accepted():null!=rejected?rejected():void 0},Dropzone.isValidFile=function(file,acceptedFiles){if(!acceptedFiles)return!0;acceptedFiles=acceptedFiles.split(",");var mimeType=file.type,baseMimeType=mimeType.replace(/\/.*$/,""),_iteratorNormalCompletion36=!0,_didIteratorError36=!1,_iteratorError36=void 0;try{for(var _step36,_iterator36=acceptedFiles[Symbol.iterator]();!(_iteratorNormalCompletion36=(_step36=_iterator36.next()).done);_iteratorNormalCompletion36=!0){var validType=_step36.value;if(validType=validType.trim(),"."===validType.charAt(0)){if(-1!==file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length))return!0}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,""))return!0}else if(mimeType===validType)return!0}}catch(err){_didIteratorError36=!0,_iteratorError36=err}finally{try{_iteratorNormalCompletion36||null==_iterator36.return||_iterator36.return()}finally{if(_didIteratorError36)throw _iteratorError36}}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(img){var ih=(img.naturalWidth,img.naturalHeight),canvas=document.createElement("canvas");canvas.width=1,canvas.height=ih;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);for(var _ctx$getImageData=ctx.getImageData(1,0,1,ih),data=_ctx$getImageData.data,sy=0,ey=ih,py=ih;py>sy;){0===data[4*(py-1)+3]?ey=py:sy=py,py=ey+sy>>1}var ratio=py/ih;return 0===ratio?1:ratio},drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio=detectVerticalSquash(img);return ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)},ExifRestore=function(){function ExifRestore(){_classCallCheck(this,ExifRestore)}return _createClass(ExifRestore,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(input){for(var output="",chr1=void 0,chr2=void 0,chr3="",enc1=void 0,enc2=void 0,enc3=void 0,enc4="",i=0;;)if(chr1=input[i++],
chr2=input[i++],chr3=input[i++],enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this.KEY_STR.charAt(enc1)+this.KEY_STR.charAt(enc2)+this.KEY_STR.charAt(enc3)+this.KEY_STR.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="",!(i<input.length))break;return output}},{key:"restore",value:function(origFileBase64,resizedFileBase64){if(!origFileBase64.match("data:image/jpeg;base64,"))return resizedFileBase64;var rawImage=this.decode64(origFileBase64.replace("data:image/jpeg;base64,","")),segments=this.slice2Segments(rawImage),image=this.exifManipulation(resizedFileBase64,segments);return"data:image/jpeg;base64,".concat(this.encode64(image))}},{key:"exifManipulation",value:function(resizedFileBase64,segments){var exifArray=this.getExifArray(segments),newImageArray=this.insertExif(resizedFileBase64,exifArray);return new Uint8Array(newImageArray)}},{key:"getExifArray",value:function(segments){for(var seg=void 0,x=0;x<segments.length;){if(seg=segments[x],255===seg[0]&225===seg[1])return seg;x++}return[]}},{key:"insertExif",value:function(resizedFileBase64,exifArray){var imageData=resizedFileBase64.replace("data:image/jpeg;base64,",""),buf=this.decode64(imageData),separatePoint=buf.indexOf(255,3),mae=buf.slice(0,separatePoint),ato=buf.slice(separatePoint),array=mae;return array=array.concat(exifArray),array=array.concat(ato)}},{key:"slice2Segments",value:function(rawImageArray){for(var head=0,segments=[];;){var length;if(255===rawImageArray[head]&218===rawImageArray[head+1])break;if(255===rawImageArray[head]&216===rawImageArray[head+1])head+=2;else{length=256*rawImageArray[head+2]+rawImageArray[head+3];var endPoint=head+length+2,seg=rawImageArray.slice(head,endPoint);segments.push(seg),head=endPoint}if(head>rawImageArray.length)break}return segments}},{key:"decode64",value:function(input){var chr1=void 0,chr2=void 0,chr3="",enc1=void 0,enc2=void 0,enc3=void 0,enc4="",i=0,buf=[],base64test=/[^A-Za-z0-9\+\/\=]/g;for(base64test.exec(input)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");;)if(enc1=this.KEY_STR.indexOf(input.charAt(i++)),enc2=this.KEY_STR.indexOf(input.charAt(i++)),enc3=this.KEY_STR.indexOf(input.charAt(i++)),enc4=this.KEY_STR.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,buf.push(chr1),64!==enc3&&buf.push(chr2),64!==enc4&&buf.push(chr3),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="",!(i<input.length))break;return buf}}]),ExifRestore}();ExifRestore.initClass();var contentLoaded=function(win,fn){var done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function init(e){if("readystatechange"!==e.type||"complete"===doc.readyState)return("load"===e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0};if("complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(error){}top&&function poll(){try{root.doScroll("left")}catch(e){return void setTimeout(poll,50)}return init("poll")}()}return doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction),function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.Handlebars=factory():root.Handlebars=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){function create(){var hb=_create();return hb.compile=function(input,options){return _handlebarsCompilerCompiler.compile(input,options,hb)},hb.precompile=function(input,options){return _handlebarsCompilerCompiler.precompile(input,options,hb)},hb.AST=_handlebarsCompilerAst2.default,hb.Compiler=_handlebarsCompilerCompiler.Compiler,hb.JavaScriptCompiler=_handlebarsCompilerJavascriptCompiler2.default,hb.Parser=_handlebarsCompilerBase.parser,hb.parse=_handlebarsCompilerBase.parse,hb}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _handlebarsRuntime=__webpack_require__(2),_handlebarsRuntime2=_interopRequireDefault(_handlebarsRuntime),_handlebarsCompilerAst=__webpack_require__(35),_handlebarsCompilerAst2=_interopRequireDefault(_handlebarsCompilerAst),_handlebarsCompilerBase=__webpack_require__(36),_handlebarsCompilerCompiler=__webpack_require__(41),_handlebarsCompilerJavascriptCompiler=__webpack_require__(42),_handlebarsCompilerJavascriptCompiler2=_interopRequireDefault(_handlebarsCompilerJavascriptCompiler),_handlebarsCompilerVisitor=__webpack_require__(39),_handlebarsCompilerVisitor2=_interopRequireDefault(_handlebarsCompilerVisitor),_handlebarsNoConflict=__webpack_require__(34),_handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict),_create=_handlebarsRuntime2.default.create,inst=create();inst.create=create,_handlebarsNoConflict2.default(inst),inst.Visitor=_handlebarsCompilerVisitor2.default,inst.default=inst,exports.default=inst,module.exports=exports.default},function(module,exports){exports.default=function(obj){return obj&&obj.__esModule?obj:{default:obj}},exports.__esModule=!0},function(module,exports,__webpack_require__){function create(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=_handlebarsSafeString2.default,hb.Exception=_handlebarsException2.default,hb.Utils=Utils,hb.escapeExpression=Utils.escapeExpression,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb}var _interopRequireWildcard=__webpack_require__(3).default,_interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _handlebarsBase=__webpack_require__(4),base=_interopRequireWildcard(_handlebarsBase),_handlebarsSafeString=__webpack_require__(21),_handlebarsSafeString2=_interopRequireDefault(_handlebarsSafeString),_handlebarsException=__webpack_require__(6),_handlebarsException2=_interopRequireDefault(_handlebarsException),_handlebarsUtils=__webpack_require__(5),Utils=_interopRequireWildcard(_handlebarsUtils),_handlebarsRuntime=__webpack_require__(22),runtime=_interopRequireWildcard(_handlebarsRuntime),_handlebarsNoConflict=__webpack_require__(34),_handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict),inst=create();inst.create=create,_handlebarsNoConflict2.default(inst),inst.default=inst,exports.default=inst,module.exports=exports.default},function(module,exports){exports.default=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj},exports.__esModule=!0},function(module,exports,__webpack_require__){function HandlebarsEnvironment(helpers,partials,decorators){this.helpers=helpers||{},this.partials=partials||{},this.decorators=decorators||{},_helpers.registerDefaultHelpers(this),_decorators.registerDefaultDecorators(this)}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.HandlebarsEnvironment=HandlebarsEnvironment;var _utils=__webpack_require__(5),_exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception),_helpers=__webpack_require__(10),_decorators=__webpack_require__(18),_logger=__webpack_require__(20),_logger2=_interopRequireDefault(_logger);exports.VERSION="4.0.11";exports.COMPILER_REVISION=7;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};exports.REVISION_CHANGES=REVISION_CHANGES;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:_logger2.default,log:_logger2.default.log,registerHelper:function(name,fn){if("[object Object]"===_utils.toString.call(name)){if(fn)throw new _exception2.default("Arg not supported with multiple helpers");_utils.extend(this.helpers,name)}else this.helpers[name]=fn},unregisterHelper:function(name){delete this.helpers[name]},registerPartial:function(name,partial){if("[object Object]"===_utils.toString.call(name))_utils.extend(this.partials,name);else{if(void 0===partial)throw new _exception2.default('Attempting to register a partial called "'+name+'" as undefined');this.partials[name]=partial}},unregisterPartial:function(name){delete this.partials[name]},registerDecorator:function(name,fn){if("[object Object]"===_utils.toString.call(name)){if(fn)throw new _exception2.default("Arg not supported with multiple decorators");_utils.extend(this.decorators,name)}else this.decorators[name]=fn},unregisterDecorator:function(name){delete this.decorators[name]}};var log=_logger2.default.log;exports.log=log,exports.createFrame=_utils.createFrame,exports.logger=_logger2.default},function(module,exports){function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],key)&&(obj[key]=arguments[i][key]);return obj}function indexOf(array,value){for(var i=0,len=array.length;i<len;i++)if(array[i]===value)return i;return-1}function escapeExpression(string){if("string"!=typeof string){if(string&&string.toHTML)return string.toHTML();if(null==string)return"";if(!string)return string+"";string=""+string}return possible.test(string)?string.replace(badChars,escapeChar):string}function isEmpty(value){return!value&&0!==value||!(!isArray(value)||0!==value.length)}function createFrame(object){var frame=extend({},object);return frame._parent=object,frame}function blockParams(params,ids){return params.path=ids,params}function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}exports.__esModule=!0,exports.extend=extend,exports.indexOf=indexOf,exports.escapeExpression=escapeExpression,exports.isEmpty=isEmpty,exports.createFrame=createFrame,exports.blockParams=blockParams,exports.appendContextPath=appendContextPath;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},badChars=/[&<>"'`=]/g,possible=/[&<>"'`=]/,toString=Object.prototype.toString;exports.toString=toString;var isFunction=function(value){return"function"==typeof value};isFunction(/x/)&&(exports.isFunction=isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)}),exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return!(!value||"object"!=typeof value)&&"[object Array]"===toString.call(value)};exports.isArray=isArray},function(module,exports,__webpack_require__){function Exception(message,node){var loc=node&&node.loc,line=void 0,column=void 0;loc&&(line=loc.start.line,column=loc.start.column,message+=" - "+line+":"+column);for(var tmp=Error.prototype.constructor.call(this,message),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];Error.captureStackTrace&&Error.captureStackTrace(this,Exception);try{loc&&(this.lineNumber=line,_Object$defineProperty?Object.defineProperty(this,"column",{value:column,enumerable:!0}):this.column=column)}catch(nop){}}var _Object$defineProperty=__webpack_require__(7).default;exports.__esModule=!0;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Exception.prototype=new Error,exports.default=Exception,module.exports=exports.default},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(8),__esModule:!0}},function(module,exports,__webpack_require__){var $=__webpack_require__(9);module.exports=function(it,key,desc){return $.setDesc(it,key,desc)}},function(module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},function(module,exports,__webpack_require__){function registerDefaultHelpers(instance){_helpersBlockHelperMissing2.default(instance),_helpersEach2.default(instance),_helpersHelperMissing2.default(instance),_helpersIf2.default(instance),_helpersLog2.default(instance),_helpersLookup2.default(instance),_helpersWith2.default(instance)}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.registerDefaultHelpers=registerDefaultHelpers;var _helpersBlockHelperMissing=__webpack_require__(11),_helpersBlockHelperMissing2=_interopRequireDefault(_helpersBlockHelperMissing),_helpersEach=__webpack_require__(12),_helpersEach2=_interopRequireDefault(_helpersEach),_helpersHelperMissing=__webpack_require__(13),_helpersHelperMissing2=_interopRequireDefault(_helpersHelperMissing),_helpersIf=__webpack_require__(14),_helpersIf2=_interopRequireDefault(_helpersIf),_helpersLog=__webpack_require__(15),_helpersLog2=_interopRequireDefault(_helpersLog),_helpersLookup=__webpack_require__(16),_helpersLookup2=_interopRequireDefault(_helpersLookup),_helpersWith=__webpack_require__(17),_helpersWith2=_interopRequireDefault(_helpersWith)},function(module,exports,__webpack_require__){exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;if(!0===context)return fn(this);if(!1===context||null==context)return inverse(this);if(_utils.isArray(context))return context.length>0?(options.ids&&(options.ids=[options.name]),instance.helpers.each(context,options)):inverse(this);if(options.data&&options.ids){var data=_utils.createFrame(options.data);data.contextPath=_utils.appendContextPath(options.data.contextPath,options.name),options={data:data}}return fn(context,options)})},module.exports=exports.default},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _utils=__webpack_require__(5),_exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception);exports.default=function(instance){instance.registerHelper("each",function(context,options){function execIteration(field,index,last){data&&(data.key=field,data.index=index,data.first=0===index,data.last=!!last,contextPath&&(data.contextPath=contextPath+field)),ret+=fn(context[field],{data:data,blockParams:_utils.blockParams([context[field],field],[contextPath+field,null])})}if(!options)throw new _exception2.default("Must pass iterator to #each");var fn=options.fn,inverse=options.inverse,i=0,ret="",data=void 0,contextPath=void 0;if(options.data&&options.ids&&(contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])+"."),_utils.isFunction(context)&&(context=context.call(this)),options.data&&(data=_utils.createFrame(options.data)),context&&"object"==typeof context)if(_utils.isArray(context))for(var j=context.length;i<j;i++)i in context&&execIteration(i,i,i===context.length-1);else{var priorKey=void 0;for(var key in context)context.hasOwnProperty(key)&&(void 0!==priorKey&&execIteration(priorKey,i-1),priorKey=key,i++);void 0!==priorKey&&execIteration(priorKey,i-1,!0)}return 0===i&&(ret=inverse(this)),ret})},module.exports=exports.default},function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception);exports.default=function(instance){instance.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new _exception2.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},module.exports=exports.default},function(module,exports,__webpack_require__){exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerHelper("if",function(conditional,options){return _utils.isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||_utils.isEmpty(conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers.if.call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})})},module.exports=exports.default},function(module,exports){exports.__esModule=!0,exports.default=function(instance){instance.registerHelper("log",function(){for(var args=[void 0],options=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)args.push(arguments[i]);var level=1;null!=options.hash.level?level=options.hash.level:options.data&&null!=options.data.level&&(level=options.data.level),args[0]=level,instance.log.apply(instance,args)})},module.exports=exports.default},function(module,exports){exports.__esModule=!0,exports.default=function(instance){instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})},module.exports=exports.default},function(module,exports,__webpack_require__){exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerHelper("with",function(context,options){_utils.isFunction(context)&&(context=context.call(this));var fn=options.fn;if(_utils.isEmpty(context))return options.inverse(this);var data=options.data;return options.data&&options.ids&&(data=_utils.createFrame(options.data),data.contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])),fn(context,{data:data,blockParams:_utils.blockParams([context],[data&&data.contextPath])})})},module.exports=exports.default},function(module,exports,__webpack_require__){function registerDefaultDecorators(instance){_decoratorsInline2.default(instance)}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.registerDefaultDecorators=registerDefaultDecorators;var _decoratorsInline=__webpack_require__(19),_decoratorsInline2=_interopRequireDefault(_decoratorsInline)},function(module,exports,__webpack_require__){exports.__esModule=!0;var _utils=__webpack_require__(5);exports.default=function(instance){instance.registerDecorator("inline",function(fn,props,container,options){var ret=fn;return props.partials||(props.partials={},ret=function(context,options){var original=container.partials;container.partials=_utils.extend({},original,props.partials);var ret=fn(context,options);return container.partials=original,ret}),props.partials[options.args[0]]=options.fn,ret})},module.exports=exports.default},function(module,exports,__webpack_require__){exports.__esModule=!0;var _utils=__webpack_require__(5),logger={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(level){if("string"==typeof level){var levelMap=_utils.indexOf(logger.methodMap,level.toLowerCase());level=levelMap>=0?levelMap:parseInt(level,10)}return level},log:function(level){if(level=logger.lookupLevel(level),"undefined"!=typeof console&&logger.lookupLevel(logger.level)<=level){var method=logger.methodMap[level];console[method]||(method="log");for(var _len=arguments.length,message=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)message[_key-1]=arguments[_key];console[method].apply(console,message)}}};exports.default=logger,module.exports=exports.default},function(module,exports){function SafeString(string){this.string=string}exports.__esModule=!0,SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string},exports.default=SafeString,module.exports=exports.default},function(module,exports,__webpack_require__){function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=_base.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=_base.REVISION_CHANGES[currentRevision],compilerVersions=_base.REVISION_CHANGES[compilerRevision];throw new _exception2.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new _exception2.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}}function template(templateSpec,env){function invokePartialWrapper(partial,context,options){options.hash&&(context=Utils.extend({},context,options.hash),options.ids&&(options.ids[0]=!0)),partial=env.VM.resolvePartial.call(this,partial,context,options);var result=env.VM.invokePartial.call(this,partial,context,options);if(null==result&&env.compile&&(options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env),result=options.partials[options.name](context,options)),null!=result){if(options.indent){for(var lines=result.split("\n"),i=0,l=lines.length;i<l&&(lines[i]||i+1!==l);i++)lines[i]=options.indent+lines[i];result=lines.join("\n")}return result}throw new _exception2.default("The partial "+options.name+" could not be compiled when running in runtime-only mode")}function ret(context){function main(context){return""+templateSpec.main(container,context,container.helpers,container.partials,data,blockParams,depths)}var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],data=options.data;ret._setup(options),!options.partial&&templateSpec.useData&&(data=initData(context,data));var depths=void 0,blockParams=templateSpec.useBlockParams?[]:void 0;return templateSpec.useDepths&&(depths=options.depths?context!=options.depths[0]?[context].concat(options.depths):options.depths:[context]),(main=executeDecorators(templateSpec.main,main,container,options.depths||[],data,blockParams))(context,options)}if(!env)throw new _exception2.default("No environment passed to template");if(!templateSpec||!templateSpec.main)throw new _exception2.default("Unknown template object: "+typeof templateSpec);templateSpec.main.decorator=templateSpec.main_d,env.VM.checkRevision(templateSpec.compiler);var container={strict:function(obj,name){if(!(name in obj))throw new _exception2.default('"'+name+'" not defined in '+obj);return obj[name]},lookup:function(depths,name){for(var len=depths.length,i=0;i<len;i++)if(depths[i]&&null!=depths[i][name])return depths[i][name]},lambda:function(current,context){return"function"==typeof current?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function(i){var ret=templateSpec[i];return ret.decorator=templateSpec[i+"_d"],ret},programs:[],program:function(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);return data||depths||blockParams||declaredBlockParams?programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths):programWrapper||(programWrapper=this.programs[i]=wrapProgram(this,i,fn)),programWrapper},data:function(value,depth){for(;value&&depth--;)value=value._parent;return value},merge:function(param,common){var obj=param||common;return param&&common&&param!==common&&(obj=Utils.extend({},common,param)),obj},nullContext:_Object$seal({}),noop:env.VM.noop,compilerInfo:templateSpec.compiler};return ret.isTop=!0,ret._setup=function(options){options.partial?(container.helpers=options.helpers,container.partials=options.partials,container.decorators=options.decorators):(container.helpers=container.merge(options.helpers,env.helpers),templateSpec.usePartial&&(container.partials=container.merge(options.partials,env.partials)),(templateSpec.usePartial||templateSpec.useDecorators)&&(container.decorators=container.merge(options.decorators,env.decorators)))},ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams)throw new _exception2.default("must pass block params");if(templateSpec.useDepths&&!depths)throw new _exception2.default("must pass parent depths");return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths)},ret}function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],currentDepths=depths;return!depths||context==depths[0]||context===container.nullContext&&null===depths[0]||(currentDepths=[context].concat(depths)),fn(container,context,container.helpers,container.partials,options.data||data,blockParams&&[options.blockParams].concat(blockParams),currentDepths)}return prog=executeDecorators(fn,prog,container,depths,data,blockParams),prog.program=i,prog.depth=depths?depths.length:0,prog.blockParams=declaredBlockParams||0,prog}function resolvePartial(partial,context,options){return partial?partial.call||options.name||(options.name=partial,partial=options.partials[partial]):partial="@partial-block"===options.name?options.data["partial-block"]:options.partials[options.name],partial}function invokePartial(partial,context,options){var currentPartialBlock=options.data&&options.data["partial-block"];options.partial=!0,options.ids&&(options.data.contextPath=options.ids[0]||options.data.contextPath);var partialBlock=void 0;if(options.fn&&options.fn!==noop&&function(){options.data=_base.createFrame(options.data);var fn=options.fn;partialBlock=options.data["partial-block"]=function(context){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return options.data=_base.createFrame(options.data),options.data["partial-block"]=currentPartialBlock,fn(context,options)},fn.partials&&(options.partials=Utils.extend({},options.partials,fn.partials))}(),void 0===partial&&partialBlock&&(partial=partialBlock),void 0===partial)throw new _exception2.default("The partial "+options.name+" could not be found");if(partial instanceof Function)return partial(context,options)}function noop(){return""}function initData(context,data){return data&&"root"in data||(data=data?_base.createFrame(data):{},data.root=context),data}function executeDecorators(fn,prog,container,depths,data,blockParams){if(fn.decorator){var props={};prog=fn.decorator(prog,props,container,depths&&depths[0],data,blockParams,depths),Utils.extend(prog,props)}return prog}var _Object$seal=__webpack_require__(23).default,_interopRequireWildcard=__webpack_require__(3).default,_interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.checkRevision=checkRevision,exports.template=template,exports.wrapProgram=wrapProgram,exports.resolvePartial=resolvePartial,exports.invokePartial=invokePartial,exports.noop=noop;var _utils=__webpack_require__(5),Utils=_interopRequireWildcard(_utils),_exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception),_base=__webpack_require__(4)},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(24),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(25),module.exports=__webpack_require__(30).Object.seal},function(module,exports,__webpack_require__){var isObject=__webpack_require__(26);__webpack_require__(27)("seal",function($seal){return function(it){return $seal&&isObject(it)?$seal(it):it}})},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){var $export=__webpack_require__(28),core=__webpack_require__(30),fails=__webpack_require__(33);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},function(module,exports,__webpack_require__){var global=__webpack_require__(29),core=__webpack_require__(30),ctx=__webpack_require__(31),$export=function(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{}).prototype;IS_GLOBAL&&(source=name);for(key in source)(own=!IS_FORCED&&target&&key in target)&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(param){return this instanceof C?new C(param):C(param)};return F.prototype=C.prototype,F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.prototype||(exports.prototype={}))[key]=out))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,module.exports=$export},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){var core=module.exports={version:"1.2.6"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(32);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports){(function(global){exports.__esModule=!0,exports.default=function(Handlebars){var root=void 0!==global?global:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){return root.Handlebars===Handlebars&&(root.Handlebars=$Handlebars),Handlebars}},module.exports=exports.default}).call(exports,function(){return this}())},function(module,exports){exports.__esModule=!0;var AST={helpers:{helperExpression:function(node){return"SubExpression"===node.type||("MustacheStatement"===node.type||"BlockStatement"===node.type)&&!!(node.params&&node.params.length||node.hash)},scopedId:function(path){return/^\.|this\b/.test(path.original)},simpleId:function(path){return 1===path.parts.length&&!AST.helpers.scopedId(path)&&!path.depth}}};exports.default=AST,module.exports=exports.default},function(module,exports,__webpack_require__){function parse(input,options){return"Program"===input.type?input:(_parser2.default.yy=yy,yy.locInfo=function(locInfo){return new yy.SourceLocation(options&&options.srcName,locInfo)},new _whitespaceControl2.default(options).accept(_parser2.default.parse(input)))}var _interopRequireDefault=__webpack_require__(1).default,_interopRequireWildcard=__webpack_require__(3).default;exports.__esModule=!0,exports.parse=parse;var _parser=__webpack_require__(37),_parser2=_interopRequireDefault(_parser),_whitespaceControl=__webpack_require__(38),_whitespaceControl2=_interopRequireDefault(_whitespaceControl),_helpers=__webpack_require__(40),Helpers=_interopRequireWildcard(_helpers),_utils=__webpack_require__(5);exports.parser=_parser2.default;var yy={};_utils.extend(yy,Helpers)
},function(module,exports){exports.__esModule=!0;var handlebars=function(){function Parser(){this.yy={}}var parser={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:this.$=yy.prepareProgram($$[$0]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=$$[$0];break;case 9:this.$={type:"CommentStatement",value:yy.stripComment($$[$0]),strip:yy.stripFlags($$[$0],$$[$0]),loc:yy.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:$$[$0],value:$$[$0],loc:yy.locInfo(this._$)};break;case 11:this.$=yy.prepareRawBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 12:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1]};break;case 13:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!1,this._$);break;case 14:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!0,this._$);break;case 15:this.$={open:$$[$0-5],path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 16:case 17:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 18:this.$={strip:yy.stripFlags($$[$0-1],$$[$0-1]),program:$$[$0]};break;case 19:var inverse=yy.prepareBlock($$[$0-2],$$[$0-1],$$[$0],$$[$0],!1,this._$),program=yy.prepareProgram([inverse],$$[$0-1].loc);program.chained=!0,this.$={strip:$$[$0-2].strip,program:program,chain:!0};break;case 20:this.$=$$[$0];break;case 21:this.$={path:$$[$0-1],strip:yy.stripFlags($$[$0-2],$$[$0])};break;case 22:case 23:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 24:this.$={type:"PartialStatement",name:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],indent:"",strip:yy.stripFlags($$[$0-4],$$[$0]),loc:yy.locInfo(this._$)};break;case 25:this.$=yy.preparePartialBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 26:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],strip:yy.stripFlags($$[$0-4],$$[$0])};break;case 27:case 28:this.$=$$[$0];break;case 29:this.$={type:"SubExpression",path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],loc:yy.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:$$[$0],loc:yy.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:yy.id($$[$0-2]),value:$$[$0],loc:yy.locInfo(this._$)};break;case 32:this.$=yy.id($$[$0-1]);break;case 33:case 34:this.$=$$[$0];break;case 35:this.$={type:"StringLiteral",value:$$[$0],original:$$[$0],loc:yy.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number($$[$0]),original:Number($$[$0]),loc:yy.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===$$[$0],original:"true"===$$[$0],loc:yy.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:yy.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:yy.locInfo(this._$)};break;case 40:case 41:this.$=$$[$0];break;case 42:this.$=yy.preparePath(!0,$$[$0],this._$);break;case 43:this.$=yy.preparePath(!1,$$[$0],this._$);break;case 44:$$[$0-2].push({part:yy.id($$[$0]),original:$$[$0],separator:$$[$0-1]}),this.$=$$[$0-2];break;case 45:this.$=[{part:yy.id($$[$0]),original:$$[$0]}];break;case 46:this.$=[];break;case 47:$$[$0-1].push($$[$0]);break;case 48:this.$=[$$[$0]];break;case 49:$$[$0-1].push($$[$0]);break;case 50:this.$=[];break;case 51:$$[$0-1].push($$[$0]);break;case 58:this.$=[];break;case 59:$$[$0-1].push($$[$0]);break;case 64:this.$=[];break;case 65:$$[$0-1].push($$[$0]);break;case 70:this.$=[];break;case 71:$$[$0-1].push($$[$0]);break;case 78:this.$=[];break;case 79:$$[$0-1].push($$[$0]);break;case 82:this.$=[];break;case 83:$$[$0-1].push($$[$0]);break;case 86:this.$=[];break;case 87:$$[$0-1].push($$[$0]);break;case 90:this.$=[];break;case 91:$$[$0-1].push($$[$0]);break;case 94:this.$=[];break;case 95:$$[$0-1].push($$[$0]);break;case 98:this.$=[$$[$0]];break;case 99:$$[$0-1].push($$[$0]);break;case 100:this.$=[$$[$0]];break;case 101:$$[$0-1].push($$[$0])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(str,hash){throw new Error(str)},parse:function(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var symbol,preErrorSymbol,state,action,r,p,len,newState,expected,yyval={};;){if(state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:(null!==symbol&&void 0!==symbol||(symbol=function(){var token;return token=self.lexer.lex()||1,"number"!=typeof token&&(token=self.symbols_[token]||token),token}()),action=table[state]&&table[state][symbol]),void 0===action||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])this.terminals_[p]&&p>2&&expected.push("'"+this.terminals_[p]+"'");errStr=this.lexer.showPosition?"Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),void 0!==(r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack)))return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer=function(){var lexer={EOF:1,parseError:function(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ch=this._input[0];return this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch,ch.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len-1),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var token,match,tempMatch,index,lines;this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i=0;i<rules.length&&(!(tempMatch=this._input.match(this.rules[rules[i]]))||match&&!(tempMatch[0].length>match[0].length)||(match=tempMatch,index=i,this.options.flex));i++);return match?(lines=match[0].match(/(?:\r\n?|\n).*/g),lines&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return void 0!==r?r:this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(condition){this.begin(condition)}};return lexer.options={},lexer.performAction=function(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}switch($avoiding_name_collisions){case 0:if("\\\\"===yy_.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===yy_.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),yy_.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(yy_.yytext=yy_.yytext.substr(5,yy_.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(yy_.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return yy_.yytext=strip(1,2).replace(/\\"/g,'"'),80;case 32:return yy_.yytext=strip(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return yy_.yytext=yy_.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],lexer.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},lexer}();return parser.lexer=lexer,Parser.prototype=parser,parser.Parser=Parser,new Parser}();exports.default=handlebars,module.exports=exports.default},function(module,exports,__webpack_require__){function WhitespaceControl(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=options}function isPrevWhitespace(body,i,isRoot){void 0===i&&(i=body.length);var prev=body[i-1],sibling=body[i-2];return prev?"ContentStatement"===prev.type?(sibling||!isRoot?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(prev.original):void 0:isRoot}function isNextWhitespace(body,i,isRoot){void 0===i&&(i=-1);var next=body[i+1],sibling=body[i+2];return next?"ContentStatement"===next.type?(sibling||!isRoot?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(next.original):void 0:isRoot}function omitRight(body,i,multiple){var current=body[null==i?0:i+1];if(current&&"ContentStatement"===current.type&&(multiple||!current.rightStripped)){var original=current.value;current.value=current.value.replace(multiple?/^\s+/:/^[ \t]*\r?\n?/,""),current.rightStripped=current.value!==original}}function omitLeft(body,i,multiple){var current=body[null==i?body.length-1:i-1];if(current&&"ContentStatement"===current.type&&(multiple||!current.leftStripped)){var original=current.value;return current.value=current.value.replace(multiple?/\s+$/:/[ \t]+$/,""),current.leftStripped=current.value!==original,current.leftStripped}}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _visitor=__webpack_require__(39),_visitor2=_interopRequireDefault(_visitor);WhitespaceControl.prototype=new _visitor2.default,WhitespaceControl.prototype.Program=function(program){var doStandalone=!this.options.ignoreStandalone,isRoot=!this.isRootSeen;this.isRootSeen=!0;for(var body=program.body,i=0,l=body.length;i<l;i++){var current=body[i],strip=this.accept(current);if(strip){var _isPrevWhitespace=isPrevWhitespace(body,i,isRoot),_isNextWhitespace=isNextWhitespace(body,i,isRoot),openStandalone=strip.openStandalone&&_isPrevWhitespace,closeStandalone=strip.closeStandalone&&_isNextWhitespace,inlineStandalone=strip.inlineStandalone&&_isPrevWhitespace&&_isNextWhitespace;strip.close&&omitRight(body,i,!0),strip.open&&omitLeft(body,i,!0),doStandalone&&inlineStandalone&&(omitRight(body,i),omitLeft(body,i)&&"PartialStatement"===current.type&&(current.indent=/([ \t]+$)/.exec(body[i-1].original)[1])),doStandalone&&openStandalone&&(omitRight((current.program||current.inverse).body),omitLeft(body,i)),doStandalone&&closeStandalone&&(omitRight(body,i),omitLeft((current.inverse||current.program).body))}}return program},WhitespaceControl.prototype.BlockStatement=WhitespaceControl.prototype.DecoratorBlock=WhitespaceControl.prototype.PartialBlockStatement=function(block){this.accept(block.program),this.accept(block.inverse);var program=block.program||block.inverse,inverse=block.program&&block.inverse,firstInverse=inverse,lastInverse=inverse;if(inverse&&inverse.chained)for(firstInverse=inverse.body[0].program;lastInverse.chained;)lastInverse=lastInverse.body[lastInverse.body.length-1].program;var strip={open:block.openStrip.open,close:block.closeStrip.close,openStandalone:isNextWhitespace(program.body),closeStandalone:isPrevWhitespace((firstInverse||program).body)};if(block.openStrip.close&&omitRight(program.body,null,!0),inverse){var inverseStrip=block.inverseStrip;inverseStrip.open&&omitLeft(program.body,null,!0),inverseStrip.close&&omitRight(firstInverse.body,null,!0),block.closeStrip.open&&omitLeft(lastInverse.body,null,!0),!this.options.ignoreStandalone&&isPrevWhitespace(program.body)&&isNextWhitespace(firstInverse.body)&&(omitLeft(program.body),omitRight(firstInverse.body))}else block.closeStrip.open&&omitLeft(program.body,null,!0);return strip},WhitespaceControl.prototype.Decorator=WhitespaceControl.prototype.MustacheStatement=function(mustache){return mustache.strip},WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(node){var strip=node.strip||{};return{inlineStandalone:!0,open:strip.open,close:strip.close}},exports.default=WhitespaceControl,module.exports=exports.default},function(module,exports,__webpack_require__){function Visitor(){this.parents=[]}function visitSubExpression(mustache){
this.acceptRequired(mustache,"path"),this.acceptArray(mustache.params),this.acceptKey(mustache,"hash")}function visitBlock(block){visitSubExpression.call(this,block),this.acceptKey(block,"program"),this.acceptKey(block,"inverse")}function visitPartial(partial){this.acceptRequired(partial,"name"),this.acceptArray(partial.params),this.acceptKey(partial,"hash")}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception);Visitor.prototype={constructor:Visitor,mutating:!1,acceptKey:function(node,name){var value=this.accept(node[name]);if(this.mutating){if(value&&!Visitor.prototype[value.type])throw new _exception2.default('Unexpected node type "'+value.type+'" found when accepting '+name+" on "+node.type);node[name]=value}},acceptRequired:function(node,name){if(this.acceptKey(node,name),!node[name])throw new _exception2.default(node.type+" requires "+name)},acceptArray:function(array){for(var i=0,l=array.length;i<l;i++)this.acceptKey(array,i),array[i]||(array.splice(i,1),i--,l--)},accept:function(object){if(object){if(!this[object.type])throw new _exception2.default("Unknown type: "+object.type,object);this.current&&this.parents.unshift(this.current),this.current=object;var ret=this[object.type](object);return this.current=this.parents.shift(),!this.mutating||ret?ret:!1!==ret?object:void 0}},Program:function(program){this.acceptArray(program.body)},MustacheStatement:visitSubExpression,Decorator:visitSubExpression,BlockStatement:visitBlock,DecoratorBlock:visitBlock,PartialStatement:visitPartial,PartialBlockStatement:function(partial){visitPartial.call(this,partial),this.acceptKey(partial,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:visitSubExpression,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(hash){this.acceptArray(hash.pairs)},HashPair:function(pair){this.acceptRequired(pair,"value")}},exports.default=Visitor,module.exports=exports.default},function(module,exports,__webpack_require__){function validateClose(open,close){if(close=close.path?close.path.original:close,open.path.original!==close){var errorNode={loc:open.path.loc};throw new _exception2.default(open.path.original+" doesn't match "+close,errorNode)}}function SourceLocation(source,locInfo){this.source=source,this.start={line:locInfo.first_line,column:locInfo.first_column},this.end={line:locInfo.last_line,column:locInfo.last_column}}function id(token){return/^\[.*\]$/.test(token)?token.substr(1,token.length-2):token}function stripFlags(open,close){return{open:"~"===open.charAt(2),close:"~"===close.charAt(close.length-3)}}function stripComment(comment){return comment.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function preparePath(data,parts,loc){loc=this.locInfo(loc);for(var original=data?"@":"",dig=[],depth=0,depthString="",i=0,l=parts.length;i<l;i++){var part=parts[i].part,isLiteral=parts[i].original!==part;if(original+=(parts[i].separator||"")+part,isLiteral||".."!==part&&"."!==part&&"this"!==part)dig.push(part);else{if(dig.length>0)throw new _exception2.default("Invalid path: "+original,{loc:loc});".."===part&&(depth++,depthString+="../")}}return{type:"PathExpression",data:data,depth:depth,parts:dig,original:original,loc:loc}}function prepareMustache(path,params,hash,open,strip,locInfo){var escapeFlag=open.charAt(3)||open.charAt(2),escaped="{"!==escapeFlag&&"&"!==escapeFlag;return{type:/\*/.test(open)?"Decorator":"MustacheStatement",path:path,params:params,hash:hash,escaped:escaped,strip:strip,loc:this.locInfo(locInfo)}}function prepareRawBlock(openRawBlock,contents,close,locInfo){validateClose(openRawBlock,close),locInfo=this.locInfo(locInfo);var program={type:"Program",body:contents,strip:{},loc:locInfo};return{type:"BlockStatement",path:openRawBlock.path,params:openRawBlock.params,hash:openRawBlock.hash,program:program,openStrip:{},inverseStrip:{},closeStrip:{},loc:locInfo}}function prepareBlock(openBlock,program,inverseAndProgram,close,inverted,locInfo){close&&close.path&&validateClose(openBlock,close);var decorator=/\*/.test(openBlock.open);program.blockParams=openBlock.blockParams;var inverse=void 0,inverseStrip=void 0;if(inverseAndProgram){if(decorator)throw new _exception2.default("Unexpected inverse block on decorator",inverseAndProgram);inverseAndProgram.chain&&(inverseAndProgram.program.body[0].closeStrip=close.strip),inverseStrip=inverseAndProgram.strip,inverse=inverseAndProgram.program}return inverted&&(inverted=inverse,inverse=program,program=inverted),{type:decorator?"DecoratorBlock":"BlockStatement",path:openBlock.path,params:openBlock.params,hash:openBlock.hash,program:program,inverse:inverse,openStrip:openBlock.strip,inverseStrip:inverseStrip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}function prepareProgram(statements,loc){if(!loc&&statements.length){var firstLoc=statements[0].loc,lastLoc=statements[statements.length-1].loc;firstLoc&&lastLoc&&(loc={source:firstLoc.source,start:{line:firstLoc.start.line,column:firstLoc.start.column},end:{line:lastLoc.end.line,column:lastLoc.end.column}})}return{type:"Program",body:statements,strip:{},loc:loc}}function preparePartialBlock(open,program,close,locInfo){return validateClose(open,close),{type:"PartialBlockStatement",name:open.path,params:open.params,hash:open.hash,program:program,openStrip:open.strip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.SourceLocation=SourceLocation,exports.id=id,exports.stripFlags=stripFlags,exports.stripComment=stripComment,exports.preparePath=preparePath,exports.prepareMustache=prepareMustache,exports.prepareRawBlock=prepareRawBlock,exports.prepareBlock=prepareBlock,exports.prepareProgram=prepareProgram,exports.preparePartialBlock=preparePartialBlock;var _exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception)},function(module,exports,__webpack_require__){function Compiler(){}function precompile(input,options,env){if(null==input||"string"!=typeof input&&"Program"!==input.type)throw new _exception2.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);options=options||{},"data"in options||(options.data=!0),options.compat&&(options.useDepths=!0);var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}function compile(input,options,env){function compileInput(){var ast=env.parse(input,options),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,void 0,!0);return env.template(templateSpec)}function ret(context,execOptions){return compiled||(compiled=compileInput()),compiled.call(this,context,execOptions)}if(void 0===options&&(options={}),null==input||"string"!=typeof input&&"Program"!==input.type)throw new _exception2.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);options=_utils.extend({},options),"data"in options||(options.data=!0),options.compat&&(options.useDepths=!0);var compiled=void 0;return ret._setup=function(setupOptions){return compiled||(compiled=compileInput()),compiled._setup(setupOptions)},ret._child=function(i,data,blockParams,depths){return compiled||(compiled=compileInput()),compiled._child(i,data,blockParams,depths)},ret}function argEquals(a,b){if(a===b)return!0;if(_utils.isArray(a)&&_utils.isArray(b)&&a.length===b.length){for(var i=0;i<a.length;i++)if(!argEquals(a[i],b[i]))return!1;return!0}}function transformLiteralToPath(sexpr){if(!sexpr.path.parts){var literal=sexpr.path;sexpr.path={type:"PathExpression",data:!1,depth:0,parts:[literal.original+""],original:literal.original+"",loc:literal.loc}}}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0,exports.Compiler=Compiler,exports.precompile=precompile,exports.compile=compile;var _exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception),_utils=__webpack_require__(5),_ast=__webpack_require__(35),_ast2=_interopRequireDefault(_ast),slice=[].slice;Compiler.prototype={compiler:Compiler,equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return!1;for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||!argEquals(opcode.args,otherOpcode.args))return!1}len=this.children.length;for(var i=0;i<len;i++)if(!this.children[i].equals(other.children[i]))return!1;return!0},guid:0,compile:function(program,options){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=options,this.stringParams=options.stringParams,this.trackIds=options.trackIds,options.blockParams=options.blockParams||[];var knownHelpers=options.knownHelpers;if(options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},knownHelpers)for(var _name in knownHelpers)_name in knownHelpers&&(this.options.knownHelpers[_name]=knownHelpers[_name]);return this.accept(program)},compileProgram:function(program){var childCompiler=new this.compiler,result=childCompiler.compile(program,this.options),guid=this.guid++;return this.usePartial=this.usePartial||result.usePartial,this.children[guid]=result,this.useDepths=this.useDepths||result.useDepths,guid},accept:function(node){if(!this[node.type])throw new _exception2.default("Unknown type: "+node.type,node);this.sourceNode.unshift(node);var ret=this[node.type](node);return this.sourceNode.shift(),ret},Program:function(program){this.options.blockParams.unshift(program.blockParams);for(var body=program.body,bodyLength=body.length,i=0;i<bodyLength;i++)this.accept(body[i]);return this.options.blockParams.shift(),this.isSimple=1===bodyLength,this.blockParams=program.blockParams?program.blockParams.length:0,this},BlockStatement:function(block){transformLiteralToPath(block);var program=block.program,inverse=block.inverse;program=program&&this.compileProgram(program),inverse=inverse&&this.compileProgram(inverse);var type=this.classifySexpr(block);"helper"===type?this.helperSexpr(block,program,inverse):"simple"===type?(this.simpleSexpr(block),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("blockValue",block.path.original)):(this.ambiguousSexpr(block,program,inverse),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(decorator){var program=decorator.program&&this.compileProgram(decorator.program),params=this.setupFullMustacheParams(decorator,program,void 0),path=decorator.path;this.useDecorators=!0,this.opcode("registerDecorator",params.length,path.original)},PartialStatement:function(partial){this.usePartial=!0;var program=partial.program;program&&(program=this.compileProgram(partial.program));var params=partial.params;if(params.length>1)throw new _exception2.default("Unsupported number of partial arguments: "+params.length,partial);params.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):params.push({type:"PathExpression",parts:[],depth:0}));var partialName=partial.name.original,isDynamic="SubExpression"===partial.name.type;isDynamic&&this.accept(partial.name),this.setupFullMustacheParams(partial,program,void 0,!0);var indent=partial.indent||"";this.options.preventIndent&&indent&&(this.opcode("appendContent",indent),indent=""),this.opcode("invokePartial",isDynamic,partialName,indent),this.opcode("append")},PartialBlockStatement:function(partialBlock){this.PartialStatement(partialBlock)},MustacheStatement:function(mustache){this.SubExpression(mustache),mustache.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(decorator){this.DecoratorBlock(decorator)},ContentStatement:function(content){content.value&&this.opcode("appendContent",content.value)},CommentStatement:function(){},SubExpression:function(sexpr){transformLiteralToPath(sexpr);var type=this.classifySexpr(sexpr);"simple"===type?this.simpleSexpr(sexpr):"helper"===type?this.helperSexpr(sexpr):this.ambiguousSexpr(sexpr)},ambiguousSexpr:function(sexpr,program,inverse){var path=sexpr.path,name=path.parts[0],isBlock=null!=program||null!=inverse;this.opcode("getContext",path.depth),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),path.strict=!0,this.accept(path),this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var path=sexpr.path;path.strict=!0,this.accept(path),this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),path=sexpr.path,name=path.parts[0];if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else{if(this.options.knownHelpersOnly)throw new _exception2.default("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);path.strict=!0,path.falsy=!0,this.accept(path),this.opcode("invokeHelper",params.length,path.original,_ast2.default.helpers.simpleId(path))}},PathExpression:function(path){this.addDepth(path.depth),this.opcode("getContext",path.depth);var name=path.parts[0],scoped=_ast2.default.helpers.scopedId(path),blockParamId=!path.depth&&!scoped&&this.blockParamIndex(name);blockParamId?this.opcode("lookupBlockParam",blockParamId,path.parts):name?path.data?(this.options.data=!0,this.opcode("lookupData",path.depth,path.parts,path.strict)):this.opcode("lookupOnContext",path.parts,path.falsy,path.strict,scoped):this.opcode("pushContext")},StringLiteral:function(string){this.opcode("pushString",string.value)},NumberLiteral:function(number){this.opcode("pushLiteral",number.value)},BooleanLiteral:function(bool){this.opcode("pushLiteral",bool.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(hash){var pairs=hash.pairs,i=0,l=pairs.length;for(this.opcode("pushHash");i<l;i++)this.pushParam(pairs[i].value);for(;i--;)this.opcode("assignToHash",pairs[i].key);this.opcode("popHash")},opcode:function(name){this.opcodes.push({opcode:name,args:slice.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(depth){depth&&(this.useDepths=!0)},classifySexpr:function(sexpr){var isSimple=_ast2.default.helpers.simpleId(sexpr.path),isBlockParam=isSimple&&!!this.blockParamIndex(sexpr.path.parts[0]),isHelper=!isBlockParam&&_ast2.default.helpers.helperExpression(sexpr),isEligible=!isBlockParam&&(isHelper||isSimple);if(isEligible&&!isHelper){var _name2=sexpr.path.parts[0],options=this.options;options.knownHelpers[_name2]?isHelper=!0:options.knownHelpersOnly&&(isEligible=!1)}return isHelper?"helper":isEligible?"ambiguous":"simple"},pushParams:function(params){for(var i=0,l=params.length;i<l;i++)this.pushParam(params[i])},pushParam:function(val){var value=null!=val.value?val.value:val.original||"";if(this.stringParams)value.replace&&(value=value.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),val.depth&&this.addDepth(val.depth),this.opcode("getContext",val.depth||0),this.opcode("pushStringParam",value,val.type),"SubExpression"===val.type&&this.accept(val);else{if(this.trackIds){var blockParamIndex=void 0;if(!val.parts||_ast2.default.helpers.scopedId(val)||val.depth||(blockParamIndex=this.blockParamIndex(val.parts[0])),blockParamIndex){var blockParamChild=val.parts.slice(1).join(".");this.opcode("pushId","BlockParam",blockParamIndex,blockParamChild)}else value=val.original||value,value.replace&&(value=value.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",val.type,value)}this.accept(val)}},setupFullMustacheParams:function(sexpr,program,inverse,omitEmpty){var params=sexpr.params;return this.pushParams(params),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),sexpr.hash?this.accept(sexpr.hash):this.opcode("emptyHash",omitEmpty),params},blockParamIndex:function(name){for(var depth=0,len=this.options.blockParams.length;depth<len;depth++){var blockParams=this.options.blockParams[depth],param=blockParams&&_utils.indexOf(blockParams,name);if(blockParams&&param>=0)return[depth,param]}}}},function(module,exports,__webpack_require__){function Literal(value){this.value=value}function JavaScriptCompiler(){}function strictLookup(requireTerminal,compiler,parts,type){var stack=compiler.popStack(),i=0,len=parts.length;for(requireTerminal&&len--;i<len;i++)stack=compiler.nameLookup(stack,parts[i],type);return requireTerminal?[compiler.aliasable("container.strict"),"(",stack,", ",compiler.quotedString(parts[i]),")"]:stack}var _interopRequireDefault=__webpack_require__(1).default;exports.__esModule=!0;var _base=__webpack_require__(4),_exception=__webpack_require__(6),_exception2=_interopRequireDefault(_exception),_utils=__webpack_require__(5),_codeGen=__webpack_require__(43),_codeGen2=_interopRequireDefault(_codeGen);JavaScriptCompiler.prototype={nameLookup:function(parent,name){return JavaScriptCompiler.isValidJavaScriptVariableName(name)?[parent,".",name]:[parent,"[",JSON.stringify(name),"]"]},depthedLookup:function(name){return[this.aliasable("container.lookup"),'(depths, "',name,'")']},compilerInfo:function(){var revision=_base.COMPILER_REVISION;return[revision,_base.REVISION_CHANGES[revision]]},appendToBuffer:function(source,location,explicit){return _utils.isArray(source)||(source=[source]),source=this.source.wrap(source,location),this.environment.isSimple?["return ",source,";"]:explicit?["buffer += ",source,";"]:(source.appendToBuffer=!0,source)},initializeBuffer:function(){return this.quotedString("")},compile:function(environment,options,context,asObject){this.environment=environment,this.options=options,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!asObject,this.name=this.environment.name,this.isChild=!!context,this.context=context||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(environment,options),this.useDepths=this.useDepths||environment.useDepths||environment.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||environment.useBlockParams;var opcodes=environment.opcodes,opcode=void 0,firstLoc=void 0,i=void 0,l=void 0;for(i=0,l=opcodes.length;i<l;i++)opcode=opcodes[i],this.source.currentLocation=opcode.loc,firstLoc=firstLoc||opcode.loc,this[opcode.opcode].apply(this,opcode.args);if(this.source.currentLocation=firstLoc,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new _exception2.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),asObject?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var fn=this.createFunctionContext(asObject);if(this.isChild)return fn;var ret={compiler:this.compilerInfo(),main:fn};this.decorators&&(ret.main_d=this.decorators,ret.useDecorators=!0);var _context=this.context,programs=_context.programs,decorators=_context.decorators;for(i=0,l=programs.length;i<l;i++)programs[i]&&(ret[i]=programs[i],decorators[i]&&(ret[i+"_d"]=decorators[i],ret.useDecorators=!0));return this.environment.usePartial&&(ret.usePartial=!0),this.options.data&&(ret.useData=!0),this.useDepths&&(ret.useDepths=!0),this.useBlockParams&&(ret.useBlockParams=!0),this.options.compat&&(ret.compat=!0),asObject?ret.compilerOptions=this.options:(ret.compiler=JSON.stringify(ret.compiler),this.source.currentLocation={start:{line:1,column:0}},ret=this.objectLiteral(ret),options.srcName?(ret=ret.toStringWithSourceMap({file:options.destName}),ret.map=ret.map&&ret.map.toString()):ret=ret.toString()),ret},preamble:function(){this.lastContext=0,this.source=new _codeGen2.default(this.options.srcName),this.decorators=new _codeGen2.default(this.options.srcName)},createFunctionContext:function(asObject){var varDeclarations="",locals=this.stackVars.concat(this.registers.list);locals.length>0&&(varDeclarations+=", "+locals.join(", "));var aliasCount=0;for(var alias in this.aliases){var node=this.aliases[alias];this.aliases.hasOwnProperty(alias)&&node.children&&node.referenceCount>1&&(varDeclarations+=", alias"+ ++aliasCount+"="+alias,node.children[0]="alias"+aliasCount)}var params=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&params.push("blockParams"),this.useDepths&&params.push("depths");var source=this.mergeSource(varDeclarations);return asObject?(params.push(source),Function.apply(this,params)):this.source.wrap(["function(",params.join(","),") {\n  ",source,"}"])},mergeSource:function(varDeclarations){var isSimple=this.environment.isSimple,appendOnly=!this.forceBuffer,appendFirst=void 0,sourceSeen=void 0,bufferStart=void 0,bufferEnd=void 0;return this.source.each(function(line){line.appendToBuffer?(bufferStart?line.prepend("  + "):bufferStart=line,bufferEnd=line):(bufferStart&&(sourceSeen?bufferStart.prepend("buffer += "):appendFirst=!0,bufferEnd.add(";"),bufferStart=bufferEnd=void 0),sourceSeen=!0,isSimple||(appendOnly=!1))}),appendOnly?bufferStart?(bufferStart.prepend("return "),bufferEnd.add(";")):sourceSeen||this.source.push('return "";'):(varDeclarations+=", buffer = "+(appendFirst?"":this.initializeBuffer()),bufferStart?(bufferStart.prepend("return buffer + "),bufferEnd.add(";")):this.source.push("return buffer;")),varDeclarations&&this.source.prepend("var "+varDeclarations.substring(2)+(appendFirst?"":";\n")),this.source.merge()},blockValue:function(name){var blockHelperMissing=this.aliasable("helpers.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs(name,0,params);var blockName=this.popStack();params.splice(1,0,blockName),this.push(this.source.functionCall(blockHelperMissing,"call",params))},ambiguousBlockValue:function(){var blockHelperMissing=this.aliasable("helpers.blockHelperMissing"),params=[this.contextName(0)];this.setupHelperArgs("",0,params,!0),this.flushInline();var current=this.topStack();params.splice(1,0,current),this.pushSource(["if (!",this.lastHelper,") { ",current," = ",this.source.functionCall(blockHelperMissing,"call",params),"}"])},appendContent:function(content){this.pendingContent?content=this.pendingContent+content:this.pendingLocation=this.source.currentLocation,this.pendingContent=content},append:function(){if(this.isInline())this.replaceStack(function(current){return[" != null ? ",current,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var local=this.popStack();this.pushSource(["if (",local," != null) { ",this.appendToBuffer(local,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(depth){this.lastContext=depth},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(parts,falsy,strict,scoped){var i=0;scoped||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(parts[i++])),this.resolvePath("context",parts,i,falsy,strict)},lookupBlockParam:function(blockParamId,parts){this.useBlockParams=!0,this.push(["blockParams[",blockParamId[0],"][",blockParamId[1],"]"]),this.resolvePath("context",parts,1)},lookupData:function(depth,parts,strict){depth?this.pushStackLiteral("container.data(data, "+depth+")"):this.pushStackLiteral("data"),this.resolvePath("data",parts,0,!0,strict)},resolvePath:function(type,parts,i,falsy,strict){var _this=this;if(this.options.strict||this.options.assumeObjects)return void this.push(strictLookup(this.options.strict&&strict,this,parts,type));for(var len=parts.length;i<len;i++)this.replaceStack(function(current){var lookup=_this.nameLookup(current,parts[i],type);return falsy?[" && ",lookup]:[" != null ? ",lookup," : ",current]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(string,type){this.pushContext(),this.pushString(type),"SubExpression"!==type&&("string"==typeof string?this.pushString(string):this.pushStackLiteral(string))},emptyHash:function(omitEmpty){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(omitEmpty?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(hash.ids)),this.stringParams&&(this.push(this.objectLiteral(hash.contexts)),this.push(this.objectLiteral(hash.types))),this.push(this.objectLiteral(hash.values))},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){null!=guid?this.pushStackLiteral(this.programExpression(guid)):this.pushStackLiteral(null)},registerDecorator:function(paramSize,name){var foundDecorator=this.nameLookup("decorators",name,"decorator"),options=this.setupHelperArgs(name,paramSize);this.decorators.push(["fn = ",this.decorators.functionCall(foundDecorator,"",["fn","props","container",options])," || fn;"])},invokeHelper:function(paramSize,name,isSimple){var nonHelper=this.popStack(),helper=this.setupHelper(paramSize,name),simple=isSimple?[helper.name," || "]:"",lookup=["("].concat(simple,nonHelper);this.options.strict||lookup.push(" || ",this.aliasable("helpers.helperMissing")),lookup.push(")"),this.push(this.source.functionCall(lookup,"call",helper.callParams))},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(this.source.functionCall(helper.name,"call",helper.callParams))},invokeAmbiguous:function(name,helperCall){this.useRegister("helper");var nonHelper=this.popStack();this.emptyHash();var helper=this.setupHelper(0,name,helperCall),helperName=this.lastHelper=this.nameLookup("helpers",name,"helper"),lookup=["(","(helper = ",helperName," || ",nonHelper,")"];this.options.strict||(lookup[0]="(helper = ",lookup.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",lookup,helper.paramsInit?["),(",helper.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",helper.callParams)," : helper))"])},invokePartial:function(isDynamic,name,indent){var params=[],options=this.setupParams(name,1,params);isDynamic&&(name=this.popStack(),delete options.name),indent&&(options.indent=JSON.stringify(indent)),options.helpers="helpers",options.partials="partials",options.decorators="container.decorators",isDynamic?params.unshift(name):params.unshift(this.nameLookup("partials",name,"partial")),this.options.compat&&(options.depths="depths"),options=this.objectLiteral(options),params.push(options),this.push(this.source.functionCall("container.invokePartial","",params))},assignToHash:function(key){var value=this.popStack(),context=void 0,type=void 0,id=void 0;this.trackIds&&(id=this.popStack()),this.stringParams&&(type=this.popStack(),context=this.popStack());var hash=this.hash;context&&(hash.contexts[key]=context),type&&(hash.types[key]=type),id&&(hash.ids[key]=id),hash.values[key]=value},pushId:function(type,name,child){"BlockParam"===type?this.pushStackLiteral("blockParams["+name[0]+"].path["+name[1]+"]"+(child?" + "+JSON.stringify("."+child):"")):"PathExpression"===type?this.pushString(name):"SubExpression"===type?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){for(var children=environment.children,child=void 0,compiler=void 0,i=0,l=children.length;i<l;i++){child=children[i],compiler=new this.compiler;var existing=this.matchExistingProgram(child);if(null==existing){this.context.programs.push("");var index=this.context.programs.length;child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context,!this.precompile),this.context.decorators[index]=compiler.decorators,this.context.environments[index]=child,this.useDepths=this.useDepths||compiler.useDepths,this.useBlockParams=this.useBlockParams||compiler.useBlockParams,child.useDepths=this.useDepths,child.useBlockParams=this.useBlockParams}else child.index=existing.index,child.name="program"+existing.index,this.useDepths=this.useDepths||existing.useDepths,this.useBlockParams=this.useBlockParams||existing.useBlockParams}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return environment}},programExpression:function(guid){var child=this.environment.children[guid],programParams=[child.index,"data",child.blockParams];return(this.useBlockParams||this.useDepths)&&programParams.push("blockParams"),this.useDepths&&programParams.push("depths"),"container.program("+programParams.join(", ")+")"},useRegister:function(name){this.registers[name]||(this.registers[name]=!0,this.registers.list.push(name))},push:function(expr){return expr instanceof Literal||(expr=this.source.wrap(expr)),this.inlineStack.push(expr),expr},pushStackLiteral:function(item){this.push(new Literal(item))},pushSource:function(source){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),source&&this.source.push(source)},replaceStack:function(callback){var prefix=["("],stack=void 0,createdStack=void 0,usedLiteral=void 0;if(!this.isInline())throw new _exception2.default("replaceStack on non-inline");var top=this.popStack(!0);if(top instanceof Literal)stack=[top.value],prefix=["(",stack],usedLiteral=!0;else{createdStack=!0;var _name=this.incrStack();prefix=["((",this.push(_name)," = ",top,")"],stack=this.topStack()}var item=callback.call(this,stack);usedLiteral||this.popStack(),createdStack&&this.stackSlot--,this.push(prefix.concat(item,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal)this.compileStack.push(entry);else{var stack=this.incrStack();this.pushSource([stack," = ",entry,";"]),this.compileStack.push(stack)}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;if(!inline){if(!this.stackSlot)throw new _exception2.default("Invalid stack pop");this.stackSlot--}return item},topStack:function(){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];return item instanceof Literal?item.value:item},contextName:function(context){
return this.useDepths&&context?"depths["+context+"]":"depth"+context},quotedString:function(str){return this.source.quotedString(str)},objectLiteral:function(obj){return this.source.objectLiteral(obj)},aliasable:function(name){var ret=this.aliases[name];return ret?(ret.referenceCount++,ret):(ret=this.aliases[name]=this.source.wrap(name),ret.aliasable=!0,ret.referenceCount=1,ret)},setupHelper:function(paramSize,name,blockHelper){var params=[];return{params:params,paramsInit:this.setupHelperArgs(name,paramSize,params,blockHelper),name:this.nameLookup("helpers",name,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(params)}},setupParams:function(helper,paramSize,params){var options={},contexts=[],types=[],ids=[],objectArgs=!params,param=void 0;objectArgs&&(params=[]),options.name=this.quotedString(helper),options.hash=this.popStack(),this.trackIds&&(options.hashIds=this.popStack()),this.stringParams&&(options.hashTypes=this.popStack(),options.hashContexts=this.popStack());var inverse=this.popStack(),program=this.popStack();(program||inverse)&&(options.fn=program||"container.noop",options.inverse=inverse||"container.noop");for(var i=paramSize;i--;)param=this.popStack(),params[i]=param,this.trackIds&&(ids[i]=this.popStack()),this.stringParams&&(types[i]=this.popStack(),contexts[i]=this.popStack());return objectArgs&&(options.args=this.source.generateArray(params)),this.trackIds&&(options.ids=this.source.generateArray(ids)),this.stringParams&&(options.types=this.source.generateArray(types),options.contexts=this.source.generateArray(contexts)),this.options.data&&(options.data="data"),this.useBlockParams&&(options.blockParams="blockParams"),options},setupHelperArgs:function(helper,paramSize,params,useRegister){var options=this.setupParams(helper,paramSize,params);return options=this.objectLiteral(options),useRegister?(this.useRegister("options"),params.push("options"),["options=",options]):params?(params.push(options),""):options}},function(){for(var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={},i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=!0}(),JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)},exports.default=JavaScriptCompiler,module.exports=exports.default},function(module,exports,__webpack_require__){function castChunk(chunk,codeGen,loc){if(_utils.isArray(chunk)){for(var ret=[],i=0,len=chunk.length;i<len;i++)ret.push(codeGen.wrap(chunk[i],loc));return ret}return"boolean"==typeof chunk||"number"==typeof chunk?chunk+"":chunk}function CodeGen(srcFile){this.srcFile=srcFile,this.source=[]}exports.__esModule=!0;var _utils=__webpack_require__(5),SourceNode=void 0;try{}catch(err){}SourceNode||(SourceNode=function(line,column,srcFile,chunks){this.src="",chunks&&this.add(chunks)},SourceNode.prototype={add:function(chunks){_utils.isArray(chunks)&&(chunks=chunks.join("")),this.src+=chunks},prepend:function(chunks){_utils.isArray(chunks)&&(chunks=chunks.join("")),this.src=chunks+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),CodeGen.prototype={isEmpty:function(){return!this.source.length},prepend:function(source,loc){this.source.unshift(this.wrap(source,loc))},push:function(source,loc){this.source.push(this.wrap(source,loc))},merge:function(){var source=this.empty();return this.each(function(line){source.add(["  ",line,"\n"])}),source},each:function(iter){for(var i=0,len=this.source.length;i<len;i++)iter(this.source[i])},empty:function(){var loc=this.currentLocation||{start:{}};return new SourceNode(loc.start.line,loc.start.column,this.srcFile)},wrap:function(chunk){var loc=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return chunk instanceof SourceNode?chunk:(chunk=castChunk(chunk,this,loc),new SourceNode(loc.start.line,loc.start.column,this.srcFile,chunk))},functionCall:function(fn,type,params){return params=this.generateList(params),this.wrap([fn,type?"."+type+"(":"(",params,")"])},quotedString:function(str){return'"'+(str+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(obj){var pairs=[];for(var key in obj)if(obj.hasOwnProperty(key)){var value=castChunk(obj[key],this);"undefined"!==value&&pairs.push([this.quotedString(key),":",value])}var ret=this.generateList(pairs);return ret.prepend("{"),ret.add("}"),ret},generateList:function(entries){for(var ret=this.empty(),i=0,len=entries.length;i<len;i++)i&&ret.add(","),ret.add(castChunk(entries[i],this));return ret},generateArray:function(entries){var ret=this.generateList(entries);return ret.prepend("["),ret.add("]"),ret}},exports.default=CodeGen,module.exports=exports.default}])}),function(window,factory){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(jQuery){return factory(window,jQuery)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("jquery")):window.jQueryBridget=factory(window,window.jQuery)}(window,function(window,jQuery){function jQueryBridget(namespace,PluginClass,$){function methodCall($elems,methodName,args){var returnValue,pluginMethodStr="$()."+namespace+'("'+methodName+'")';return $elems.each(function(i,elem){var instance=$.data(elem,namespace);if(!instance)return void logError(namespace+" not initialized. Cannot call methods, i.e. "+pluginMethodStr);var method=instance[methodName];if(!method||"_"==methodName.charAt(0))return void logError(pluginMethodStr+" is not a valid method");var value=method.apply(instance,args);returnValue=void 0===returnValue?value:returnValue}),void 0!==returnValue?returnValue:$elems}function plainCall($elems,options){$elems.each(function(i,elem){var instance=$.data(elem,namespace);instance?(instance.option(options),instance._init()):(instance=new PluginClass(elem,options),$.data(elem,namespace,instance))})}($=$||jQuery||window.jQuery)&&(PluginClass.prototype.option||(PluginClass.prototype.option=function(opts){$.isPlainObject(opts)&&(this.options=$.extend(!0,this.options,opts))}),$.fn[namespace]=function(arg0){if("string"==typeof arg0){return methodCall(this,arg0,arraySlice.call(arguments,1))}return plainCall(this,arg0),this},updateJQuery($))}function updateJQuery($){!$||$&&$.bridget||($.bridget=jQueryBridget)}var arraySlice=Array.prototype.slice,console=window.console,logError=void 0===console?function(){}:function(message){console.error(message)};return updateJQuery(jQuery||window.jQuery),jQueryBridget}),function(global,factory){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",factory):"object"==typeof module&&module.exports?module.exports=factory():global.EvEmitter=factory()}("undefined"!=typeof window?window:this,function(){function EvEmitter(){}var proto=EvEmitter.prototype;return proto.on=function(eventName,listener){if(eventName&&listener){var events=this._events=this._events||{},listeners=events[eventName]=events[eventName]||[];return-1==listeners.indexOf(listener)&&listeners.push(listener),this}},proto.once=function(eventName,listener){if(eventName&&listener){this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};return(onceEvents[eventName]=onceEvents[eventName]||{})[listener]=!0,this}},proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(listeners&&listeners.length){var index=listeners.indexOf(listener);return-1!=index&&listeners.splice(index,1),this}},proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(listeners&&listeners.length){listeners=listeners.slice(0),args=args||[];for(var onceListeners=this._onceEvents&&this._onceEvents[eventName],i=0;i<listeners.length;i++){var listener=listeners[i];onceListeners&&onceListeners[listener]&&(this.off(eventName,listener),delete onceListeners[listener]),listener.apply(this,args)}return this}},proto.allOff=function(){delete this._events,delete this._onceEvents},EvEmitter}),function(window,factory){"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",factory):"object"==typeof module&&module.exports?module.exports=factory():window.matchesSelector=factory()}(window,function(){var matchesMethod=function(){var ElemProto=window.Element.prototype;if(ElemProto.matches)return"matches";if(ElemProto.matchesSelector)return"matchesSelector";for(var prefixes=["webkit","moz","ms","o"],i=0;i<prefixes.length;i++){var prefix=prefixes[i],method=prefix+"MatchesSelector";if(ElemProto[method])return method}}();return function(elem,selector){return elem[matchesMethod](selector)}}),function(window,factory){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(matchesSelector){return factory(window,matchesSelector)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("desandro-matches-selector")):window.fizzyUIUtils=factory(window,window.matchesSelector)}(window,function(window,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b)a[prop]=b[prop];return a},utils.modulo=function(num,div){return(num%div+div)%div};var arraySlice=Array.prototype.slice;utils.makeArray=function(obj){return Array.isArray(obj)?obj:null===obj||void 0===obj?[]:"object"==typeof obj&&"number"==typeof obj.length?arraySlice.call(obj):[obj]},utils.removeFrom=function(ary,obj){var index=ary.indexOf(obj);-1!=index&&ary.splice(index,1)},utils.getParent=function(elem,selector){for(;elem.parentNode&&elem!=document.body;)if(elem=elem.parentNode,matchesSelector(elem,selector))return elem},utils.getQueryElement=function(elem){return"string"==typeof elem?document.querySelector(elem):elem},utils.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];return elems.forEach(function(elem){if(elem instanceof HTMLElement){if(!selector)return void ffElems.push(elem);matchesSelector(elem,selector)&&ffElems.push(elem);for(var childElems=elem.querySelectorAll(selector),i=0;i<childElems.length;i++)ffElems.push(childElems[i])}}),ffElems},utils.debounceMethod=function(_class,methodName,threshold){threshold=threshold||100;var method=_class.prototype[methodName],timeoutName=methodName+"Timeout";_class.prototype[methodName]=function(){var timeout=this[timeoutName];clearTimeout(timeout);var args=arguments,_this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args),delete _this[timeoutName]},threshold)}},utils.docReady=function(callback){var readyState=document.readyState;"complete"==readyState||"interactive"==readyState?setTimeout(callback):document.addEventListener("DOMContentLoaded",callback)},utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+"-"+$2}).toLowerCase()};var console=window.console;return utils.htmlInit=function(WidgetClass,namespace){utils.docReady(function(){var dashedNamespace=utils.toDashed(namespace),dataAttr="data-"+dashedNamespace,dataAttrElems=document.querySelectorAll("["+dataAttr+"]"),jsDashElems=document.querySelectorAll(".js-"+dashedNamespace),elems=utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems)),dataOptionsAttr=dataAttr+"-options",jQuery=window.jQuery;elems.forEach(function(elem){var options,attr=elem.getAttribute(dataAttr)||elem.getAttribute(dataOptionsAttr);try{options=attr&&JSON.parse(attr)}catch(error){return void(console&&console.error("Error parsing "+dataAttr+" on "+elem.className+": "+error))}var instance=new WidgetClass(elem,options);jQuery&&jQuery.data(elem,namespace,instance)})})},utils}),function(window,factory){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(EvEmitter,utils){return factory(window,EvEmitter,utils)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("ev-emitter"),require("fizzy-ui-utils")):window.InfiniteScroll=factory(window,window.EvEmitter,window.fizzyUIUtils)}(window,function(window,EvEmitter,utils){function InfiniteScroll(element,options){var queryElem=utils.getQueryElement(element);if(!queryElem)return void console.error("Bad element for InfiniteScroll: "+(queryElem||element));if(element=queryElem,element.infiniteScrollGUID){var instance=instances[element.infiniteScrollGUID];return instance.option(options),instance}this.element=element,this.options=utils.extend({},InfiniteScroll.defaults),this.option(options),jQuery&&(this.$element=jQuery(this.element)),this.create()}var jQuery=window.jQuery,instances={};InfiniteScroll.defaults={},InfiniteScroll.create={},InfiniteScroll.destroy={};var proto=InfiniteScroll.prototype;utils.extend(proto,EvEmitter.prototype);var GUID=0;proto.create=function(){var id=this.guid=++GUID;if(this.element.infiniteScrollGUID=id,instances[id]=this,this.pageIndex=1,this.loadCount=0,this.updateGetPath(),!(this.getPath&&this.getPath()))return void console.error("Disabling InfiniteScroll");this.updateGetAbsolutePath(),this.log("initialized",[this.element.className]),this.callOnInit();for(var method in InfiniteScroll.create)InfiniteScroll.create[method].call(this)},proto.option=function(opts){utils.extend(this.options,opts)},proto.callOnInit=function(){var onInit=this.options.onInit;onInit&&onInit.call(this,this)},proto.dispatchEvent=function(type,event,args){this.log(type,args);var emitArgs=event?[event].concat(args):args;if(this.emitEvent(type,emitArgs),jQuery&&this.$element){type+=".infiniteScroll";var $event=type;if(event){var jQEvent=jQuery.Event(event);jQEvent.type=type,$event=jQEvent}this.$element.trigger($event,args)}};var loggers={initialized:function(className){return"on "+className},request:function(path){return"URL: "+path},load:function(response,path){return(response.title||"")+". URL: "+path},error:function(error,path){return error+". URL: "+path},append:function(response,path,items){return items.length+" items. URL: "+path},last:function(response,path){return"URL: "+path},history:function(title,path){return"URL: "+path},pageIndex:function(index,origin){return"current page determined to be: "+index+" from "+origin}};proto.log=function(type,args){if(this.options.debug){var message="[InfiniteScroll] "+type,logger=loggers[type];logger&&(message+=". "+logger.apply(this,args)),console.log(message)}},proto.updateMeasurements=function(){this.windowHeight=window.innerHeight;var rect=this.element.getBoundingClientRect();this.top=rect.top+window.pageYOffset},proto.updateScroller=function(){var elementScroll=this.options.elementScroll;if(!elementScroll)return void(this.scroller=window);if(this.scroller=!0===elementScroll?this.element:utils.getQueryElement(elementScroll),!this.scroller)throw"Unable to find elementScroll: "+elementScroll},proto.updateGetPath=function(){var optPath=this.options.path;if(!optPath)return void console.error("InfiniteScroll path option required. Set as: "+optPath);var type=typeof optPath;return"function"==type?void(this.getPath=optPath):"string"==type&&optPath.match("{{#}}")?void this.updateGetPathTemplate(optPath):void this.updateGetPathSelector(optPath)},proto.updateGetPathTemplate=function(optPath){this.getPath=function(){var nextIndex=this.pageIndex+1;return optPath.replace("{{#}}",nextIndex)}.bind(this);var regexString=optPath.replace(/(\\\?|\?)/,"\\?").replace("{{#}}","(\\d\\d?\\d?)"),templateRe=new RegExp(regexString),match=location.href.match(templateRe);match&&(this.pageIndex=parseInt(match[1],10),this.log("pageIndex",[this.pageIndex,"template string"]))};var pathRegexes=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/];return proto.updateGetPathSelector=function(optPath){var hrefElem=document.querySelector(optPath);if(!hrefElem)return void console.error("Bad InfiniteScroll path option. Next link not found: "+optPath);for(var pathParts,regex,href=hrefElem.getAttribute("href"),i=0;href&&i<pathRegexes.length;i++){regex=pathRegexes[i];var match=href.match(regex);if(match){pathParts=match.slice(1);break}}if(!pathParts)return void console.error("InfiniteScroll unable to parse next link href: "+href);this.isPathSelector=!0,this.getPath=function(){var nextIndex=this.pageIndex+1;return pathParts[0]+nextIndex+pathParts[2]}.bind(this),this.pageIndex=parseInt(pathParts[1],10)-1,this.log("pageIndex",[this.pageIndex,"next link"])},proto.updateGetAbsolutePath=function(){var path=this.getPath();if(path.match(/^http/)||path.match(/^\//))return void(this.getAbsolutePath=this.getPath);var pathname=location.pathname;if(path.match(/^\?/))return void(this.getAbsolutePath=function(){return pathname+this.getPath()});var directory=pathname.substring(0,pathname.lastIndexOf("/"));this.getAbsolutePath=function(){return directory+"/"+this.getPath()}},InfiniteScroll.create.hideNav=function(){var nav=utils.getQueryElement(this.options.hideNav);nav&&(nav.style.display="none",this.nav=nav)},InfiniteScroll.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},proto.destroy=function(){this.allOff();for(var method in InfiniteScroll.destroy)InfiniteScroll.destroy[method].call(this);delete this.element.infiniteScrollGUID,delete instances[this.guid],jQuery&&this.$element&&jQuery.removeData(this.element,"infiniteScroll")},InfiniteScroll.throttle=function(fn,threshold){threshold=threshold||200;var last,timeout;return function(){var now=+new Date,args=arguments,trigger=function(){last=now,fn.apply(this,args)}.bind(this);last&&now<last+threshold?(clearTimeout(timeout),timeout=setTimeout(trigger,threshold)):trigger()}},InfiniteScroll.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.infiniteScrollGUID;return id&&instances[id]},InfiniteScroll.setJQuery=function($){jQuery=$},utils.htmlInit(InfiniteScroll,"infinite-scroll"),proto._init=function(){},jQuery&&jQuery.bridget&&jQuery.bridget("infiniteScroll",InfiniteScroll),InfiniteScroll}),function(window,factory){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(InfiniteScroll){return factory(window,InfiniteScroll)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("./core")):factory(window,window.InfiniteScroll)}(window,function(window,InfiniteScroll){function getItemsFragment(items){for(var fragment=document.createDocumentFragment(),i=0;items&&i<items.length;i++)fragment.appendChild(items[i]);return fragment}function refreshScripts(fragment){for(var scripts=fragment.querySelectorAll("script"),i=0;i<scripts.length;i++){var script=scripts[i],freshScript=document.createElement("script");copyAttributes(script,freshScript),freshScript.innerHTML=script.innerHTML,script.parentNode.replaceChild(freshScript,script)}}function copyAttributes(fromNode,toNode){for(var attrs=fromNode.attributes,i=0;i<attrs.length;i++){var attr=attrs[i];toNode.setAttribute(attr.name,attr.value)}}function request(url,responseType,onLoad,onError,onLast){var req=new XMLHttpRequest;req.open("GET",url,!0),req.responseType=responseType||"",req.setRequestHeader("X-Requested-With","XMLHttpRequest"),req.onload=function(){if(200==req.status)onLoad(req.response);else if(204==req.status)onLast(req.response);else{var error=new Error(req.statusText);onError(error)}},req.onerror=function(){var error=new Error("Network error requesting "+url);onError(error)},req.send()}var proto=InfiniteScroll.prototype;return InfiniteScroll.defaults.loadOnScroll=!0,InfiniteScroll.defaults.checkLastPage=!0,InfiniteScroll.defaults.responseType="document",InfiniteScroll.create.pageLoad=function(){this.canLoad=!0,this.on("scrollThreshold",this.onScrollThresholdLoad),this.on("load",this.checkLastPage),this.options.outlayer&&this.on("append",this.onAppendOutlayer)},proto.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},proto.loadNextPage=function(){if(!this.isLoading&&this.canLoad){var path=this.getAbsolutePath();this.isLoading=!0;var onLoad=function(response){this.onPageLoad(response,path)}.bind(this),onError=function(error){this.onPageError(error,path)}.bind(this),onLast=function(response){this.lastPageReached(response,path)}.bind(this);request(path,this.options.responseType,onLoad,onError,onLast),this.dispatchEvent("request",null,[path])}},proto.onPageLoad=function(response,path){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[response,path]),this.appendNextPage(response,path),response},proto.appendNextPage=function(response,path){var optAppend=this.options.append;if("document"==this.options.responseType&&optAppend){var items=response.querySelectorAll(optAppend),fragment=getItemsFragment(items),appendReady=function(){this.appendItems(items,fragment),this.isLoading=!1,this.dispatchEvent("append",null,[response,path,items])}.bind(this);this.options.outlayer?this.appendOutlayerItems(fragment,appendReady):appendReady()}},proto.appendItems=function(items,fragment){items&&items.length&&(fragment=fragment||getItemsFragment(items),refreshScripts(fragment),this.element.appendChild(fragment))},proto.appendOutlayerItems=function(fragment,appendReady){var imagesLoaded=InfiniteScroll.imagesLoaded||window.imagesLoaded;if(!imagesLoaded)return console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),void(this.isLoading=!1);imagesLoaded(fragment,appendReady)},proto.onAppendOutlayer=function(response,path,items){this.options.outlayer.appended(items)},proto.checkLastPage=function(response,path){var checkLastPage=this.options.checkLastPage;if(checkLastPage){var pathOpt=this.options.path;if("function"==typeof pathOpt){if(!this.getPath())return void this.lastPageReached(response,path)}var selector;if("string"==typeof checkLastPage?selector=checkLastPage:this.isPathSelector&&(selector=pathOpt),selector&&response.querySelector){response.querySelector(selector)||this.lastPageReached(response,path)}}},proto.lastPageReached=function(response,path){this.canLoad=!1,this.dispatchEvent("last",null,[response,path])},proto.onPageError=function(error,path){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[error,path]),error},InfiniteScroll.create.prefill=function(){if(this.options.prefill){var append=this.options.append;if(!append)return void console.error("append option required for prefill. Set as :"+append);this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()}},proto.prefill=function(){var distance=this.getPrefillDistance();this.isPrefilling=distance>=0,this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},proto.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},proto.stopPrefill=function(){this.log("stopPrefill"),this.off("append",this.prefill)},InfiniteScroll}),function(window,factory){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(InfiniteScroll,utils){return factory(window,InfiniteScroll,utils)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("./core"),require("fizzy-ui-utils")):factory(window,window.InfiniteScroll,window.fizzyUIUtils)}(window,function(window,InfiniteScroll,utils){var proto=InfiniteScroll.prototype;return InfiniteScroll.defaults.scrollThreshold=400,InfiniteScroll.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this),this.resizeHandler=this.onResize.bind(this);var scrollThreshold=this.options.scrollThreshold;(scrollThreshold||0===scrollThreshold)&&this.enableScrollWatch()},InfiniteScroll.destroy.scrollWatch=function(){this.disableScrollWatch()},proto.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},proto.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},proto.bindScrollWatchEvents=function(isBind){var addRemove=isBind?"addEventListener":"removeEventListener";this.scroller[addRemove]("scroll",this.pageScrollHandler),window[addRemove]("resize",this.resizeHandler)},proto.onPageScroll=InfiniteScroll.throttle(function(){this.getBottomDistance()<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),proto.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},proto.getWindowBottomDistance=function(){return this.top+this.element.clientHeight-(window.pageYOffset+this.windowHeight)},proto.getElementBottomDistance=function(){return this.scroller.scrollHeight-(this.scroller.scrollTop+this.scroller.clientHeight)},proto.onResize=function(){this.updateMeasurements()},utils.debounceMethod(InfiniteScroll,"onResize",150),InfiniteScroll}),function(window,factory){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(InfiniteScroll,utils){return factory(window,InfiniteScroll,utils)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("./core"),require("fizzy-ui-utils")):factory(window,window.InfiniteScroll,window.fizzyUIUtils)}(window,function(window,InfiniteScroll,utils){var proto=InfiniteScroll.prototype;InfiniteScroll.defaults.history="replace";var link=document.createElement("a");return InfiniteScroll.create.history=function(){if(this.options.history){link.href=this.getAbsolutePath();if(!((link.origin||link.protocol+"//"+link.host)==location.origin))return void console.error("[InfiniteScroll] cannot set history with different origin: "+link.origin+" on "+location.origin+" . History behavior disabled.");this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()}},proto.createHistoryAppend=function(){this.updateMeasurements(),this.updateScroller(),this.scrollPages=[{top:0,path:location.href,title:document.title}],this.scrollPageIndex=0,this.scrollHistoryHandler=this.onScrollHistory.bind(this),this.unloadHandler=this.onUnload.bind(this),this.scroller.addEventListener("scroll",this.scrollHistoryHandler),this.on("append",this.onAppendHistory),this.bindHistoryAppendEvents(!0)},proto.bindHistoryAppendEvents=function(isBind){var addRemove=isBind?"addEventListener":"removeEventListener";this.scroller[addRemove]("scroll",this.scrollHistoryHandler),window[addRemove]("unload",this.unloadHandler)},proto.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},InfiniteScroll.destroy.history=proto.destroyHistory=function(){this.options.history&&this.options.append&&this.bindHistoryAppendEvents(!1)},proto.onAppendHistory=function(response,path,items){if(items&&items.length){var firstItem=items[0],elemScrollY=this.getElementScrollY(firstItem);link.href=path,this.scrollPages.push({top:elemScrollY,path:link.href,title:response.title})}},proto.getElementScrollY=function(elem){return this.options.elementScroll?this.getElementElementScrollY(elem):this.getElementWindowScrollY(elem)},proto.getElementWindowScrollY=function(elem){return elem.getBoundingClientRect().top+window.pageYOffset},proto.getElementElementScrollY=function(elem){return elem.offsetTop-this.top},proto.onScrollHistory=function(){for(var pageIndex,page,scrollViewY=this.getScrollViewY(),i=0;i<this.scrollPages.length;i++){var scrollPage=this.scrollPages[i];if(scrollPage.top>=scrollViewY)break;pageIndex=i,page=scrollPage}pageIndex!=this.scrollPageIndex&&(this.scrollPageIndex=pageIndex,this.setHistory(page.title,page.path))},utils.debounceMethod(InfiniteScroll,"onScrollHistory",150),proto.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:window.pageYOffset+this.windowHeight/2},proto.setHistory=function(title,path){var optHistory=this.options.history;optHistory&&history[optHistory+"State"]&&(history[optHistory+"State"](null,title,path),this.options.historyTitle&&(document.title=title),this.dispatchEvent("history",null,[title,path]))},proto.onUnload=function(){var pageIndex=this.scrollPageIndex;if(0!==pageIndex){var scrollPage=this.scrollPages[pageIndex],scrollY=window.pageYOffset-scrollPage.top+this.top;this.destroyHistory(),scrollTo(0,scrollY)}},proto.onPageLoadHistory=function(response,path){this.setHistory(response.title,path)},InfiniteScroll}),function(window,factory){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(InfiniteScroll,utils){return factory(window,InfiniteScroll,utils)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("./core"),require("fizzy-ui-utils")):factory(window,window.InfiniteScroll,window.fizzyUIUtils)}(window,function(window,InfiniteScroll,utils){function InfiniteScrollButton(element,infScroll){this.element=element,this.infScroll=infScroll,this.clickHandler=this.onClick.bind(this),this.element.addEventListener("click",this.clickHandler),infScroll.on("request",this.disable.bind(this)),infScroll.on("load",this.enable.bind(this)),infScroll.on("error",this.hide.bind(this)),infScroll.on("last",this.hide.bind(this))}return InfiniteScroll.create.button=function(){var buttonElem=utils.getQueryElement(this.options.button);if(buttonElem)return void(this.button=new InfiniteScrollButton(buttonElem,this))},InfiniteScroll.destroy.button=function(){this.button&&this.button.destroy()},InfiniteScrollButton.prototype.onClick=function(event){event.preventDefault(),this.infScroll.loadNextPage()},InfiniteScrollButton.prototype.enable=function(){this.element.removeAttribute("disabled")},InfiniteScrollButton.prototype.disable=function(){this.element.disabled="disabled"},InfiniteScrollButton.prototype.hide=function(){this.element.style.display="none"},InfiniteScrollButton.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},InfiniteScroll.Button=InfiniteScrollButton,InfiniteScroll}),function(window,factory){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(InfiniteScroll,utils){return factory(window,InfiniteScroll,utils)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("./core"),require("fizzy-ui-utils")):factory(window,window.InfiniteScroll,window.fizzyUIUtils)}(window,function(window,InfiniteScroll,utils){function hide(elem){setDisplay(elem,"none")}function show(elem){setDisplay(elem,"block")}function setDisplay(elem,value){elem&&(elem.style.display=value)}var proto=InfiniteScroll.prototype;return InfiniteScroll.create.status=function(){var statusElem=utils.getQueryElement(this.options.status);statusElem&&(this.statusElement=statusElem,this.statusEventElements={request:statusElem.querySelector(".infinite-scroll-request"),error:statusElem.querySelector(".infinite-scroll-error"),last:statusElem.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},proto.bindHideStatus=function(bindMethod){
var hideEvent=this.options.append?"append":"load";this[bindMethod](hideEvent,this.hideAllStatus)},proto.showRequestStatus=function(){this.showStatus("request")},proto.showErrorStatus=function(){this.showStatus("error")},proto.showLastStatus=function(){this.showStatus("last"),this.bindHideStatus("off")},proto.showStatus=function(eventName){show(this.statusElement),this.hideStatusEventElements(),show(this.statusEventElements[eventName])},proto.hideAllStatus=function(){hide(this.statusElement),this.hideStatusEventElements()},proto.hideStatusEventElements=function(){for(var type in this.statusEventElements){hide(this.statusEventElements[type])}},InfiniteScroll}),function(window,factory){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],factory):"object"==typeof module&&module.exports&&(module.exports=factory(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}(window,function(InfiniteScroll){return InfiniteScroll}),function(window,factory){"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(EvEmitter){return factory(window,EvEmitter)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("ev-emitter")):window.imagesLoaded=factory(window,window.EvEmitter)}("undefined"!=typeof window?window:this,function(window,EvEmitter){function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}function makeArray(obj){return Array.isArray(obj)?obj:"object"==typeof obj&&"number"==typeof obj.length?arraySlice.call(obj):[obj]}function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded))return new ImagesLoaded(elem,options,onAlways);var queryElem=elem;if("string"==typeof elem&&(queryElem=document.querySelectorAll(elem)),!queryElem)return void console.error("Bad element for imagesLoaded "+(queryElem||elem));this.elements=makeArray(queryElem),this.options=extend({},this.options),"function"==typeof options?onAlways=options:extend(this.options,options),onAlways&&this.on("always",onAlways),this.getImages(),$&&(this.jqDeferred=new $.Deferred),setTimeout(this.check.bind(this))}function LoadingImage(img){this.img=img}function Background(url,element){this.url=url,this.element=element,this.img=new Image}var $=window.jQuery,console=window.console,arraySlice=Array.prototype.slice;ImagesLoaded.prototype=Object.create(EvEmitter.prototype),ImagesLoaded.prototype.options={},ImagesLoaded.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},ImagesLoaded.prototype.addElementImages=function(elem){"IMG"==elem.nodeName&&this.addImage(elem),!0===this.options.background&&this.addElementBackgroundImages(elem);var nodeType=elem.nodeType;if(nodeType&&elementNodeTypes[nodeType]){for(var childImgs=elem.querySelectorAll("img"),i=0;i<childImgs.length;i++){var img=childImgs[i];this.addImage(img)}if("string"==typeof this.options.background){var children=elem.querySelectorAll(this.options.background);for(i=0;i<children.length;i++){var child=children[i];this.addElementBackgroundImages(child)}}}};var elementNodeTypes={1:!0,9:!0,11:!0};return ImagesLoaded.prototype.addElementBackgroundImages=function(elem){var style=getComputedStyle(elem);if(style)for(var reURL=/url\((['"])?(.*?)\1\)/gi,matches=reURL.exec(style.backgroundImage);null!==matches;){var url=matches&&matches[2];url&&this.addBackground(url,elem),matches=reURL.exec(style.backgroundImage)}},ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage)},ImagesLoaded.prototype.addBackground=function(url,elem){var background=new Background(url,elem);this.images.push(background)},ImagesLoaded.prototype.check=function(){function onProgress(image,elem,message){setTimeout(function(){_this.progress(image,elem,message)})}var _this=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();this.images.forEach(function(loadingImage){loadingImage.once("progress",onProgress),loadingImage.check()})},ImagesLoaded.prototype.progress=function(image,elem,message){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded,this.emitEvent("progress",[this,image,elem]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,image),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&console&&console.log("progress: "+message,image,elem)},ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(eventName,[this]),this.emitEvent("always",[this]),this.jqDeferred){var jqMethod=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[jqMethod](this)}},LoadingImage.prototype=Object.create(EvEmitter.prototype),LoadingImage.prototype.check=function(){if(this.getIsImageComplete())return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src},LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded,this.emitEvent("progress",[this,this.img,message])},LoadingImage.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},LoadingImage.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},LoadingImage.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},LoadingImage.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},Background.prototype=Object.create(LoadingImage.prototype),Background.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},Background.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},Background.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded,this.emitEvent("progress",[this,this.element,message])},ImagesLoaded.makeJQueryPlugin=function(jQuery){(jQuery=jQuery||window.jQuery)&&($=jQuery,$.fn.imagesLoaded=function(options,callback){return new ImagesLoaded(this,options,callback).jqDeferred.promise($(this))})},ImagesLoaded.makeJQueryPlugin(),ImagesLoaded}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof module&&module.exports?module.exports=function(root,jQuery){return void 0===jQuery&&(jQuery="undefined"!=typeof window?require("jquery"):require("jquery")(root)),factory(jQuery),jQuery}:factory(jQuery)}(function($){var Comments={$el:null,commentsById:{},usersById:{},dataFetched:!1,currentSortKey:"",options:{},events:{click:"closeDropdowns","keydown [contenteditable]":"saveOnKeydown","focus [contenteditable]":"saveEditableContent","keyup [contenteditable]":"checkEditableContentForChange","paste [contenteditable]":"checkEditableContentForChange","input [contenteditable]":"checkEditableContentForChange","blur [contenteditable]":"checkEditableContentForChange","click .navigation li[data-sort-key]":"navigationElementClicked","click .navigation li.title":"toggleNavigationDropdown","click .commenting-field.main .textarea":"showMainCommentingField","click .commenting-field.main .close":"hideMainCommentingField","click .commenting-field .textarea":"increaseTextareaHeight","change .commenting-field .textarea":"increaseTextareaHeight textareaContentChanged","click .commenting-field:not(.main) .close":"removeCommentingField","click .commenting-field .send.enabled":"postComment","click .commenting-field .update.enabled":"putComment","click .commenting-field .delete.enabled":"deleteComment",'change .commenting-field .upload.enabled input[type="file"]':"fileInputChanged","click li.comment button.upvote":"upvoteComment","click li.comment button.delete.enabled":"deleteComment","click li.comment .hashtag":"hashtagClicked","click li.comment .ping":"pingClicked","click li.comment ul.child-comments .toggle-all":"toggleReplies","click li.comment button.reply":"replyButtonClicked","click li.comment button.edit":"editButtonClicked",dragenter:"showDroppableOverlay","dragenter .droppable-overlay":"handleDragEnter","dragleave .droppable-overlay":"handleDragLeaveForOverlay","dragenter .droppable-overlay .droppable":"handleDragEnter","dragleave .droppable-overlay .droppable":"handleDragLeaveForDroppable","dragover .droppable-overlay":"handleDragOverForOverlay","drop .droppable-overlay":"handleDrop","click .dropdown.autocomplete":"stopPropagation","mousedown .dropdown.autocomplete":"stopPropagation","touchstart .dropdown.autocomplete":"stopPropagation"},getDefaultOptions:function(){return{profilePictureURL:"",currentUserIsAdmin:!1,currentUserId:null,spinnerIconURL:"",upvoteIconURL:"",replyIconURL:"",uploadIconURL:"",attachmentIconURL:"",fileIconURL:"",noCommentsIconURL:"",textareaPlaceholderText:"Add a comment",newestText:"Newest",oldestText:"Oldest",popularText:"Popular",attachmentsText:"Attachments",sendText:"Send",replyText:"Reply",editText:"Edit",editedText:"Edited",youText:"You",saveText:"Save",deleteText:"Delete",newText:"New",viewAllRepliesText:"View all __replyCount__ replies",hideRepliesText:"Hide replies",noCommentsText:"No comments",noAttachmentsText:"No attachments",attachmentDropText:"Drop files here",textFormatter:function(text){return text},enableReplying:!0,enableEditing:!0,enableUpvoting:!0,enableDeleting:!0,enableAttachments:!1,enableHashtags:!1,enablePinging:!1,enableDeletingCommentWithReplies:!1,enableNavigation:!0,postCommentOnEnter:!1,forceResponsive:!1,readOnly:!1,defaultNavigationSortKey:"newest",highlightColor:"#2793e6",deleteButtonColor:"#C9302C",scrollContainer:this.$el,roundProfilePictures:!1,textareaRows:2,textareaRowsOnFocus:2,textareaMaxRows:5,maxRepliesVisible:2,fieldMappings:{id:"id",parent:"parent",created:"created",modified:"modified",content:"content",file:"file",fileURL:"file_url",fileMimeType:"file_mime_type",pings:"pings",creator:"creator",fullname:"fullname",profileURL:"profile_url",profilePictureURL:"profile_picture_url",isNew:"is_new",createdByAdmin:"created_by_admin",createdByCurrentUser:"created_by_current_user",upvoteCount:"upvote_count",userHasUpvoted:"user_has_upvoted"},getUsers:function(success,error){success([])},getComments:function(success,error){success([])},postComment:function(commentJSON,success,error){success(commentJSON)},putComment:function(commentJSON,success,error){success(commentJSON)},deleteComment:function(commentJSON,success,error){success()},upvoteComment:function(commentJSON,success,error){success(commentJSON)},hashtagClicked:function(hashtag){},pingClicked:function(userId){},uploadAttachments:function(commentArray,success,error){success(commentArray)},refresh:function(){},timeFormatter:function(time){return new Date(time).toLocaleDateString()}}},init:function(options,el){this.$el=$(el),this.$el.addClass("jquery-comments"),this.undelegateEvents(),this.delegateEvents(),function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),$.browser.mobile&&this.$el.addClass("mobile"),this.options=$.extend(!0,{},this.getDefaultOptions(),options),this.options.readOnly&&this.$el.addClass("read-only"),this.currentSortKey=this.options.defaultNavigationSortKey,this.createCssDeclarations(),this.fetchDataAndRender()},delegateEvents:function(){this.bindEvents(!1)},undelegateEvents:function(){this.bindEvents(!0)},bindEvents:function(unbind){var bindFunction=unbind?"off":"on";for(var key in this.events){var eventName=key.split(" ")[0],selector=key.split(" ").slice(1).join(" "),methodNames=this.events[key].split(" ");for(var index in methodNames)if(methodNames.hasOwnProperty(index)){var method=this[methodNames[index]];method=$.proxy(method,this),""==selector?this.$el[bindFunction](eventName,method):this.$el[bindFunction](eventName,selector,method)}}},fetchDataAndRender:function(){var self=this;this.commentsById={},this.usersById={},this.$el.empty(),this.createHTML();var dataFetched=this.after(this.options.enablePinging?2:1,function(){self.dataFetched=!0,self.render()}),commentsFetched=function(commentsArray){var commentModels=commentsArray.map(function(commentsJSON){return self.createCommentModel(commentsJSON)});self.sortComments(commentModels,"oldest"),$(commentModels).each(function(index,commentModel){self.addCommentToDataModel(commentModel)}),dataFetched()};if(this.options.getComments(commentsFetched,dataFetched),this.options.enablePinging){var usersFetched=function(userArray){$(userArray).each(function(index,user){self.usersById[user.id]=user}),dataFetched()};this.options.getUsers(usersFetched,dataFetched)}},fetchNext:function(){var self=this,spinner=this.createSpinner();this.$el.find("ul#comment-list").append(spinner);var success=function(commentModels){$(commentModels).each(function(index,commentModel){self.createComment(commentModel)}),spinner.remove()},error=function(){spinner.remove()};this.options.getComments(success,error)},createCommentModel:function(commentJSON){var commentModel=this.applyInternalMappings(commentJSON);return commentModel.childs=[],commentModel},addCommentToDataModel:function(commentModel){if(!(commentModel.id in this.commentsById)&&(this.commentsById[commentModel.id]=commentModel,commentModel.parent)){this.getOutermostParent(commentModel.parent).childs.push(commentModel.id)}},updateCommentModel:function(commentModel){$.extend(this.commentsById[commentModel.id],commentModel)},render:function(){this.dataFetched&&(this.showActiveContainer(),this.createComments(),this.options.enableAttachments&&this.createAttachments(),this.$el.find("> .spinner").remove(),this.options.refresh())},showActiveContainer:function(){var activeNavigationEl=this.$el.find(".navigation li[data-container-name].active"),containerName=activeNavigationEl.data("container-name"),containerEl=this.$el.find('[data-container="'+containerName+'"]');containerEl.siblings("[data-container]").hide(),containerEl.show()},createComments:function(){var self=this;this.$el.find("#comment-list").remove();var commentList=$("<ul/>",{id:"comment-list",class:"main"}),mainLevelComments=[],replies=[];$(this.getComments()).each(function(index,commentModel){null==commentModel.parent?mainLevelComments.push(commentModel):replies.push(commentModel)}),this.sortComments(mainLevelComments,this.currentSortKey),mainLevelComments.reverse(),$(mainLevelComments).each(function(index,commentModel){self.addComment(commentModel,commentList)}),this.sortComments(replies,"oldest"),$(replies).each(function(index,commentModel){self.addComment(commentModel,commentList)}),this.$el.find('[data-container="comments"]').prepend(commentList)},createAttachments:function(){var self=this;this.$el.find("#attachment-list").remove();var attachmentList=$("<ul/>",{id:"attachment-list",class:"main"}),attachments=this.getAttachments();this.sortComments(attachments,"newest"),attachments.reverse(),$(attachments).each(function(index,commentModel){self.addAttachment(commentModel,attachmentList)}),this.$el.find('[data-container="attachments"]').prepend(attachmentList)},addComment:function(commentModel,commentList){commentList=commentList||this.$el.find("#comment-list");var commentEl=this.createCommentElement(commentModel);if(commentModel.parent){var directParentEl=commentList.find('.comment[data-id="'+commentModel.parent+'"]');this.reRenderCommentActionBar(commentModel.parent);var outerMostParent=directParentEl.parents(".comment").last();0==outerMostParent.length&&(outerMostParent=directParentEl);var childCommentsEl=outerMostParent.find(".child-comments"),commentingField=childCommentsEl.find(".commenting-field");commentingField.length?commentingField.before(commentEl):childCommentsEl.append(commentEl),this.updateToggleAllButton(outerMostParent)}else commentList.prepend(commentEl)},addAttachment:function(commentModel,commentList){commentList=commentList||this.$el.find("#attachment-list");var commentEl=this.createCommentElement(commentModel);commentList.prepend(commentEl)},removeComment:function(commentId){var self=this,commentModel=this.commentsById[commentId],childComments=this.getChildComments(commentModel.id);if($(childComments).each(function(index,childComment){self.removeComment(childComment.id)}),commentModel.parent){var outermostParent=this.getOutermostParent(commentModel.parent),indexToRemove=outermostParent.childs.indexOf(commentModel.id);outermostParent.childs.splice(indexToRemove,1)}delete this.commentsById[commentId];var commentElements=this.$el.find('li.comment[data-id="'+commentId+'"]'),parentEl=commentElements.parents("li.comment").last();commentElements.remove(),this.updateToggleAllButton(parentEl)},uploadAttachments:function(files,commentingField){var self=this;commentingField||(commentingField=this.$el.find(".commenting-field.main"));var uploadButton=commentingField.find(".upload"),isReply=!commentingField.hasClass("main"),fileCount=files.length;if(fileCount){var textarea=commentingField.find(".textarea");uploadButton.removeClass("enabled");var attachmentListSpinner=this.createSpinner(),commentListSpinner=this.createSpinner();this.$el.find("ul#attachment-list").prepend(attachmentListSpinner),isReply?commentingField.before(commentListSpinner):this.$el.find("ul#comment-list").prepend(commentListSpinner);var success=function(commentArray){$(commentArray).each(function(index,commentJSON){var commentModel=self.createCommentModel(commentJSON);self.addCommentToDataModel(commentModel),self.addComment(commentModel),self.addAttachment(commentModel)}),commentArray.length==fileCount&&0==self.getTextareaContent(textarea).length&&commentingField.find(".close").trigger("click"),uploadButton.addClass("enabled"),commentListSpinner.remove(),attachmentListSpinner.remove()},error=function(){uploadButton.addClass("enabled"),commentListSpinner.remove(),attachmentListSpinner.remove()},commentArray=[];$(files).each(function(index,file){var commentJSON=self.createCommentJSON(textarea);commentJSON.id+="-"+index,commentJSON.content="",commentJSON.file=file,commentJSON.fileURL="C:/fakepath/"+file.name,commentJSON.fileMimeType=file.type,commentJSON=self.applyExternalMappings(commentJSON),commentArray.push(commentJSON)}),self.options.uploadAttachments(commentArray,success,error)}uploadButton.find("input").val("")},updateToggleAllButton:function(parentEl){if(null!=this.options.maxRepliesVisible){var childCommentsEl=parentEl.find(".child-comments"),childComments=childCommentsEl.find(".comment"),toggleAllButton=childCommentsEl.find("li.toggle-all");if(childComments.removeClass("hidden-reply"),0===this.options.maxRepliesVisible)var hiddenReplies=childComments;else var hiddenReplies=childComments.slice(0,-this.options.maxRepliesVisible);if(hiddenReplies.addClass("hidden-reply"),toggleAllButton.find("span.text").text()==this.options.textFormatter(this.options.hideRepliesText)&&hiddenReplies.addClass("visible"),childComments.length>this.options.maxRepliesVisible){if(!toggleAllButton.length){toggleAllButton=$("<li/>",{class:"toggle-all highlight-font-bold"});var toggleAllButtonText=$("<span/>",{class:"text"}),caret=$("<span/>",{class:"caret"});toggleAllButton.append(toggleAllButtonText).append(caret),childCommentsEl.prepend(toggleAllButton)}this.setToggleAllButtonText(toggleAllButton,!1)}else toggleAllButton.remove()}},sortComments:function(comments,sortKey){var self=this;"popularity"==sortKey?comments.sort(function(commentA,commentB){var pointsOfA=commentA.childs.length,pointsOfB=commentB.childs.length;if(self.options.enableUpvoting&&(pointsOfA+=commentA.upvoteCount,pointsOfB+=commentB.upvoteCount),pointsOfB!=pointsOfA)return pointsOfB-pointsOfA;var createdA=new Date(commentA.created).getTime();return new Date(commentB.created).getTime()-createdA}):comments.sort(function(commentA,commentB){var createdA=new Date(commentA.created).getTime(),createdB=new Date(commentB.created).getTime();return"oldest"==sortKey?createdA-createdB:createdB-createdA})},sortAndReArrangeComments:function(sortKey){var commentList=this.$el.find("#comment-list"),mainLevelComments=this.getComments().filter(function(commentModel){return!commentModel.parent});this.sortComments(mainLevelComments,sortKey),$(mainLevelComments).each(function(index,commentModel){var commentEl=commentList.find("> li.comment[data-id="+commentModel.id+"]");commentList.append(commentEl)})},showActiveSort:function(){var activeElements=this.$el.find('.navigation li[data-sort-key="'+this.currentSortKey+'"]');this.$el.find(".navigation li").removeClass("active"),activeElements.addClass("active");var titleEl=this.$el.find(".navigation .title");if("attachments"!=this.currentSortKey)titleEl.addClass("active"),titleEl.find("header").html(activeElements.first().html());else{var defaultDropdownEl=this.$el.find(".navigation ul.dropdown").children().first();titleEl.find("header").html(defaultDropdownEl.html())}this.showActiveContainer()},forceResponsive:function(){this.$el.addClass("responsive")},closeDropdowns:function(){this.$el.find(".dropdown").hide()},saveOnKeydown:function(ev){if(13==ev.keyCode){var metaKey=ev.metaKey||ev.ctrlKey;if(this.options.postCommentOnEnter||metaKey){$(ev.currentTarget).siblings(".control-row").find(".save").trigger("click"),ev.stopPropagation(),ev.preventDefault()}}},saveEditableContent:function(ev){var el=$(ev.currentTarget);el.data("before",el.html())},checkEditableContentForChange:function(ev){var el=$(ev.currentTarget);$(el[0].childNodes).each(function(){this.nodeType==Node.TEXT_NODE&&0==this.length&&this.removeNode&&this.removeNode()}),el.data("before")!=el.html()&&(el.data("before",el.html()),el.trigger("change"))},navigationElementClicked:function(ev){var navigationEl=$(ev.currentTarget),sortKey=navigationEl.data().sortKey;"attachments"!=sortKey&&this.sortAndReArrangeComments(sortKey),this.currentSortKey=sortKey,this.showActiveSort()},toggleNavigationDropdown:function(ev){ev.stopPropagation(),$(ev.currentTarget).find("~ .dropdown").toggle()},showMainCommentingField:function(ev){var mainTextarea=$(ev.currentTarget);mainTextarea.siblings(".control-row").show(),mainTextarea.parent().find(".close").show(),mainTextarea.parent().find(".upload.inline-button").hide(),mainTextarea.focus()},hideMainCommentingField:function(ev){var closeButton=$(ev.currentTarget),mainTextarea=this.$el.find(".commenting-field.main .textarea"),mainControlRow=this.$el.find(".commenting-field.main .control-row");this.clearTextarea(mainTextarea),this.adjustTextareaHeight(mainTextarea,!1),mainControlRow.hide(),closeButton.hide(),mainTextarea.parent().find(".upload.inline-button").show(),mainTextarea.blur()},increaseTextareaHeight:function(ev){var textarea=$(ev.currentTarget);this.adjustTextareaHeight(textarea,!0)},textareaContentChanged:function(ev){var textarea=$(ev.currentTarget),saveButton=textarea.siblings(".control-row").find(".save");if(!textarea.find(".reply-to.tag").length){var commentId=textarea.attr("data-comment");if(commentId){var parentComments=textarea.parents("li.comment");if(parentComments.length>1){var parentId=parentComments.last().data("id");textarea.attr("data-parent",parentId)}}else{var parentId=textarea.parents("li.comment").last().data("id");textarea.attr("data-parent",parentId)}}var commentingField=textarea.parents(".commenting-field").first();textarea[0].scrollHeight>textarea.outerHeight()?commentingField.addClass("scrollable"):commentingField.removeClass("scrollable");var contentOrParentChangedIfEditing=!0,content=this.getTextareaContent(textarea,!0);if(commentId=textarea.attr("data-comment")){var parentFromModel,contentChanged=content!=this.commentsById[commentId].content;this.commentsById[commentId].parent&&(parentFromModel=this.commentsById[commentId].parent.toString());var parentChanged=textarea.attr("data-parent")!=parentFromModel;contentOrParentChangedIfEditing=contentChanged||parentChanged}content.length&&contentOrParentChangedIfEditing?saveButton.addClass("enabled"):saveButton.removeClass("enabled")},removeCommentingField:function(ev){var closeButton=$(ev.currentTarget);closeButton.siblings(".textarea").attr("data-comment")&&closeButton.parents("li.comment").first().removeClass("edit"),closeButton.parents(".commenting-field").first().remove()},postComment:function(ev){var self=this,sendButton=$(ev.currentTarget),commentingField=sendButton.parents(".commenting-field").first(),textarea=commentingField.find(".textarea");sendButton.removeClass("enabled");var commentJSON=this.createCommentJSON(textarea);commentJSON=this.applyExternalMappings(commentJSON);var success=function(commentJSON){self.createComment(commentJSON),commentingField.find(".close").trigger("click")},error=function(){sendButton.addClass("enabled")};this.options.postComment(commentJSON,success,error)},createComment:function(commentJSON){var commentModel=this.createCommentModel(commentJSON);this.addCommentToDataModel(commentModel),this.addComment(commentModel)},putComment:function(ev){var self=this,saveButton=$(ev.currentTarget),commentingField=saveButton.parents(".commenting-field").first(),textarea=commentingField.find(".textarea");saveButton.removeClass("enabled");var commentJSON=$.extend({},this.commentsById[textarea.attr("data-comment")]);$.extend(commentJSON,{parent:textarea.attr("data-parent")||null,content:this.getTextareaContent(textarea),pings:this.getPings(textarea),modified:(new Date).getTime()}),commentJSON=this.applyExternalMappings(commentJSON);var success=function(commentJSON){var commentModel=self.createCommentModel(commentJSON);delete commentModel.childs,self.updateCommentModel(commentModel),commentingField.find(".close").trigger("click"),self.reRenderComment(commentModel.id)},error=function(){saveButton.addClass("enabled")};this.options.putComment(commentJSON,success,error)},deleteComment:function(ev){var self=this,deleteButton=$(ev.currentTarget),commentEl=deleteButton.parents(".comment").first(),commentJSON=$.extend({},this.commentsById[commentEl.attr("data-id")]),commentId=commentJSON.id,parentId=commentJSON.parent;deleteButton.removeClass("enabled"),commentJSON=this.applyExternalMappings(commentJSON);var success=function(){self.removeComment(commentId),parentId&&self.reRenderCommentActionBar(parentId)},error=function(){deleteButton.addClass("enabled")};this.options.deleteComment(commentJSON,success,error)},hashtagClicked:function(ev){var el=$(ev.currentTarget),value=el.attr("data-value");this.options.hashtagClicked(value)},pingClicked:function(ev){var el=$(ev.currentTarget),value=el.attr("data-value");this.options.pingClicked(value)},fileInputChanged:function(ev,files){var files=ev.currentTarget.files,commentingField=$(ev.currentTarget).parents(".commenting-field").first();this.uploadAttachments(files,commentingField)},upvoteComment:function(ev){var newUpvoteCount,self=this,commentEl=$(ev.currentTarget).parents("li.comment").first(),commentModel=commentEl.data().model,previousUpvoteCount=commentModel.upvoteCount;newUpvoteCount=commentModel.userHasUpvoted?previousUpvoteCount-1:previousUpvoteCount+1,commentModel.userHasUpvoted=!commentModel.userHasUpvoted,commentModel.upvoteCount=newUpvoteCount,this.reRenderUpvotes(commentModel.id);var commentJSON=$.extend({},commentModel);commentJSON=this.applyExternalMappings(commentJSON);var success=function(commentJSON){var commentModel=self.createCommentModel(commentJSON);self.updateCommentModel(commentModel),self.reRenderUpvotes(commentModel.id)},error=function(){commentModel.userHasUpvoted=!commentModel.userHasUpvoted,commentModel.upvoteCount=previousUpvoteCount,self.reRenderUpvotes(commentModel.id)};this.options.upvoteComment(commentJSON,success,error)},toggleReplies:function(ev){var el=$(ev.currentTarget);el.siblings(".hidden-reply").toggleClass("visible"),this.setToggleAllButtonText(el,!0)},replyButtonClicked:function(ev){var replyButton=$(ev.currentTarget),outermostParent=replyButton.parents("li.comment").last(),parentId=replyButton.parents(".comment").first().data().id,replyField=outermostParent.find(".child-comments > .commenting-field");if(replyField.length&&replyField.remove(),replyField.find(".textarea").attr("data-parent")!=parentId){replyField=this.createCommentingFieldElement(parentId),outermostParent.find(".child-comments").append(replyField);var textarea=replyField.find(".textarea");this.moveCursorToEnd(textarea);var scrollTop=this.options.scrollContainer.scrollTop(),endOfReply=scrollTop+replyField.position().top+replyField.outerHeight(),endOfScrollable=scrollTop+this.options.scrollContainer.outerHeight();if(endOfReply>endOfScrollable){var newScrollTop=scrollTop+(endOfReply-endOfScrollable);this.options.scrollContainer.scrollTop(newScrollTop)}}},editButtonClicked:function(ev){var editButton=$(ev.currentTarget),commentEl=editButton.parents("li.comment").first(),commentModel=commentEl.data().model;commentEl.addClass("edit");var editField=this.createCommentingFieldElement(commentModel.parent,commentModel.id);commentEl.find(".comment-wrapper").first().append(editField);var textarea=editField.find(".textarea");textarea.attr("data-comment",commentModel.id),textarea.append(this.getFormattedCommentContent(commentModel,!0)),this.moveCursorToEnd(textarea)},showDroppableOverlay:function(ev){this.options.enableAttachments&&(this.$el.find(".droppable-overlay").css("top",this.$el[0].scrollTop),this.$el.find(".droppable-overlay").show(),this.$el.addClass("drag-ongoing"))},handleDragEnter:function(ev){
var count=$(ev.currentTarget).data("dnd-count")||0;count++,$(ev.currentTarget).data("dnd-count",count),$(ev.currentTarget).addClass("drag-over")},handleDragLeave:function(ev,callback){var count=$(ev.currentTarget).data("dnd-count");count--,$(ev.currentTarget).data("dnd-count",count),0==count&&($(ev.currentTarget).removeClass("drag-over"),callback&&callback())},handleDragLeaveForOverlay:function(ev){var self=this;this.handleDragLeave(ev,function(){self.hideDroppableOverlay()})},handleDragLeaveForDroppable:function(ev){this.handleDragLeave(ev)},handleDragOverForOverlay:function(ev){ev.stopPropagation(),ev.preventDefault(),ev.originalEvent.dataTransfer.dropEffect="copy"},hideDroppableOverlay:function(){this.$el.find(".droppable-overlay").hide(),this.$el.removeClass("drag-ongoing")},handleDrop:function(ev){ev.preventDefault(),$(ev.target).trigger("dragleave"),this.hideDroppableOverlay(),this.uploadAttachments(ev.originalEvent.dataTransfer.files)},stopPropagation:function(ev){ev.stopPropagation()},createHTML:function(){var mainCommentingField=this.createMainCommentingFieldElement();this.$el.append(mainCommentingField),mainCommentingField.find(".control-row").hide(),mainCommentingField.find(".close").hide(),this.options.enableNavigation&&(this.$el.append(this.createNavigationElement()),this.showActiveSort());var spinner=this.createSpinner();this.$el.append(spinner);var commentsContainer=$("<div/>",{class:"data-container","data-container":"comments"});this.$el.append(commentsContainer);var noComments=$("<div/>",{class:"no-comments no-data",text:this.options.textFormatter(this.options.noCommentsText)}),noCommentsIcon=$("<i/>",{class:"fa fa-comments fa-2x"});if(this.options.noCommentsIconURL.length&&(noCommentsIcon.css("background-image",'url("'+this.options.noCommentsIconURL+'")'),noCommentsIcon.addClass("image")),noComments.prepend($("<br/>")).prepend(noCommentsIcon),commentsContainer.append(noComments),this.options.enableAttachments){var attachmentsContainer=$("<div/>",{class:"data-container","data-container":"attachments"});this.$el.append(attachmentsContainer);var noAttachments=$("<div/>",{class:"no-attachments no-data",text:this.options.textFormatter(this.options.noAttachmentsText)}),noAttachmentsIcon=$("<i/>",{class:"fa fa-paperclip fa-2x"});this.options.attachmentIconURL.length&&(noAttachmentsIcon.css("background-image",'url("'+this.options.attachmentIconURL+'")'),noAttachmentsIcon.addClass("image")),noAttachments.prepend($("<br/>")).prepend(noAttachmentsIcon),attachmentsContainer.append(noAttachments);var droppableOverlay=$("<div/>",{class:"droppable-overlay"}),droppableContainer=$("<div/>",{class:"droppable-container"}),droppable=$("<div/>",{class:"droppable"}),uploadIcon=$("<i/>",{class:"fa fa-paperclip fa-4x"});this.options.uploadIconURL.length&&(uploadIcon.css("background-image",'url("'+this.options.uploadIconURL+'")'),uploadIcon.addClass("image"));var dropAttachmentText=$("<div/>",{text:this.options.textFormatter(this.options.attachmentDropText)});droppable.append(uploadIcon),droppable.append(dropAttachmentText),droppableOverlay.html(droppableContainer.html(droppable)).hide(),this.$el.append(droppableOverlay)}},createProfilePictureElement:function(src,commentProfileUrl){if(src)var profilePicture=$("<img/>",{src:src});else var profilePicture=$("<i/>",{class:"fa fa-user"});var linkEl=$("<a/>",{href:commentProfileUrl,class:"profile-picture"});return console.log(linkEl),this.options.roundProfilePictures&&profilePicture.addClass("round"),profilePicture=linkEl.append(profilePicture)},createMainCommentingFieldElement:function(){return this.createCommentingFieldElement(void 0,void 0,!0)},createCommentingFieldElement:function(parentId,existingCommentId,isMain){var self=this,commentingField=$("<div/>",{class:"commenting-field"});if(isMain&&commentingField.addClass("main"),existingCommentId)var profilePictureURL=this.commentsById[existingCommentId].profilePictureURL;else var profilePictureURL=this.options.profilePictureURL;var profilePicture=this.createProfilePictureElement(profilePictureURL),textareaWrapper=$("<div/>",{class:"textarea-wrapper"}),controlRow=$("<div/>",{class:"control-row"}),textarea=$("<div/>",{class:"textarea","data-placeholder":this.options.textFormatter(this.options.textareaPlaceholderText),contenteditable:!0});this.adjustTextareaHeight(textarea,!1);var closeButton=$("<span/>",{class:"close inline-button"}).append($('<span class="left"/>')).append($('<span class="right"/>'));if(existingCommentId){var saveButtonText=this.options.textFormatter(this.options.saveText),deleteButton=$("<span/>",{class:"delete",text:this.options.textFormatter(this.options.deleteText)}).css("background-color",this.options.deleteButtonColor);controlRow.append(deleteButton),this.isAllowedToDelete(existingCommentId)&&deleteButton.addClass("enabled")}else{var saveButtonText=this.options.textFormatter(this.options.sendText);if(this.options.enableAttachments){var uploadButton=$("<span/>",{class:"enabled upload"}),uploadIcon=$("<i/>",{class:"fa fa-paperclip"}),fileInput=$("<input/>",{type:"file","data-role":"none"});$.browser.mobile||fileInput.attr("multiple","multiple"),this.options.uploadIconURL.length&&(uploadIcon.css("background-image",'url("'+this.options.uploadIconURL+'")'),uploadIcon.addClass("image")),uploadButton.append(uploadIcon).append(fileInput),controlRow.append(uploadButton.clone()),isMain&&textareaWrapper.append(uploadButton.clone().addClass("inline-button"))}}var saveButtonClass=existingCommentId?"update":"send",saveButton=$("<span/>",{class:saveButtonClass+" save highlight-background",text:saveButtonText});if(controlRow.prepend(saveButton),textareaWrapper.append(closeButton).append(textarea).append(controlRow),commentingField.append(profilePicture).append(textareaWrapper),parentId){textarea.attr("data-parent",parentId);var parentModel=this.commentsById[parentId];if(parentModel.parent){textarea.html("&nbsp;");var replyToName="@"+parentModel.fullname,replyToTag=this.createTagElement(replyToName,"reply-to",parentModel.creator);textarea.prepend(replyToTag)}}return this.options.enablePinging&&(textarea.textcomplete([{match:/(^|\s)@([^@]*)$/i,index:2,search:function(term,callback){term=self.normalizeSpaces(term);var pings=self.getPings(textarea),users=self.getUsers().filter(function(user){var isSelf=user.id==self.options.currentUserId,alreadyPinged=-1!=pings.indexOf(user.id);return!isSelf&&!alreadyPinged});if(0==term.length){var filteredUsers=users;filteredUsers.sort(function(a,b){var nameA=a.fullname.toLowerCase().trim(),nameB=b.fullname.toLowerCase().trim();return nameA<nameB?-1:nameA>nameB?1:0})}else{var filteredUsers=$.map(users,function(user){user.points=0;var wordsInSearchTerm=term.split(" "),wordsInName=user.fullname.split(" ");wordsInName.splice(1,0,wordsInName.splice(wordsInName.length-1,1)[0]);var allSearchWordsFound=!0;return $(wordsInSearchTerm).each(function(index,searchWord){var trimmedSearchWord=searchWord.toLowerCase().trim(),trimmedSearchWordFound=!1;$(wordsInName).each(function(index,wordInName){var trimmedWordInName=wordInName.toLowerCase().trim();if(0==trimmedWordInName.indexOf(trimmedSearchWord)){if(trimmedSearchWordFound=!0,0==index)var multiplier=.5;else if(1==index)var multiplier=.4;else var multiplier=.1;user.points+=trimmedSearchWord.length/trimmedWordInName.length*multiplier}}),trimmedSearchWordFound||(allSearchWordsFound=!1)}),allSearchWordsFound?user:null});filteredUsers.sort(function(a,b){return b.points-a.points})}callback(filteredUsers)},template:function(user){var wrapper=$("<div/>"),profilePictureEl=$("<img/>",{src:user.profile_picture_url,class:"profile-picture round"}),detailsEl=$("<div/>",{class:"details"}),nameEl=$("<div/>",{class:"name"}).html(user.fullname),emailEl=$("<div/>",{class:"email"}).html(user.email);return user.email?detailsEl.append(nameEl).append(emailEl):(detailsEl.addClass("no-email"),detailsEl.append(nameEl)),wrapper.append(profilePictureEl).append(detailsEl),wrapper.html()},replace:function(user){return" "+self.createTagElement("@"+user.fullname,"ping",user.id)[0].outerHTML+" "}}],{appendTo:".jquery-comments",dropdownClassName:"dropdown autocomplete",maxCount:5,rightEdgeOffset:0}),$.fn.textcomplete.Dropdown.prototype.render=function(zippedData){var contentsHtml=this._buildContents(zippedData),unzippedData=$.map(zippedData,function(d){return d.value});if(zippedData.length){var strategy=zippedData[0].strategy;strategy.id?this.$el.attr("data-strategy",strategy.id):this.$el.removeAttr("data-strategy"),this._renderHeader(unzippedData),this._renderFooter(unzippedData),contentsHtml&&(this._renderContents(contentsHtml),this._fitToBottom(),this._fitToRight(),this._activateIndexedItem()),this._setScroll()}else this.noResultsMessage?this._renderNoResultsMessage(unzippedData):this.shown&&this.deactivate();var top=parseInt(this.$el.css("top"))+self.options.scrollContainer.scrollTop();this.$el.css("top",top);var originalLeft=this.$el.css("left");this.$el.css("left",0);var maxLeft=self.$el.width()-this.$el.outerWidth(),left=Math.min(maxLeft,parseInt(originalLeft));this.$el.css("left",left)}),commentingField},createNavigationElement:function(){var navigationEl=$("<ul/>",{class:"navigation"}),navigationWrapper=$("<div/>",{class:"navigation-wrapper"});navigationEl.append(navigationWrapper);var newest=$("<li/>",{text:this.options.textFormatter(this.options.newestText),"data-sort-key":"newest","data-container-name":"comments"}),oldest=$("<li/>",{text:this.options.textFormatter(this.options.oldestText),"data-sort-key":"oldest","data-container-name":"comments"}),popular=$("<li/>",{text:this.options.textFormatter(this.options.popularText),"data-sort-key":"popularity","data-container-name":"comments"}),attachments=$("<li/>",{text:this.options.textFormatter(this.options.attachmentsText),"data-sort-key":"attachments","data-container-name":"attachments"}),attachmentsIcon=$("<i/>",{class:"fa fa-paperclip"});this.options.attachmentIconURL.length&&(attachmentsIcon.css("background-image",'url("'+this.options.attachmentIconURL+'")'),attachmentsIcon.addClass("image")),attachments.prepend(attachmentsIcon);var dropdownNavigationWrapper=$("<div/>",{class:"navigation-wrapper responsive"}),dropdownNavigation=$("<ul/>",{class:"dropdown"}),dropdownTitle=$("<li/>",{class:"title"}),dropdownTitleHeader=$("<header/>");return dropdownTitle.append(dropdownTitleHeader),dropdownNavigationWrapper.append(dropdownTitle),dropdownNavigationWrapper.append(dropdownNavigation),navigationEl.append(dropdownNavigationWrapper),navigationWrapper.append(newest).append(oldest),dropdownNavigation.append(newest.clone()).append(oldest.clone()),(this.options.enableReplying||this.options.enableUpvoting)&&(navigationWrapper.append(popular),dropdownNavigation.append(popular.clone())),this.options.enableAttachments&&(navigationWrapper.append(attachments),dropdownNavigationWrapper.append(attachments.clone())),this.options.forceResponsive&&this.forceResponsive(),navigationEl},createSpinner:function(){var spinner=$("<div/>",{class:"spinner"}),spinnerIcon=$("<i/>",{class:"fa fa-spinner fa-spin"});return this.options.spinnerIconURL.length&&(spinnerIcon.css("background-image",'url("'+this.options.spinnerIconURL+'")'),spinnerIcon.addClass("image")),spinner.html(spinnerIcon),spinner},createCommentElement:function(commentModel){var commentEl=$("<li/>",{"data-id":commentModel.id,class:"comment"}).data("model",commentModel);commentModel.createdByCurrentUser&&commentEl.addClass("by-current-user"),commentModel.createdByAdmin&&commentEl.addClass("by-admin");var childComments=$("<ul/>",{class:"child-comments"}),commentWrapper=this.createCommentWrapperElement(commentModel);return commentEl.append(commentWrapper),null==commentModel.parent&&commentEl.append(childComments),commentEl},createCommentWrapperElement:function(commentModel){var commentWrapper=$("<div/>",{class:"comment-wrapper"});console.log(commentModel);var profilePicture=this.createProfilePictureElement(commentModel.profilePictureURL,commentModel.profileURL),time=$("<time/>",{text:this.options.timeFormatter(commentModel.created),"data-original":commentModel.created}),nameText=commentModel.createdByCurrentUser?this.options.textFormatter(this.options.youText):commentModel.fullname,name=$("<div/>",{class:"name"});if(commentModel.profileURL){var link=$("<a/>",{href:commentModel.profileURL,text:nameText});name.html(link)}else name.text(nameText);if((commentModel.createdByCurrentUser||commentModel.createdByAdmin)&&name.addClass("highlight-font-bold"),commentModel.parent){var parent=this.commentsById[commentModel.parent];if(parent.parent){var replyTo=$("<span/>",{class:"reply-to",text:parent.fullname}),replyIcon=$("<i/>",{class:"fa fa-share"});this.options.replyIconURL.length&&(replyIcon.css("background-image",'url("'+this.options.replyIconURL+'")'),replyIcon.addClass("image")),replyTo.prepend(replyIcon),name.append(replyTo)}}if(commentModel.isNew){var newTag=$("<span/>",{class:"new highlight-background",text:this.options.newText});name.append(newTag)}var wrapper=$("<div/>",{class:"wrapper"}),content=$("<div/>",{class:"content"}),isAttachment=void 0!=commentModel.fileURL;if(isAttachment){var format=null,type=null;if(commentModel.fileMimeType){var mimeTypeParts=commentModel.fileMimeType.split("/");2==mimeTypeParts.length&&(format=mimeTypeParts[1],type=mimeTypeParts[0])}var link=$("<a/>",{class:"attachment",href:commentModel.fileURL,target:"_blank"});if("image"==type){var image=$("<img/>",{src:commentModel.fileURL});link.html(image)}else if("video"==type){var video=$("<video/>",{src:commentModel.fileURL,type:commentModel.fileMimeType,controls:"controls"});link.html(video)}else{var availableIcons=["archive","audio","code","excel","image","movie","pdf","photo","picture","powerpoint","sound","video","word","zip"],iconClass="fa fa-file-o";availableIcons.indexOf(format)>0?iconClass="fa fa-file-"+format+"-o":availableIcons.indexOf(type)>0&&(iconClass="fa fa-file-"+type+"-o");var fileIcon=$("<i/>",{class:iconClass});this.options.fileIconURL.length&&(fileIcon.css("background-image",'url("'+this.options.fileIconURL+'")'),fileIcon.addClass("image"));var parts=commentModel.fileURL.split("/"),fileName=parts[parts.length-1];fileName=fileName.split("?")[0],fileName=decodeURIComponent(fileName),link.text(fileName),link.prepend(fileIcon)}content.html(link)}else content.html(this.getFormattedCommentContent(commentModel));if(commentModel.modified&&commentModel.modified!=commentModel.created){var editedTime=this.options.timeFormatter(commentModel.modified),edited=$("<time/>",{class:"edited",text:this.options.textFormatter(this.options.editedText)+" "+editedTime,"data-original":commentModel.modified});content.append(edited)}var actions=$("<span/>",{class:"actions"}),separator=$("<span/>",{class:"separator",text:""}),reply=$("<button/>",{class:"action reply",type:"button",text:this.options.textFormatter(this.options.replyText)}),upvoteIcon=$("<i/>",{class:"fa fa-thumbs-up"});this.options.upvoteIconURL.length&&(upvoteIcon.css("background-image",'url("'+this.options.upvoteIconURL+'")'),upvoteIcon.addClass("image"));var upvotes=this.createUpvoteElement(commentModel);if(this.options.enableReplying&&actions.append(reply),this.options.enableUpvoting&&actions.append(upvotes),commentModel.createdByCurrentUser||this.options.currentUserIsAdmin)if(isAttachment&&this.isAllowedToDelete(commentModel.id)){var deleteButton=$("<button/>",{class:"action delete enabled",text:this.options.textFormatter(this.options.deleteText)});actions.append(deleteButton)}else if(!isAttachment&&this.options.enableEditing){var editButton=$("<button/>",{class:"action edit",text:this.options.textFormatter(this.options.editText)});actions.append(editButton)}return actions.children().each(function(index,actionEl){$(actionEl).is(":last-child")||$(actionEl).after(separator.clone())}),wrapper.append(content),wrapper.append(actions),commentWrapper.append(profilePicture).append(time).append(name).append(wrapper),commentWrapper},createUpvoteElement:function(commentModel){var upvoteIcon=$("<i/>",{class:"fa fa-thumbs-up"});return this.options.upvoteIconURL.length&&(upvoteIcon.css("background-image",'url("'+this.options.upvoteIconURL+'")'),upvoteIcon.addClass("image")),$("<button/>",{class:"action upvote"+(commentModel.userHasUpvoted?" highlight-font":"")}).append($("<span/>",{text:commentModel.upvoteCount,class:"upvote-count"})).append(upvoteIcon)},createTagElement:function(text,extraClasses,value){var tagEl=$("<input/>",{class:"tag",type:"button","data-role":"none"});return extraClasses&&tagEl.addClass(extraClasses),tagEl.val(text),tagEl.attr("data-value",value),tagEl},reRenderComment:function(id){var commentModel=this.commentsById[id],self=this;this.$el.find('li.comment[data-id="'+commentModel.id+'"]').each(function(index,commentEl){var commentWrapper=self.createCommentWrapperElement(commentModel);$(commentEl).find(".comment-wrapper").first().replaceWith(commentWrapper)})},reRenderCommentActionBar:function(id){var commentModel=this.commentsById[id],self=this;this.$el.find('li.comment[data-id="'+commentModel.id+'"]').each(function(index,commentEl){var commentWrapper=self.createCommentWrapperElement(commentModel);$(commentEl).find(".actions").first().replaceWith(commentWrapper.find(".actions"))})},reRenderUpvotes:function(id){var commentModel=this.commentsById[id],self=this;this.$el.find('li.comment[data-id="'+commentModel.id+'"]').each(function(index,commentEl){var upvotes=self.createUpvoteElement(commentModel);$(commentEl).find(".upvote").first().replaceWith(upvotes)})},createCssDeclarations:function(){$("head style.jquery-comments-css").remove(),this.createCss(".jquery-comments ul.navigation li.active:after {background: "+this.options.highlightColor+" !important;",NaN),this.createCss(".jquery-comments ul.navigation ul.dropdown li.active {background: "+this.options.highlightColor+" !important;",NaN),this.createCss(".jquery-comments .highlight-background {background: "+this.options.highlightColor+" !important;",NaN),this.createCss(".jquery-comments .highlight-font {color: "+this.options.highlightColor+" !important;}"),this.createCss(".jquery-comments .highlight-font-bold {color: "+this.options.highlightColor+" !important;font-weight: bold;}")},createCss:function(css){var styleEl=$("<style/>",{type:"text/css",class:"jquery-comments-css",text:css});$("head").append(styleEl)},getComments:function(){var self=this;return Object.keys(this.commentsById).map(function(id){return self.commentsById[id]})},getUsers:function(){var self=this;return Object.keys(this.usersById).map(function(id){return self.usersById[id]})},getChildComments:function(parentId){return this.getComments().filter(function(comment){return comment.parent==parentId})},getAttachments:function(){return this.getComments().filter(function(comment){return void 0!=comment.fileURL})},getOutermostParent:function(directParentId){var parentId=directParentId;do{var parentComment=this.commentsById[parentId];parentId=parentComment.parent}while(null!=parentComment.parent);return parentComment},createCommentJSON:function(textarea){var time=(new Date).toISOString();return{id:"c"+(this.getComments().length+1),parent:textarea.attr("data-parent")||null,created:time,modified:time,content:this.getTextareaContent(textarea),pings:this.getPings(textarea),fullname:this.options.textFormatter(this.options.youText),profilePictureURL:this.options.profilePictureURL,createdByCurrentUser:!0,upvoteCount:0,userHasUpvoted:!1}},isAllowedToDelete:function(commentId){if(this.options.enableDeleting){var isAllowedToDelete=!0;return this.options.enableDeletingCommentWithReplies||$(this.getComments()).each(function(index,comment){comment.parent==commentId&&(isAllowedToDelete=!1)}),isAllowedToDelete}return!1},setToggleAllButtonText:function(toggleAllButton,toggle){var self=this,textContainer=toggleAllButton.find("span.text"),caret=toggleAllButton.find(".caret"),showExpandingText=function(){var text=self.options.textFormatter(self.options.viewAllRepliesText),replyCount=toggleAllButton.siblings(".comment").length;text=text.replace("__replyCount__",replyCount),textContainer.text(text)},hideRepliesText=this.options.textFormatter(this.options.hideRepliesText);toggle?(textContainer.text()==hideRepliesText?showExpandingText():textContainer.text(hideRepliesText),caret.toggleClass("up")):textContainer.text()!=hideRepliesText&&showExpandingText()},adjustTextareaHeight:function(textarea,focus){textarea=$(textarea);var rowCount=1==focus?this.options.textareaRowsOnFocus:this.options.textareaRows;do{!function(rows){var height=2.2+1.45*(rows-1);textarea.css("height",height+"em")}(rowCount),rowCount++;var isAreaScrollable=textarea[0].scrollHeight>textarea.outerHeight(),maxRowsUsed=0!=this.options.textareaMaxRows&&rowCount>this.options.textareaMaxRows}while(isAreaScrollable&&!maxRowsUsed)},clearTextarea:function(textarea){textarea.empty().trigger("input")},getTextareaContent:function(textarea,humanReadable){var textareaClone=textarea.clone();textareaClone.find(".reply-to.tag").remove(),textareaClone.find(".tag.hashtag").replaceWith(function(){return humanReadable?$(this).val():"#"+$(this).attr("data-value")}),textareaClone.find(".tag.ping").replaceWith(function(){return humanReadable?$(this).val():"@"+$(this).attr("data-value")});var ce=$("<pre/>").html(textareaClone.html());ce.find("div, p, br").replaceWith(function(){return"\n"+this.innerHTML});var text=ce.text().replace(/^\s+/g,""),text=this.normalizeSpaces(text);return text},getFormattedCommentContent:function(commentModel,replaceNewLines){var html=this.escape(commentModel.content);return html=this.linkify(html),html=this.highlightTags(commentModel,html),replaceNewLines&&(html=html.replace(/(?:\n)/g,"<br>")),html},getPings:function(textarea){return $.map(textarea.find(".ping"),function(el){return parseInt($(el).attr("data-value"))})},moveCursorToEnd:function(el){if(el=$(el)[0],$(el).trigger("input"),$(el).scrollTop(el.scrollHeight),void 0!==window.getSelection&&void 0!==document.createRange){var range=document.createRange();range.selectNodeContents(el),range.collapse(!1);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)}else if(void 0!==document.body.createTextRange){var textRange=document.body.createTextRange();textRange.moveToElementText(el),textRange.collapse(!1),textRange.select()}el.focus()},escape:function(inputText){return $("<pre/>").text(this.normalizeSpaces(inputText)).html()},normalizeSpaces:function(inputText){return inputText.replace(new RegExp("","g")," ")},after:function(times,func){var self=this;return function(){if(0==--times)return func.apply(self,arguments)}},highlightTags:function(commentModel,html){return this.options.enableHashtags&&(html=this.highlightHashtags(commentModel,html)),this.options.enablePinging&&(html=this.highlightPings(commentModel,html)),html},highlightHashtags:function(commentModel,html){var self=this;if(-1!=html.indexOf("#")){var __createTag=function(tag){var tag=self.createTagElement("#"+tag,"hashtag",tag);return tag[0].outerHTML},regex=/(^|\s)#([a-z\d-_]+)/gim;html=html.replace(regex,function($0,$1,$2){return $1+__createTag($2)})}return html},highlightPings:function(commentModel,html){var self=this;if(-1!=html.indexOf("@")){var __createTag=function(user){return self.createTagElement("@"+user.fullname,"ping",user.id)[0].outerHTML},highlightedHtml="";return $(commentModel.pings).each(function(index,id){if(id in self.usersById){var user=self.usersById[id],pingText="@"+user.fullname,endIndex=html.indexOf(pingText)+pingText.length,current=html.slice(0,endIndex);highlightedHtml+=current.replace(pingText,__createTag(user)),html=html.slice(endIndex)}}),highlightedHtml+=html}return html},linkify:function(inputText){var replacedText,replacePattern1,replacePattern2,replacePattern3;if(replacePattern1=/(^|\s)((https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,replacedText=inputText.replace(replacePattern1,'$1<a href="$2" target="_blank">$2</a>'),replacePattern2=/(^|\s)(www\.[\S]+(\b|$))/gim,replacedText=replacedText.replace(replacePattern2,'$1<a href="http://$2" target="_blank">$2</a>'),replacePattern3=/(^|\s)(([a-zA-Z0-9\-\_\.]+)@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,replacedText=replacedText.replace(replacePattern3,'$1<a href="mailto:$2">$2</a>'),(inputText.match(/<a href/g)||[]).length>0){for(var splitInput=inputText.split(/(<\/a>)/g),i=0;i<splitInput.length;i++)null==splitInput[i].match(/<a href/g)&&(splitInput[i]=splitInput[i].replace(replacePattern1,'<a href="$1" target="_blank">$1</a>').replace(replacePattern2,'$1<a href="http://$2" target="_blank">$2</a>').replace(replacePattern3,'<a href="mailto:$1">$1</a>'));return splitInput.join("")}return replacedText},waitUntil:function(condition,callback){var self=this;condition()?callback():setTimeout(function(){self.waitUntil(condition,callback)},100)},applyInternalMappings:function(commentJSON){var invertedMappings={},mappings=this.options.fieldMappings;for(var prop in mappings)mappings.hasOwnProperty(prop)&&(invertedMappings[mappings[prop]]=prop);return this.applyMappings(invertedMappings,commentJSON)},applyExternalMappings:function(commentJSON){var mappings=this.options.fieldMappings;return this.applyMappings(mappings,commentJSON)},applyMappings:function(mappings,commentJSON){var result={};for(var key1 in commentJSON)if(key1 in mappings){var key2=mappings[key1];result[key2]=commentJSON[key1]}return result}};$.fn.comments=function(options){return this.each(function(){var comments=Object.create(Comments);$.data(this,"comments",comments),comments.init(options||{},this)})}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h="Close",i="BeforeClose",l="MarkupParse",m="Open",n="Change",o="mfp",p="."+o,q="mfp-ready",r="mfp-removing",s="mfp-prevent-close",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement("div");return f.className="mfp-"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace("%title%",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1};t.prototype={constructor:t,init:function(){var c=navigator.appVersion;b.isLowIE=b.isIE8=document.all&&!document.addEventListener,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},open:function(c){var e;if(!1===c.isObj){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f="",c.mainEl&&c.mainEl.length?b.ev=c.mainEl.eq(0):b.ev=d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos="auto"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x("bg").on("click"+p,function(){b.close()}),b.wrap=x("wrap").attr("tabindex",-1).on("click"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x("container",b.wrap)),b.contentContainer=x("content"),b.st.preloader&&(b.preloader=x("preloader",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b["init"+j].call(b)}y("BeforeOpen"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=" mfp-close-btn-in"):b.wrap.append(z())),b.st.alignTop&&(f+=" mfp-align-top"),b.fixedContentPos?b.wrap.css({overflow:b.st.overflowY,overflowX:"hidden",overflowY:b.st.overflowY}):b.wrap.css({top:v.scrollTop(),position:"absolute"}),(!1===b.st.fixedBgPos||"auto"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:d.height(),position:"absolute"}),b.st.enableEscapeKey&&d.on("keyup"+p,function(a){27===a.keyCode&&b.close()}),v.on("resize"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=" mfp-auto-cursor"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a("body, html").css("overflow","hidden"):n.overflow="hidden");var r=b.st.mainClass;return b.isIE7&&(r+=" mfp-ie7"),r&&b._addClassToMFP(r),b.updateItemHTML(),y("BuildControls"),a("html").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on("focusin"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},close:function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){y(h);var c=r+" "+q+" ";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+" "),b._removeClassFromMFP(c),b.fixedContentPos){var e={marginRight:""};b.isIE7?a("body, html").css("overflow",""):e.overflow="",a("html").css(e)}d.off("keyup.mfp focusin"+p),b.ev.off(p),b.wrap.attr("class","mfp-wrap").removeAttr("style"),b.bgOverlay.attr("class","mfp-bg"),b.container.attr("class","mfp-container"),!b.st.showCloseBtn||b.st.closeBtnInside&&!0!==b.currTemplate[b.currItem.type]||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b.st.autoFocusLast&&b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y("AfterClose")},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css("height",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css("height",b.wH),y("Resize")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y("BeforeChange",[b.currItem?b.currItem.type:"",d]),b.currItem=c,!b.currTemplate[d]){var f=!!b.st[d]&&b.st[d].markup;y("FirstMarkupParse",f),b.currTemplate[d]=!f||a(f)}e&&e!==c.type&&b.container.removeClass("mfp-"+e+"-holder");var g=b["get"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y("AfterChange")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&!0===b.currTemplate[c]?b.content.find(".mfp-close").length||b.content.append(z()):b.content=a:b.content="",y("BeforeAppend"),b.container.addClass("mfp-"+c+"-holder"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass("mfp-"+f[g])){d=f[g];break}e.src=e.el.attr("data-mfp-src"),e.src||(e.src=e.el.attr("href"))}return e.type=d||b.st.type||"inline",e.index=c,e.parsed=!0,b.items[c]=e,y("ElementParse",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={})
;var e="click.magnificPopup";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){if((void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick)||!(2===c.which||c.ctrlKey||c.metaKey||c.altKey||c.shiftKey)){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(v.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass("mfp-s-"+c),d||"loading"!==a||(d=b.st.tLoading);var e={status:a,text:d};y("UpdateStatus",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find("a").on("click",function(a){a.stopImmediatePropagation()}),b.container.addClass("mfp-s-"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass("mfp-close")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){return c.target===b.wrap[0]||a.contains(b.wrap[0],c.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(c,d){if(void 0===d||!1===d)return!0;if(e=c.split("_"),e.length>1){var f=b.find(p+"-"+e[0]);if(f.length>0){var g=e[1];"replaceWith"===g?f[0]!==d[0]&&f.replaceWith(d):"img"===g?f.is("img")?f.attr("src",d):f.replaceWith(a("<img>").attr("src",d).attr("class",f.attr("class"))):f.attr(e[1],d)}}else b.find(p+"-"+c).html(d)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},a.fn.magnificPopup=function(c){A();var d=a(this);if("string"==typeof c)if("open"===c){var e,f=u?d.data("magnificPopup"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data("magnificPopup",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F="inline",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){b.types.push(F),w(h+"."+F,function(){G()})},getInline:function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C="mfp-"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus("ready")}else b.updateStatus("error",e.tNotFound),f=a("<div>");return c.inlineElement=f,f}return b.updateStatus("ready"),b._parseMarkup(d,{},c),d}}});var H,I="ajax",J=function(){H&&a(document.body).removeClass(H)},K=function(){J(),b.req&&b.req.abort()};a.magnificPopup.registerModule(I,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(I),H=b.st.ajax.cursor,w(h+"."+I,K),w("BeforeChange."+I,K)},getAjax:function(c){H&&a(document.body).addClass(H),b.updateStatus("loading");var d=a.extend({url:c.src,success:function(d,e,f){var g={data:d,xhr:f};y("ParseAjax",g),b.appendContent(a(g.data),I),c.finished=!0,J(),b._setFocus(),setTimeout(function(){b.wrap.addClass(q)},16),b.updateStatus("ready"),y("AjaxContentAdded")},error:function(){J(),c.finished=c.loadError=!0,b.updateStatus("error",b.st.ajax.tError.replace("%url%",c.src))}},b.st.ajax.settings);return b.req=a.ajax(d),""}}});var L,M=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||""}return""};a.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var c=b.st.image,d=".image";b.types.push("image"),w(m+d,function(){"image"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off("resize"+p)}),w("Resize"+d,b.resizeImage),b.isLowIE&&w("AfterChange",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css("padding-top"),10)+parseInt(a.img.css("padding-bottom"),10)),a.img.css("max-height",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y("ImageHasSize",a),a.imgHidden&&(b.content&&b.content.removeClass("mfp-loading"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){L&&clearInterval(L),L=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(L),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("ready")),c.hasSize=!0,c.loaded=!0,y("ImageLoadComplete")):(e++,200>e?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("error",h.tError.replace("%url%",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(".mfp-img");if(i.length){var j=document.createElement("img");j.className="mfp-img",c.el&&c.el.find("img").length&&(j.alt=c.el.find("img").attr("alt")),c.img=a(j).on("load.mfploader",f).on("error.mfploader",g),j.src=c.src,i.is("img")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:M(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(L&&clearInterval(L),c.loadError?(d.addClass("mfp-loading"),b.updateStatus("error",h.tError.replace("%url%",c.src))):(d.removeClass("mfp-loading"),b.updateStatus("ready")),d):(b.updateStatus("loading"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass("mfp-loading"),b.findImageSize(c)),d)}}});var N,O=function(){return void 0===N&&(N=void 0!==document.createElement("p").style.MozTransform),N};a.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(a){return a.is("img")?a:a.find("img")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=".zoom";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),d="all "+c.duration/1e3+"s "+c.easing,e={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},f="transition";return e["-webkit-"+f]=e["-moz-"+f]=e["-o-"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css("visibility","visible")};w("BuildControls"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css("visibility","hidden"),!(a=b._getItemToZoom()))return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y("ZoomAnimationEnded")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(!(a=b._getItemToZoom()))return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css("visibility","hidden"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return"image"===b.currItem.type},_getItemToZoom:function(){return!!b.currItem.hasSize&&b.currItem.img},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css("padding-top"),10),g=parseInt(d.css("padding-bottom"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(u?d.innerHeight():d[0].offsetHeight)-g-f};return O()?h["-moz-transform"]=h.transform="translate("+e.left+"px,"+e.top+"px)":(h.left=e.left,h.top=e.top),h}}});var P="iframe",R=function(a){if(b.currTemplate[P]){var c=b.currTemplate[P].find("iframe");c.length&&(a||(c[0].src="//about:blank"),b.isIE8&&c.css("display",a?"block":"none"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){b.types.push(P),w("BeforeChange",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(h+"."+P,function(){R()})},getIframe:function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){return e.indexOf(this.index)>-1?(this.id&&(e="string"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace("%id%",e),!1):void 0});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus("ready"),d}}});var S=function(a){var c=b.items.length;return a>c-1?a-c:0>a?c+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var c=b.st.gallery,e=".mfp-gallery";return b.direction=!0,!(!c||!c.enabled)&&(f+=" mfp-gallery",w(m+e,function(){c.navigateByImgClick&&b.wrap.on("click"+e,".mfp-img",function(){return b.items.length>1?(b.next(),!1):void 0}),d.on("keydown"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w("UpdateStatus"+e,function(a,c){c.text&&(c.text=T(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?T(c.tCounter,f.index,g):""}),w("BuildControls"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,"left")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,"right")).addClass(s);e.click(function(){b.prev()}),f.click(function(){b.next()}),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void w(h+e,function(){d.off(e),b.wrap.off("click"+e),b.arrowRight=b.arrowLeft=null}))},next:function(){b.direction=!0,b.index=S(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=S(b.index-1),b.updateItemHTML()},goTo:function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},preloadNearbyImages:function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},_preloadItem:function(c){if(c=S(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y("LazyLoad",d),"image"===d.type&&(d.img=a('<img class="mfp-img" />').on("load.mfploader",function(){d.hasSize=!0}).on("error.mfploader",function(){d.hasSize=!0,d.loadError=!0,y("LazyLoadError",d)}).attr("src",d.src)),d.preloaded=!0}}}});var U="retina";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\.\w+$/,function(a){return"@2x"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=b.st.retina,c=a.ratio;(c=isNaN(c)?c():c)>1&&(w("ImageHasSize."+U,function(a,b){b.img.css({"max-width":b.img[0].naturalWidth/c,width:"100%"})}),w("ElementParse."+U,function(b,d){d.src=a.replaceSrc(d,c)}))}}}}),A()}),function($){var _previousResizeWidth=-1,_updateTimeout=-1,_rows=function(elements){var $elements=$(elements),lastTop=null,rows=[];return $elements.each(function(){var $that=$(this),top=$that.offset().top-_parse($that.css("margin-top")),lastRow=rows.length>0?rows[rows.length-1]:null;null===lastRow?rows.push($that):Math.floor(Math.abs(lastTop-top))<=1?rows[rows.length-1]=lastRow.add($that):rows.push($that),lastTop=top}),rows},_parse=function(value){return parseFloat(value)||0},matchHeight=$.fn.matchHeight=function(byRow){if("remove"===byRow){var that=this;return this.css("height",""),$.each(matchHeight._groups,function(key,group){group.elements=group.elements.not(that)}),this}return this.length<=1?this:(byRow=void 0===byRow||byRow,matchHeight._groups.push({elements:this,byRow:byRow}),matchHeight._apply(this,byRow),this)};matchHeight._groups=[],matchHeight._throttle=80,matchHeight._maintainScroll=!1,matchHeight._beforeUpdate=null,matchHeight._afterUpdate=null,matchHeight._apply=function(elements,byRow){var $elements=$(elements),rows=[$elements],scrollTop=$(window).scrollTop(),htmlHeight=$("html").outerHeight(!0),$hiddenParents=$elements.parents().filter(":hidden");return $hiddenParents.css("display","block"),byRow&&($elements.each(function(){var $that=$(this),display="inline-block"===$that.css("display")?"inline-block":"block";$that.data("style-cache",$that.attr("style")),$that.css({display:display,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px"})}),rows=_rows($elements),$elements.each(function(){var $that=$(this);$that.attr("style",$that.data("style-cache")||"").css("height","")})),$.each(rows,function(key,row){var $row=$(row),maxHeight=0;byRow&&$row.length<=1||($row.each(function(){var $that=$(this),display="inline-block"===$that.css("display")?"inline-block":"block";$that.css({display:display,height:""}),$that.outerHeight(!1)>maxHeight&&(maxHeight=$that.outerHeight(!1)),$that.css("display","")}),$row.each(function(){var $that=$(this),verticalPadding=0;"border-box"!==$that.css("box-sizing")&&(verticalPadding+=_parse($that.css("border-top-width"))+_parse($that.css("border-bottom-width")),verticalPadding+=_parse($that.css("padding-top"))+_parse($that.css("padding-bottom"))),$that.css("height",maxHeight-verticalPadding)}))}),$hiddenParents.css("display",""),matchHeight._maintainScroll&&$(window).scrollTop(scrollTop/htmlHeight*$("html").outerHeight(!0)),this},matchHeight._applyDataApi=function(){var groups={};$("[data-match-height], [data-mh]").each(function(){var $this=$(this),groupId=$this.attr("data-match-height")||$this.attr("data-mh");groups[groupId]=groupId in groups?groups[groupId].add($this):$this}),$.each(groups,function(){this.matchHeight(!0)})};var _update=function(event){matchHeight._beforeUpdate&&matchHeight._beforeUpdate(event,matchHeight._groups),$.each(matchHeight._groups,function(){matchHeight._apply(this.elements,this.byRow)}),matchHeight._afterUpdate&&matchHeight._afterUpdate(event,matchHeight._groups)};matchHeight._update=function(throttle,event){if(event&&"resize"===event.type){var windowWidth=$(window).width();if(windowWidth===_previousResizeWidth)return;_previousResizeWidth=windowWidth}throttle?-1===_updateTimeout&&(_updateTimeout=setTimeout(function(){_update(event),_updateTimeout=-1},matchHeight._throttle)):_update(event)},$(matchHeight._applyDataApi),$(window).bind("load",function(event){matchHeight._update(!1,event)}),$(window).bind("resize orientationchange",function(event){matchHeight._update(!0,event)})}(jQuery),function($){$.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var that=this;this.element.is("input")?(this.tagList=$("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.addClass("tagit-hidden-field")):this.tagList=this.element.find("ul, ol").andSelf().last(),this.tagInput=$('<input type="text" />').addClass("ui-widget-content"),this.options.readOnly&&this.tagInput.attr("disabled","disabled"),this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex),this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText),this.options.autocomplete.source||(this.options.autocomplete.source=function(search,showChoices){var filter=search.term.toLowerCase(),choices=$.grep(this.options.availableTags,function(element){return 0===element.toLowerCase().indexOf(filter)});this.options.allowDuplicates||(choices=this._subtractArray(choices,this.assignedTags())),showChoices(choices)}),this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(event,ui){that._showAutocomplete()}),void 0===this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0)),$.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=$.proxy(this.options.autocomplete.source,this)),$.isFunction(this.options.tagSource)&&(this.options.tagSource=$.proxy(this.options.tagSource,this)),this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append($('<li class="tagit-new"></li>').append(this.tagInput)).click(function(e){var target=$(e.target);if(target.hasClass("tagit-label")){var tag=target.closest(".tagit-choice");tag.hasClass("removed")||that._trigger("onTagClicked",e,{tag:tag,tagLabel:that.tagLabel(tag)})}else that.tagInput.focus()});var addedExistingFromSingleFieldNode=!1;if(this.options.singleField)if(this.options.singleFieldNode){var node=$(this.options.singleFieldNode),tags=node.val().split(this.options.singleFieldDelimiter);node.val(""),$.each(tags,function(index,tag){that.createTag(tag,null,!0),addedExistingFromSingleFieldNode=!0})}else this.options.singleFieldNode=$('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode);if(addedExistingFromSingleFieldNode||this.tagList.children("li").each(function(){$(this).hasClass("tagit-new")||(that.createTag($(this).text(),$(this).attr("class"),!0),$(this).remove())}),this.tagInput.keydown(function(event){if(event.which==$.ui.keyCode.BACKSPACE&&""===that.tagInput.val()){var tag=that._lastTag();!that.options.removeConfirmation||tag.hasClass("remove")?that.removeTag(tag):that.options.removeConfirmation&&tag.addClass("remove ui-state-highlight")}else that.options.removeConfirmation&&that._lastTag().removeClass("remove ui-state-highlight");(event.which===$.ui.keyCode.COMMA&&!1===event.shiftKey||event.which===$.ui.keyCode.ENTER||event.which==$.ui.keyCode.TAB&&""!==that.tagInput.val()||event.which==$.ui.keyCode.SPACE&&!0!==that.options.allowSpaces&&('"'!=$.trim(that.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==$.trim(that.tagInput.val()).charAt(0)&&'"'==$.trim(that.tagInput.val()).charAt($.trim(that.tagInput.val()).length-1)&&$.trim(that.tagInput.val()).length-1!=0))&&(event.which===$.ui.keyCode.ENTER&&""===that.tagInput.val()||event.preventDefault(),that.options.autocomplete.autoFocus&&that.tagInput.data("autocomplete-open")||(that.tagInput.autocomplete("close"),that.createTag(that._cleanedInput())))}).blur(function(e){that.tagInput.data("autocomplete-open")||that.createTag(that._cleanedInput())}),this.options.availableTags||this.options.tagSource||this.options.autocomplete.source){var autocompleteOptions={select:function(event,ui){return that.createTag(ui.item.value),!1}};$.extend(autocompleteOptions,this.options.autocomplete),autocompleteOptions.source=this.options.tagSource||autocompleteOptions.source,this.tagInput.autocomplete(autocompleteOptions).bind("autocompleteopen.tagit",function(event,ui){that.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose.tagit",function(event,ui){that.tagInput.data("autocomplete-open",!1)}),this.tagInput.autocomplete("widget").addClass("tagit-autocomplete")}},destroy:function(){return $.Widget.prototype.destroy.call(this),this.element.unbind(".tagit"),this.tagList.unbind(".tagit"),this.tagInput.removeData("autocomplete-open"),this.tagList.removeClass(["tagit","ui-widget","ui-widget-content","ui-corner-all","tagit-hidden-field"].join(" ")),this.element.is("input")?(this.element.removeClass("tagit-hidden-field"),this.tagList.remove()):(this.element.children("li").each(function(){$(this).hasClass("tagit-new")?$(this).remove():($(this).removeClass(["tagit-choice","ui-widget-content","ui-state-default","ui-state-highlight","ui-corner-all","remove","tagit-choice-editable","tagit-choice-read-only"].join(" ")),$(this).text($(this).children(".tagit-label").text()))}),this.singleFieldNode&&this.singleFieldNode.remove()),this},_cleanedInput:function(){return $.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var that=this,tags=[];return this.options.singleField?(tags=$(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===tags[0]&&(tags=[])):this._tags().each(function(){tags.push(that.tagLabel(this))}),tags},_updateSingleTagsField:function(tags){$(this.options.singleFieldNode).val(tags.join(this.options.singleFieldDelimiter)).trigger("change")},_subtractArray:function(a1,a2){for(var result=[],i=0;i<a1.length;i++)-1==$.inArray(a1[i],a2)&&result.push(a1[i]);return result},tagLabel:function(tag){return this.options.singleField?$(tag).find(".tagit-label:first").text():$(tag).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(name){var that=this,tag=null;return this._tags().each(function(i){if(that._formatStr(name)==that._formatStr(that.tagLabel(this)))return tag=$(this),!1}),tag},_isNew:function(name){return!this._findTagByLabel(name)},_formatStr:function(str){return this.options.caseSensitive?str:$.trim(str.toLowerCase())},_effectExists:function(name){return Boolean($.effects&&($.effects[name]||$.effects.effect&&$.effects.effect[name]))},createTag:function(value,additionalClass,duringInitialization){var that=this;if(value=$.trim(value),this.options.preprocessTag&&(value=this.options.preprocessTag(value)),""===value)return!1;if(!this.options.allowDuplicates&&!this._isNew(value)){var existingTag=this._findTagByLabel(value);return!1!==this._trigger("onTagExists",null,{existingTag:existingTag,duringInitialization:duringInitialization})&&this._effectExists("highlight")&&existingTag.effect("highlight"),!1}if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:duringInitialization}),!1;var label=$(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(value),tag=$("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(additionalClass).append(label);if(this.options.readOnly)tag.addClass("tagit-choice-read-only");else{tag.addClass("tagit-choice-editable");var removeTagIcon=$("<span></span>").addClass("ui-icon ui-icon-close"),removeTag=$('<a><span class="text-icon"></span></a>').addClass("tagit-close").append(removeTagIcon).click(function(e){that.removeTag(tag)});tag.append(removeTag)}if(!this.options.singleField){var escapedValue=label.html();tag.append('<input type="hidden" value="'+escapedValue+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />')}if(!1!==this._trigger("beforeTagAdded",null,{tag:tag,tagLabel:this.tagLabel(tag),duringInitialization:duringInitialization})){if(this.options.singleField){var tags=this.assignedTags();tags.push(value),this._updateSingleTagsField(tags)}this._trigger("onTagAdded",null,tag),this.tagInput.val(""),this.tagInput.parent().before(tag),this._trigger("afterTagAdded",null,{tag:tag,tagLabel:this.tagLabel(tag),duringInitialization:duringInitialization}),this.options.showAutocompleteOnFocus&&!duringInitialization&&setTimeout(function(){that._showAutocomplete()},0)}},removeTag:function(tag,animate){if(animate=void 0===animate?this.options.animate:animate,tag=$(tag),this._trigger("onTagRemoved",null,tag),!1!==this._trigger("beforeTagRemoved",null,{tag:tag,tagLabel:this.tagLabel(tag)})){if(this.options.singleField){var tags=this.assignedTags(),removedTagLabel=this.tagLabel(tag);tags=$.grep(tags,function(el){return el!=removedTagLabel}),this._updateSingleTagsField(tags)}if(animate){tag.addClass("removed");var hide_args=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],thisTag=this;hide_args.push(function(){tag.remove(),thisTag._trigger("afterTagRemoved",null,{tag:tag,tagLabel:thisTag.tagLabel(tag)})}),tag.fadeOut("fast").hide.apply(tag,hide_args).dequeue()}else tag.remove(),this._trigger("afterTagRemoved",null,{tag:tag,tagLabel:this.tagLabel(tag)})}},removeTagByLabel:function(tagLabel,animate){var toRemove=this._findTagByLabel(tagLabel);if(!toRemove)throw"No such tag exists with the name '"+tagLabel+"'";this.removeTag(toRemove,animate)},removeAll:function(){var that=this;this._tags().each(function(index,tag){that.removeTag(tag,!1)})}})}(jQuery),window.UM_Gallery_Pro={},function(window,$,app){function equalHeight(){$(".um-gallery-album-list .um-gallery-grid-item img,.um-gallery-grid img").matchHeight()}equalHeight();Dropzone.autoDiscover=!1;var myDropzone="";app.current_album=0,app.total_process=0,app.total_processed=0,app.init=function(){app.current_photo_id=0,app.events()},app.removeURLParameter=function(url,parameter){var urlParts=url.split("?");if(urlParts.length>=2){for(var urlBase=urlParts.shift(),queryString=urlParts.join("?"),prefix=encodeURIComponent(parameter)+"=",parts=queryString.split(/[&;]/g),i=parts.length;i-- >0;)-1!==parts[i].lastIndexOf(prefix,0)&&parts.splice(i,1);url=urlBase+"?"+parts.join("&")}return url},app.events=function(){function URLToArray(url){for(var request={},pairs=url.substring(url.indexOf("?")+1).split("&"),i=0;i<pairs.length;i++)if(pairs[i]){var pair=pairs[i].split("=");request[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return request}function getLoadMoreUrl(){var page=$container.data("page"),query=$container.data("query_args");query=jQuery.param(query),page+=1;var query2=URLToArray(query);return query2.page=page,query=jQuery.param(query2),um_gallery_config.ajax_url+"?action=um_gallery_get_more_photos&page="+page+"&"+query}var msnry,$container=jQuery(".um-gallery-container"),parent_id=$container.data("gallery-id");$container&&($container.imagesLoaded(function(){1==$container.data("masonry")&&(msnry=new Masonry(document.querySelector(".um-gallery-container"),{itemSelector:".um-gallery-item"}))}),1==$container.data("load-more")&&($container.infiniteScroll({path:".pagination__next",append:!1,path:getLoadMoreUrl,responseType:"text",history:!1,loading:{finishedMsg:"No more pages to load."}},function(newElements){var $newElems=$(newElements).css({opacity:0});$newElems.imagesLoaded(function(){$newElems.animate({opacity:1}),$container.masonry("appended",$newElems,!0),equalHeight()})}),$container.on("load.infiniteScroll",function(event,response){var page=$container.data("page");page+=1,$container.data("page",page);var data=JSON.parse(response);$.each(data.images,function(key,value){window["um_gallery_images"+parent_id][key]=value}),$.each(data.users,function(key,value){window["um_gallery_users"+parent_id][key]=value});var $posts=$(data.html).find(".um-gallery-item");if(!$posts.length)return $container.data("um-gallery-last-load",1),void $container.infiniteScroll("destroy");$posts.imagesLoaded(function(){$container.infiniteScroll("appendItems",$posts),equalHeight(),1==$container.data("masonry")&&msnry.appended($posts)})}))),"function"==typeof comments&&jQuery("#um-gallery-comments").comments(),jQuery(document).on("click",".um-gallery-form,.um-gallery-edit-link",function(event){event.preventDefault();var id=$(this).data("id"),parent_id=$(this).data("parent_id");app._um_gallery_album_form(id,parent_id)}),jQuery(document).on("click",".um-gallery-full-screener",app.toggleFullScreen),jQuery(document).on("click",".um-gallery-pro-action-buttons ul li a",function(event){event.preventDefault(),jQuery(".um-gallery-pro-action-buttons ul li").removeClass("active"),jQuery(this).parent("li").addClass("active");var tab=$(this).attr("href");tab=tab.split("#")[1],app.um_gallery_change_tab(tab)}),jQuery(document).on("click",".um-gallery-add-video",function(event){event.preventDefault();var obj=$("#um-gallery-pro-video-insert #video_url"),url=obj.val();if(url){var video_type=app.um_gallery_get_video_type(url);if(video_type.type){var thumbnail="",video_id="",content="",video_holder=jQuery(".um-gallery-pro-video-list");"youtube"==video_type.type&&(video_id=video_type.id,thumbnail="//i.ytimg.com/vi/"+video_id+"/hqdefault.jpg",content='<div class="um-gallery-video-items"><div class="um-gallery-video-image"><img src="'+thumbnail+'" /></div><input type="hidden" class="um-gallery-video-url" name="video[]" value="'+url+'" />',video_holder.append(content)),"vimeo"==video_type.type&&(thumbnail="https://i.vimeocdn.com/video/"+video_type.id+"_640.jpg",content='<div class="um-gallery-video-items"><div class="um-gallery-video-image"><img src="'+thumbnail+'" /></div><input type="hidden" class="um-gallery-video-url" name="video[]" value="'+url+'" />',video_holder.append(content)),"hudl"===video_type.type&&$.ajax({type:"GET",url:um_gallery_config.ajax_url,data:{action:"um_gallery_fetch_remote_thumbnail",videoType:video_type.type,videoUrl:url},success:function(data){thumbnail=data.thumbnail,content='<div class="um-gallery-video-items"><div class="um-gallery-video-image"><img src="'+thumbnail+'" /></div><input type="hidden" class="um-gallery-video-url" name="video[]" value="'+url+'" />',video_holder.append(content)}}),obj.val("")}}}),
jQuery(document).on("click","#um-gallery-caption-edit,.um-gallery-quick-edit",function(event){event.preventDefault();$(this).data("id");$(".um-user-gallery-modify").slideDown(500),$(".um-user-gallery-caption,#um-gallery-caption-edit").slideUp(500)}),jQuery(document).on("click","#um-gallery-save",function(event){event.preventDefault();var id=$(this).data("id"),type=$(this).data("type"),parent_id=$(this).data("parent_id");"album"===type&&app._um_gallery_album_save(id,parent_id)}),jQuery(document).on("click",".um-delete-album",function(event){event.preventDefault();var id=$(this).data("id");confirm(um_gallery_config.confirm_delete)&&app._um_gallery_album_delete(id)}),jQuery(document).on("click",".um-gallery-delete-item",function(event){event.preventDefault();var id=jQuery(this).data("id"),obj=(jQuery(this).closest("div[data-gallery-id]").data("gallery-id"),jQuery(this));confirm(um_gallery_config.confirm_delete)&&jQuery.ajax({method:"POST",url:um_gallery_config.ajax_url,data:{action:"sp_gallery_um_delete",id:id,album_id:um_gallery_config.album_id},success:function(result){obj.closest(".um-gallery-item").slideUp().remove(),equalHeight()}})}),jQuery(document).on("click",".um-gallery-close,.um-gallery-cancel",function(event){event.preventDefault(),jQuery.magnificPopup.close()}),jQuery(document).on("click","#savePhoto",function(event){event.preventDefault();var id=$("#um-gallery-modal").data("id"),parent_id=$("#um-gallery-modal").data("gallery-id");app._um_gallery_edit_photo(id,parent_id)}),jQuery(document).on("click","#cancelPhoto",function(event){event.preventDefault(),$(".um-user-gallery-modify").slideUp(500),$(".um-user-gallery-caption,#um-gallery-caption-edit").slideDown(500)}),jQuery(document).on("click",".um-gallery-open-photo",function(event){event.preventDefault();var id=jQuery(this).data("id"),parent_id=jQuery(this).closest("div[data-gallery-id]").data("gallery-id");app._um_gallery_open_photo(id,parent_id)}),jQuery(document).on("click",".aqm-delete-gallery-photo",function(e){e.preventDefault(),jQuery(".um-user-gallery-normal").slideUp(500),jQuery(".um-user-gallery-edit").slideDown(600)}),$(document).on("click",".um-user-gallery-confirm",function(e){e.preventDefault();var option=$(this).data("option");if("no"===option)$(".um-user-gallery-normal").slideDown(500),$(".um-user-gallery-edit").slideUp(600);else if("yes"===option){var id=$("#um-gallery-modal").data("id"),parent_id=$("#um-gallery-modal").data("parent_id");app._um_gallery_photo_delete(id,parent_id)}}),jQuery(document).on("click",".um-user-gallery-arrow a",function(event){event.preventDefault();var previous,next,id=jQuery("#um-gallery-modal").data("id"),parent_id=jQuery(this).closest("div[data-gallery-id]").data("gallery-id"),direction=$(this).data("direction"),adjacent_id="",ids=[];jQuery.each(window["um_gallery_images_"+parent_id],function(key,value){ids.push(key)}),jQuery.each(ids,function(i,data){data==id&&(next=i>0?ids[i-1]:ids[ids.length-1],previous=i+1<ids.length?ids[i+1]:ids[0])}),"left"===direction&&(adjacent_id=previous,app._um_load_image(adjacent_id,parent_id)),"right"===direction&&(adjacent_id=next,app._um_load_image(adjacent_id,parent_id))}),jQuery(document).on("keydown",function(e){if(jQuery(".mfp-wrap #um-gallery-modal").length){var adjacent_id;if("input"!==e.target.tagName.toLowerCase()&&"textarea"!==e.target.tagName.toLowerCase()){var id=jQuery("#um-gallery-modal").data("id"),parent_id=jQuery("#um-gallery-modal").data("gallery-id");37==e.keyCode?(adjacent_id=jQuery("#um-gallery-item-"+id).closest(".um-gallery-item").prev().find(".um-gallery-open-photo").data("id"),app._um_load_image(adjacent_id,parent_id)):39==e.keyCode&&(adjacent_id=jQuery("#um-gallery-item-"+id).closest(".um-gallery-item").next().find(".um-gallery-open-photo").data("id"),app._um_load_image(adjacent_id,parent_id))}}})},app._um_gallery_progress=function(processed){app.total_processed=app.total_processed+processed,100===Math.round(app.total_processed/app.total_process*100)&&app.current_album&&(jQuery(".um-gallery-spinner").hide(),0!==um_gallery_config.layout_mode&&um_gallery_config.layout_mode||app._um_gallery_get_album_item(app.current_album),um_gallery_config.closeModalAfterSave&&jQuery.magnificPopup.close(),app.current_album=0,app.total_process=0,app.total_processed=0)},app._um_gallery_album_save=function(id,parent_id){app.total_process=1,app.total_processed=0,jQuery(".um-gallery-spinner").fadeIn();var album_name=jQuery("#album_name").val(),album_description=jQuery("#album_description").val(),album_privacy=jQuery("#album_privacy").val(),file_added=!1;myDropzone.files.length>0&&(app.total_process=app.total_process+parseInt(myDropzone.files.length),file_added=!0),jQuery(".um-gallery-video-items input").length&&jQuery(".um-gallery-video-items input").each(function(){app.total_process=app.total_process+1}),jQuery(".um-gallery-message").html("").slideUp(),jQuery.ajax({type:"post",url:um_gallery_config.ajax_url,data:{action:"um_gallery_album_update",id:id,album_name:album_name,album_description:album_description,album_privacy:album_privacy,security:um_gallery_config.nonce},cache:!1,success:function(response){var file_response,html;if(jQuery(".um-gallery-none").hide(),app.current_album=response.id,app._um_gallery_progress(1),response.id){if(jQuery("#um-gallery-save").data("id",response.id),jQuery(".um-gallery-video-items input").length){var videos=[];jQuery(".um-gallery-video-items input").each(function(){videos.push(jQuery(this).val())}),jQuery.ajax({type:"post",url:um_gallery_config.ajax_url,data:{action:"um_gallery_add_videos",album_id:response.id,videos:videos,security:um_gallery_config.nonce},cache:!1,success:function(response){if(jQuery(".um-gallery-video-items input").remove(),jQuery(".um-gallery-pro-video-list").html(""),!0===response.success){void 0!==window["um_gallery_images_"+parent_id]&&(window["um_gallery_images_"+parent_id]=response.data.gallery_images),app._um_gallery_progress(videos.length);var thumbnail=app.get_video_thumbnail(response.data.video_url);if(!jQuery("#um-photo-"+response.data.id).length){var source=document.getElementById("um_gallery_item_block").innerHTML,data={id:response.data.id,media_url:response.data.video_url,media_image_url:thumbnail},template=Handlebars.compile(source);html=template(data),jQuery(".um-gallery-grid").prepend(html),equalHeight()}}}})}1==file_added?(myDropzone.on("sending",function(file,xhr,formData){formData.append("album_id",response.id),formData.append("action","um_gallery_photo_upload")}),myDropzone.processQueue(),myDropzone.on("complete",function(file){app._um_gallery_progress(1),file_response=file.xhr.response,file_response=jQuery.parseJSON(file_response);var source=document.getElementById("um_gallery_item_block").innerHTML,data={id:file_response.id,media_url:file_response.image_src,media_image_url:file_response.thumb},template=Handlebars.compile(source);html=template(data),myDropzone.removeFile(file),jQuery(".um-gallery-grid").prepend(html),equalHeight(),void 0!==window["um_gallery_images_"+parent_id]&&(window["um_gallery_images_"+parent_id]=file_response.gallery_images)})):!0===response.new&&app._um_gallery_get_album_item(response.id)}}})},app._um_gallery_get_album_item=function(id){jQuery.ajax({type:"get",url:um_gallery_config.ajax_url,data:{action:"um_gallery_get_album_item",album_id:id,security:um_gallery_config.nonce},cache:!1,success:function(response){jQuery("#um-album-"+id).length?jQuery("#um-album-"+id).replaceWith(response):jQuery(".um-gallery-album-list").prepend(response),equalHeight()}})},app._um_gallery_edit_photo=function(id,parent_id){var formData=jQuery("#um-gallery-photo-form").serializeArray();jQuery.ajax({type:"post",url:um_gallery_config.ajax_url,data:formData,cache:!1,success:function(response){window["um_gallery_images_"+parent_id]=response,app._um_load_image(id,parent_id)}})},app._um_gallery_enable_edit=function(id){},app._um_gallery_album_form=function(id,parent_id){var modal_id="#um-gallery-modal";jQuery(modal_id).html('<div class="um-gallery-loader"><i class="fa fa-spin fa-spinner"></i></div>'),jQuery.magnificPopup.open({items:{src:jQuery('<div id="um-gallery-modal" class="um-gallery-popup"></div>')},closeMarkup:'<a title="%title%" class="mfp-close">&#215;</a>',type:"inline",mainClass:"um-gallery-modal-wrapper"},0),id||(id=0),jQuery.ajax({type:"get",url:um_gallery_config.ajax_url,data:{action:"um_gallery_get_album_form",album_id:id,parent_id:parent_id},success:function(response){jQuery(modal_id).html(response),jQuery(modal_id).animate({"max-width":"740px"},"slow"),myDropzone=new Dropzone("#dropzone",{url:um_gallery_config.ajax_url,autoProcessQueue:!1,parallelUploads:5e3,method:"post",maxFiles:1,acceptedFiles:"image/*",dictDefaultMessage:um_gallery_config.dictDefaultMessage,queuecomplete:function(){jQuery(".um-gallery-message").html(um_gallery_config.upload_complete).slideDown()}})}})},app._um_gallery_photo_delete=function(id,parent_id){jQuery.ajax({type:"post",url:um_gallery_config.ajax_url,data:{action:"sp_gallery_um_delete",id:id,album_id:um_gallery_config.album_id,security:um_gallery_config.nonce},cache:!1,success:function(response){jQuery.magnificPopup.close(),jQuery("#um-photo-"+id).slideUp().remove(),window["um_gallery_images_"+parent_id]=response}})},app._um_gallery_album_delete=function(id){jQuery.ajax({type:"post",url:um_gallery_config.ajax_url,data:{action:"um_gallery_delete_album",id:id,security:um_gallery_config.nonce},cache:!1,success:function(response){jQuery("#um-album-"+id).slideUp().remove(),jQuery("div[id^='um-album-']").length||jQuery(".um-gallery-none").show()}})},app._um_load_info=function(id){jQuery.ajax({type:"get",url:um_gallery_config.ajax_url,data:{action:"um_photo_info",id:id,security:um_gallery_config.nonce},cache:!1,success:function(response){jQuery("#um-user-gallery-title").text(response.title),jQuery("#um-user-gallery-description").text(response.caption)}})},app._um_load_image=function(id,parent_id){if(!id||"undefined"===id)return!1;app.current_photo_id=id;var video_id,um_gallery_images=window["um_gallery_images_"+parent_id],um_gallery_users=window["um_gallery_users_"+parent_id],caption=um_gallery_images[id].hasOwnProperty("caption")?um_gallery_images[id].caption:"",description=um_gallery_images[id].hasOwnProperty("description")?um_gallery_images[id].description:"",user_id=um_gallery_images[id].hasOwnProperty("user_id")?um_gallery_images[id].user_id:"",category=um_gallery_images[id].hasOwnProperty("category")&&um_gallery_images[id].category.length?um_gallery_images[id].category[0]:[],category_id=um_gallery_images[id].hasOwnProperty("category_ids")&&um_gallery_images[id].category_ids.length?um_gallery_images[id].category_ids[0]:0,tags=um_gallery_images[id].hasOwnProperty("tags")&&um_gallery_images[id].tags.length?um_gallery_images[id].tags:[],media_frame="",source=document.getElementById("um_gallery_media").innerHTML,type=um_gallery_images[id].type,image=jQuery("#um-gallery-item-"+id).attr("data-source-url");if("youtube"==type||"vimeo"==type||"hudl"===type){var vid=app.um_gallery_get_video_type(image);"youtube"==type?(video_id=vid.id,media_frame='<iframe class="mfp-iframe" width="100%" src="//www.youtube.com/embed/'+video_id+'" frameborder="0" allowfullscreen></iframe>'):"vimeo"==type?(video_id=vid.id,media_frame='<iframe src="//player.vimeo.com/video/'+video_id+'" width="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'):"hudl"===type&&(video_id=vid.id,media_frame='<iframe src="//www.hudl.com/embed/video/'+video_id+'" width="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>')}var data={media_id:id,parent_id:parent_id,caption:caption,description:description,type:type,link:um_gallery_users[user_id].link,avatar:um_gallery_users[user_id].avatar,avatar_name:um_gallery_users[user_id].name,user_id:user_id,media_frame:media_frame,image:image,category:category,tags:tags,is_owner:um_gallery_images[id].current_user==user_id},template=Handlebars.compile(source),html=template(data);jQuery.magnificPopup.open({items:{src:html},type:"inline",closeMarkup:'<a title="%title%" class="mfp-close">&#215;</a>',mainClass:"um-gallery-modal-wrapper",callbacks:{open:function(){},close:function(){jQuery("body").removeClass("gallery-open")}}},0),$("#um_gallery_tag_list").tagit({fieldName:"tax_input[um_gallery_tag][]",autocomplete:{delay:0,minLength:2,source:um_gallery_config.ajaxurl+"?action=um_gallery_suggest_tabs"}}),category_id&&jQuery("#um-gallery-cat-picker").val(category_id),jQuery("#aqm_comment_id").val(id),um_gallery_config.enable_comments&&app.fetchComments(id)},app.fetchComments=function(id){$("#um-gallery-comments").comments({enableReplying:!0,currentUserId:!!um_gallery_config.user&&um_gallery_config.user.id,readOnly:!um_gallery_config.user,roundProfilePictures:!0,enableDeletingCommentWithReplies:!0,enableNavigation:!1,enableUpvoting:!1,profilePictureURL:um_gallery_config.user&&um_gallery_config.user.avatar?um_gallery_config.user.avatar:"",textareaPlaceholderText:um_gallery_config.comments.textareaPlaceholderText,newestText:um_gallery_config.comments.newestText,oldestText:um_gallery_config.comments.oldestText,popularText:um_gallery_config.comments.popularText,attachmentsText:um_gallery_config.comments.attachmentsText,sendText:um_gallery_config.comments.sendText,replyText:um_gallery_config.comments.replyText,editText:um_gallery_config.comments.editText,editedText:um_gallery_config.comments.editedText,youText:um_gallery_config.comments.youText,saveText:um_gallery_config.comments.saveText,deleteText:um_gallery_config.comments.deleteText,viewAllRepliesText:um_gallery_config.comments.viewAllRepliesText,hideRepliesText:um_gallery_config.comments.hideRepliesText,noCommentsText:um_gallery_config.comments.noCommentsText,noAttachmentsText:um_gallery_config.comments.noAttachmentsText,attachmentDropText:um_gallery_config.comments.attachmentDropText,textFormatter:function(text){return text},getComments:function(success,error){$.ajax({type:"get",url:um_gallery_config.ajax_url,data:{action:"um_gallery_get_comments",id:app.current_photo_id},success:function(commentsArray){success(commentsArray)},error:error})},postComment:function(commentJSON,success,error){commentJSON.action="um_gallery_post_comment",commentJSON.photo_id=app.current_photo_id,$.ajax({type:"post",url:um_gallery_config.ajax_url,data:commentJSON,success:function(comment){commentJSON.id=comment.id,success(commentJSON)},error:error})},putComment:function(commentJSON,success,error){commentJSON.action="um_gallery_post_comment",commentJSON.photo_id=app.current_photo_id,$.ajax({type:"post",url:um_gallery_config.ajax_url,data:commentJSON,success:function(comment){success(commentJSON)},error:error})},deleteComment:function(commentJSON,success,error){commentJSON.action="um_gallery_delete_comment",$.ajax({type:"post",url:um_gallery_config.ajax_url,data:commentJSON,success:success,error:error})}})},app._um_gallery_open_photo=function(id,parent_id){var image=jQuery("#um-gallery-item-"+id).attr("href"),source=document.getElementById("um_gallery_media").innerHTML,template=Handlebars.compile(source);template();jQuery.magnificPopup.open({items:{src:'<div id="um-gallery-modal" class="um-gallery-popup" data-id="'+id+'" data-gallery-id="'+parent_id+'">Loading icon</div>'},type:"inline",closeMarkup:'<a title="%title%" class="mfp-close">&#215;</a>',mainClass:"um-gallery-modal-wrapper",callbacks:{open:function(){jQuery(".um-user-gallery-image-wrap").css("background-image","url("+image+")"),app._um_load_image(id,parent_id),jQuery("body").addClass("gallery-open")},close:function(){jQuery("body").removeClass("gallery-open")}}},0)},app.toggleFullScreen=function(e){e.preventDefault(),jQuery("body").toggleClass("gallery-full-screen")},app.um_gallery_change_tab=function(tab){""==tab&&(tab="photo"),jQuery(".um-gallery-form-tabs > div").hide(),jQuery("#um-gallery-form-tab-"+tab).show()},app.get_video_thumbnail=function(video_url){var video_type=app.um_gallery_get_video_type(video_url);if(video_type.type){var video_id="";jQuery(".um-gallery-pro-video-list");return"youtube"==video_type.type&&(video_id=video_type.id,window.UM_Gallery_Pro.thumbnail="//i.ytimg.com/vi/"+video_id+"/0.jpg"),"vimeo"==video_type.type&&(window.UM_Gallery_Pro.thumbnail="https://i.vimeocdn.com/video/"+video_type.id+"_640.jpg"),"hudl"==video_type.type&&$.ajax({type:"GET",url:um_gallery_config.ajax_url,data:{action:"um_gallery_fetch_remote_thumbnail",videoType:video_type.type,videoUrl:video_url},success:function(data){window.UM_Gallery_Pro.thumbnail=data.thumbnail}}),window.UM_Gallery_Pro.thumbnail}},app.um_gallery_get_video_type=function(url){if(""!=url){url.match(/(http:\/\/|https:\/\/|)(player.|www.)?(hudl\.com|vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);var type=null,id=RegExp.$6;return RegExp.$3.indexOf("youtu")>-1?type="youtube":RegExp.$3.indexOf("vimeo")>-1?type="vimeo":RegExp.$3.indexOf("hudl")>-1&&(type="hudl",url.match(/(http:\/\/|https:\/\/|)(player.|www.)?(hudl\.com)\/(video\/)?(.*)(\&\S+)?/),id=RegExp.$5),{type:type,id:id}}},$(app.init)}(window,jQuery,window.UM_Gallery_Pro),jQuery(window).resize(function($){var winsize=jQuery(window).width(),modal_size=winsize-.15*winsize;modal_size=Math.round(modal_size)}),Handlebars.registerHelper("ifCond",function(v1,operator,v2,options){switch(operator){case"==":return v1==v2?options.fn(this):options.inverse(this);case"===":return v1===v2?options.fn(this):options.inverse(this);case"!=":return v1!=v2?options.fn(this):options.inverse(this);case"!==":return v1!==v2?options.fn(this):options.inverse(this);case"<":return v1<v2?options.fn(this):options.inverse(this);case"<=":return v1<=v2?options.fn(this):options.inverse(this);case">":return v1>v2?options.fn(this):options.inverse(this);case">=":return v1>=v2?options.fn(this):options.inverse(this);case"&&":return v1&&v2?options.fn(this):options.inverse(this);case"||":return v1||v2?options.fn(this):options.inverse(this);default:return options.inverse(this)}}),Handlebars.registerHelper("list",function(context,options){for(var ret="<ul>",i=0,j=context.length;i<j;i++)ret=ret+"<li>"+options.fn(context[i])+"</li>";return ret+"</ul>"});